{"version":3,"file":"vhall-saas-domain.js","sources":["../../src/domain/common/context.server.js","../../src/domain/common/msg.server.js","../../src/libs/sdk.js","../../node_modules/merge/lib/src/index.js","../../src/utils/http.js","../../src/request/roomBase.js","../../src/request/user.js","../../src/request/insertFile.js","../../src/request/virtualClient.js","../../src/request/interactive.js","../../src/request/mic.js","../../src/request/doc.js","../../src/request/index.js","../../src/domain/stream/interactive.server.js","../../src/domain/roombase/roombase.server.js","../../src/domain/common/eventEmitter.server.js","../../src/domain/stream/mic.server.js","../../src/domain/doc/doc.server.js","../../src/domain/chat/emoji.js","../../src/domain/chat/msg-class.js","../../src/domain/chat/chat.server.js","../../src/domain/stream/desktopShare.server.js","../../src/domain/stream/insertFile.server.js","../../src/utils/index.js","../../src/domain/stream/mediaCheck.server.js","../../src/domain/notice/notice.server.js","../../src/domain/player/player.server.js","../../src/domain/roombase/roomInit.group.server.js","../../src/domain/user/user.server.js","../../src/domain/virtualAudience/virtualAudience.server.js","../../src/domain/member/member.server.js"],"sourcesContent":["\nfunction useContextServer() {\n    const state = {\n        serverPool: {}\n    }\n\n    const set = (key, server) => {\n        const { serverPool } = state;\n        serverPool[key] = server;\n    }\n\n    const get = (key) => {\n        const { serverPool } = state;\n        return serverPool[key]\n    }\n\n    const show = () => {\n        const { serverPool } = state;\n        return { ...serverPool }\n    }\n\n    const clear = () => {\n        const { serverPool } = state\n        serverPool = {}\n    }\n\n    return { set, get, show, clear }\n}\n\nconst contextServer = useContextServer()\nexport default contextServer;\n","import contextServer from '@/domain/common/context.server.js'\n\nexport default function useMsgServer() {\n    const state = {\n        msgInstance: null\n    }\n\n    const init = () => {\n        if (!contextServer.get('roomInitGroupServer')) return\n        const { state: roomInitGroupServer } = contextServer.get('roomInitGroupServer')\n        return roomInitGroupServer.vhallSaasInstance.createChat().then(res => {\n            state.msgInstance = res\n            return res\n        })\n    }\n\n    const $on = (eventType, fn) => {\n        if (!state.msgInstance) return;\n        state.msgInstance.$on(eventType, fn);\n    }\n\n    const $emit = (eventType, params) => {\n        if (!state.msgInstance) return;\n        state.msgInstance.$emit(eventType, params);\n    }\n\n    const destroy = () => {\n        if (!state.msgInstance) return\n        state.msgInstance.destroy\n        state.msgInstance = null\n    }\n\n    return { state, init, destroy, $on, $emit }\n}\n","(function (factory) {\n  typeof define === 'function' && define.amd ? define(factory) :\n  factory();\n})((function () { 'use strict';\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n\n      if (enumerableOnly) {\n        symbols = symbols.filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      }\n\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    } else if (call !== void 0) {\n      throw new TypeError(\"Derived constructors may only return object or undefined\");\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  var mountSDK = function mountSDK(src) {\n    return new Promise(function (resolve) {\n      var node = document.createElement('script');\n      document.head.appendChild(node);\n      node.src = src;\n\n      node.onload = function () {\n        resolve();\n      };\n    });\n  };\n\n  /**\n   * ajax请求 jsonp处理\n   * 1.jsonp 请求格式\n   *   $fetch({\n   *      url:'',\n   *      type: 'GET',\n   *      jsonp: 'callback',\n   *      data: {\n   *        name: 123\n   *      }\n   *   })\n   */\n  var BUSE_URL = '';\n  var TOKEN = '';\n  var LIVETOKEN = '';\n  var HEADERS = null;\n\n  function setBaseUrl(url) {\n    BUSE_URL = url;\n  }\n\n  function setToken(token, livetoken) {\n    console.log(token, livetoken, 888);\n    TOKEN = token;\n    LIVETOKEN = livetoken;\n  }\n\n  function setRequestHeaders(options) {\n    HEADERS = _objectSpread2({}, options);\n  }\n\n  function $fetch(options) {\n    // if (\"development\" != 'development') {\n    //\n    // }\n    options.url = BUSE_URL + options.url;\n    console.log('接口环境', options.url);\n    return new Promise(function (resolve, reject) {\n      options = options || {};\n\n      if (options.data) {\n        if (LIVETOKEN) {\n          options.data.live_token = LIVETOKEN;\n        }\n\n        options.data = formatParams(options.data);\n      }\n\n      options.dataType ? jsonp(options, resolve, reject) : json(options, resolve, reject);\n    });\n  } // JSON请求\n\n\n  function json(params, success, fail) {\n    var xhr = null; // interactToken = sessionStorage.getItem('interact-token') || '',\n    // grayId = sessionStorage.getItem('grayId') || '',\n    // vhallJSSDKUserInfo = localStorage.getItem('vhallJSSDKUserInfo') ? JSON.parse(localStorage.getItem('vhallJSSDKUserInfo')) : {},\n\n    params.type = (params.type || 'GET').toUpperCase();\n\n    if (window.XMLHttpRequest) {\n      xhr = new XMLHttpRequest();\n    } else {\n      xhr = new ActiveXObject('Microsoft.XMLHTTP');\n    }\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        var status = xhr.status;\n\n        if (status >= 200 && status < 300) {\n          var response = '';\n          var type = xhr.getResponseHeader('Content-type');\n\n          if (type.indexOf('xml') !== -1 && xhr.responseXML) {\n            response = xhr.responseXML;\n          } else if (type === 'application/json' || type === 'application/json;charset=UTF-8') {\n            response = JSON.parse(xhr.responseText);\n          } else {\n            response = xhr.responseText;\n          }\n\n          success && success(response);\n        } else {\n          fail && fail(status);\n        }\n      }\n    };\n\n    if (params.type == 'GET') {\n      if (params.data) {\n        xhr.open(params.type, params.url + '?' + params.data, true);\n      } else {\n        xhr.open(params.type, params.url, true);\n      }\n    } else if (params.type == 'POST') {\n      xhr.open(params.type, params.url, true);\n    }\n\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\n    if (!LIVETOKEN) {\n      TOKEN && xhr.setRequestHeader('token', TOKEN);\n    }\n\n    if (HEADERS) {\n      Object.getOwnPropertyNames(HEADERS).forEach(function (item) {\n        xhr.setRequestHeader(item, HEADERS[item]);\n      });\n    } // if (params.headers && params.headers.activeType == 'new') {\n    //     xhr.setRequestHeader('platform', 18)\n    //     xhr.setRequestHeader('request-id', uuid())\n    //     grayId && xhr.setRequestHeader('gray-id', grayId)\n    //     interactToken && xhr.setRequestHeader('interact-token', interactToken)\n    //     token && xhr.setRequestHeader('token', token)\n    // }\n\n\n    if (params.type == 'GET') {\n      xhr.send(null);\n    } else {\n      xhr.send(params.data);\n    }\n  } // JSONP请求\n\n\n  function jsonp(params, success, fail) {\n    var callbackName = params.dataType;\n    params['callback'] = callbackName;\n    var script = document.createElement('script');\n    script.type = \"text/javascript\";\n    script.charset = \"utf-8\";\n    document.body.appendChild(script); // 创建回调函数\n\n    window[callbackName] = function (val) {\n      document.body.removeChild(script);\n      clearTimeout(script.timer);\n      window[callbackName] = null;\n      success && success(val);\n    };\n    script.src = \"\".concat(params.url, \"?\").concat(params.data, \"&_=\", 1594014089800); // 超时处理\n\n    if (params.time) {\n      script.timer = setTimeout(function () {\n        window[callbackName] = null;\n        head.removeChild(script);\n        fail && fail('请求超时');\n      }, parmas.time * 1000);\n    }\n  } // 格式化数据\n\n\n  function formatParams(data) {\n    var arr = [];\n\n    if (data) {\n      for (var item in data) {\n        arr.push(encodeURIComponent(item) + '=' + encodeURIComponent(data[item]));\n      }\n    }\n\n    return arr.join('&');\n  } // 随机数\n\n  var Store = /*#__PURE__*/function () {\n    function Store() {\n      _classCallCheck(this, Store);\n\n      this.state = {};\n    }\n\n    _createClass(Store, [{\n      key: \"set\",\n      value: function set(key, value) {\n        this.state[key] = value;\n      }\n    }, {\n      key: \"get\",\n      value: function get(key) {\n        return this.state[key];\n      }\n    }]);\n\n    return Store;\n  }();\n\n  var store = new Store();\n\n  var getRoomInfo = function getRoomInfo(res) {\n    var _data = res.data;\n    return {\n      webinar: {\n        type: _data.webinar.type,\n        id: _data.webinar.id\n      },\n      paasInfo: {\n        channel_id: _data.interact.channel_id,\n        inav_id: _data.interact.inav_id,\n        paas_access_token: _data.interact.paas_access_token,\n        paas_app_id: _data.interact.paas_app_id,\n        room_id: _data.interact.room_id\n      },\n      userInfo: {\n        avatar: _data.join_info.avatar,\n        is_gag: _data.join_info.is_gag,\n        is_kick: _data.join_info.is_kick,\n        join_id: _data.join_info.join_id,\n        nickname: _data.join_info.nickname,\n        role_name: _data.join_info.role_name,\n        third_party_user_id: _data.join_info.third_party_user_id\n      },\n      reportData: {\n        guid: _data.report_data.guid,\n        aid: _data.interact.room_id,\n        report_extra: _data.report_data.report_extra\n      }\n    };\n  };\n\n  function getDefaultExportFromCjs (x) {\n  \treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n  }\n\n  var src = {exports: {}};\n\n  (function (module, exports) {\n\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.isPlainObject = exports.clone = exports.recursive = exports.merge = exports.main = void 0;\n    module.exports = exports = main;\n    exports[\"default\"] = main;\n\n    function main() {\n      var items = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        items[_i] = arguments[_i];\n      }\n\n      return merge.apply(void 0, items);\n    }\n\n    exports.main = main;\n    main.clone = clone;\n    main.isPlainObject = isPlainObject;\n    main.recursive = recursive;\n\n    function merge() {\n      var items = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        items[_i] = arguments[_i];\n      }\n\n      return _merge(items[0] === true, false, items);\n    }\n\n    exports.merge = merge;\n\n    function recursive() {\n      var items = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        items[_i] = arguments[_i];\n      }\n\n      return _merge(items[0] === true, true, items);\n    }\n\n    exports.recursive = recursive;\n\n    function clone(input) {\n      if (Array.isArray(input)) {\n        var output = [];\n\n        for (var index = 0; index < input.length; ++index) {\n          output.push(clone(input[index]));\n        }\n\n        return output;\n      } else if (isPlainObject(input)) {\n        var output = {};\n\n        for (var index in input) {\n          output[index] = clone(input[index]);\n        }\n\n        return output;\n      } else {\n        return input;\n      }\n    }\n\n    exports.clone = clone;\n\n    function isPlainObject(input) {\n      return input && _typeof(input) === 'object' && !Array.isArray(input);\n    }\n\n    exports.isPlainObject = isPlainObject;\n\n    function _recursiveMerge(base, extend) {\n      if (!isPlainObject(base)) return extend;\n\n      for (var key in extend) {\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype') continue;\n        base[key] = isPlainObject(base[key]) && isPlainObject(extend[key]) ? _recursiveMerge(base[key], extend[key]) : extend[key];\n      }\n\n      return base;\n    }\n\n    function _merge(isClone, isRecursive, items) {\n      var result;\n      if (isClone || !isPlainObject(result = items.shift())) result = {};\n\n      for (var index = 0; index < items.length; ++index) {\n        var item = items[index];\n        if (!isPlainObject(item)) continue;\n\n        for (var key in item) {\n          if (key === '__proto__' || key === 'constructor' || key === 'prototype') continue;\n          var value = isClone ? clone(item[key]) : item[key];\n          result[key] = isRecursive ? _recursiveMerge(result[key], value) : value;\n        }\n      }\n\n      return result;\n    }\n  })(src, src.exports);\n\n  var merge = /*@__PURE__*/getDefaultExportFromCjs(src.exports);\n\n  /**\n   * 判断终端类型\n   *\n   * @export\n   * @param {*} target\n   * @returns\n   */\n\n  function isPc(target) {\n    var userAgentInfo = navigator.userAgent;\n    var Agents = [\"Android\", \"iPhone\", \"SymbianOS\", \"Windows Phone\", \"iPad\", \"iPod\"];\n    var flag = true;\n\n    for (var v = 0; v < Agents.length; v++) {\n      if (userAgentInfo.indexOf(Agents[v]) > 0) {\n        flag = false;\n        break;\n      }\n    }\n\n    return flag;\n  }\n\n  var initSendLive = function initSendLive(params) {\n    var retParmams = {\n      webinar_id: params.webinarId,\n      live_token: params.live_token || '',\n      nickname: params.nickname || '',\n      email: params.email || '',\n      biz_id: params.biz_id || ''\n    };\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/init',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 观看端初始化（标品）\n\n\n  var initStandardReceiveLive = function initStandardReceiveLive(params) {\n    var retParmams = {\n      webinar_id: params.webinarId,\n      visitor_id: params.visitor_id || '',\n      record_id: params.record_id || '',\n      refer: params.refer || '',\n      biz_id: params.biz_id || ''\n    };\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/watch/init',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 观看端初始化（嵌入页）\n\n\n  var initEmbeddedReceiveLive = function initEmbeddedReceiveLive(params) {\n    var retParmams = {\n      webinar_id: params.webinarId,\n      visitor_id: params.visitor_id || '',\n      record_id: params.record_id || '',\n      email: params.email || '',\n      nickname: params.nickname || '',\n      k: params.k || '',\n      state: params.state || '',\n      refer: params.refer || '',\n      sign: params.sign || '',\n      ts: params.ts || '',\n      biz_id: params.biz_id || ''\n    };\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/watch/inline-init',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 观看端初始化（SDK）\n\n\n  var initSdkReceiveLive = function initSdkReceiveLive(params) {\n    var retParmams = {\n      webinar_id: params.webinarId,\n      record_id: params.record_id || '',\n      email: params.email || '',\n      nickname: params.nickname || '',\n      pass: params.pass || '',\n      k: params.k || '',\n      refer: params.refer || '',\n      qrcode: params.qrcode || '',\n      share_id: params.share_id || '',\n      visitor_id: params.visitor_id || '',\n      biz_id: params.biz_id || ''\n    };\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/watch/sdk-init',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 开始直播\n\n\n  var startLive = function startLive(params) {\n    var _store$get = store.get('roomInitData'),\n        _store$get$webinar = _store$get.webinar,\n        webinar = _store$get$webinar === void 0 ? {} : _store$get$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/start',\n        type: 'POST',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 结束直播\n\n\n  var endLive = function endLive(params) {\n    var _store$get2 = store.get('roomInitData'),\n        _store$get2$webinar = _store$get2.webinar,\n        webinar = _store$get2$webinar === void 0 ? {} : _store$get2$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/end',\n        type: 'POST',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 进入直播前检测\n\n\n  var checkLive = function checkLive(params) {\n    var _store$get3 = store.get('roomInitData'),\n        _store$get3$webinar = _store$get3.webinar,\n        webinar = _store$get3$webinar === void 0 ? {} : _store$get3$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/check',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 获取聊天服务链接参数\n\n\n  var getChatInitOptions = function getChatInitOptions(params) {\n    var _store$get4 = store.get('roomInitData'),\n        _store$get4$webinar = _store$get4.webinar,\n        webinar = _store$get4$webinar === void 0 ? {} : _store$get4$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/get-connect',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 心跳检测\n\n\n  var liveHeartBeat = function liveHeartBeat(params) {\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/heartbeat',\n        type: 'GET',\n        data: params\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 获取live_token\n\n\n  var getLiveToken = function getLiveToken(params) {\n    var _store$get5 = store.get('roomInitData'),\n        _store$get5$webinar = _store$get5.webinar,\n        webinar = _store$get5$webinar === void 0 ? {} : _store$get5$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/get-live-token',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 获取推流地址\n\n\n  var getStreamPushAddress = function getStreamPushAddress(params) {\n    var _store$get6 = store.get('roomInitData'),\n        _store$get6$webinar = _store$get6.webinar,\n        webinar = _store$get6$webinar === void 0 ? {} : _store$get6$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/get-stream-push-address',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  };\n\n  var live = {\n    initSendLive: initSendLive,\n    initStandardReceiveLive: initStandardReceiveLive,\n    initEmbeddedReceiveLive: initEmbeddedReceiveLive,\n    initSdkReceiveLive: initSdkReceiveLive,\n    startLive: startLive,\n    endLive: endLive,\n    checkLive: checkLive,\n    getChatInitOptions: getChatInitOptions,\n    liveHeartBeat: liveHeartBeat,\n    getLiveToken: getLiveToken,\n    getStreamPushAddress: getStreamPushAddress\n  };\n\n  var RequestApi = function RequestApi() {\n    _classCallCheck(this, RequestApi);\n\n    this.live = live;\n  };\n\n  var requestApi = new RequestApi();\n\n  var BaseModule = /*#__PURE__*/function () {\n    function BaseModule() {\n      _classCallCheck(this, BaseModule);\n\n      _defineProperty(this, \"handlers\", {});\n    }\n\n    _createClass(BaseModule, [{\n      key: \"$on\",\n      value: // 事件添加方法，参数有事件名和事件方法\n      function $on(type, handler) {\n        // 首先判断handlers内有没有type事件容器，没有则创建一个新数组容器\n        if (!(type in this.handlers)) {\n          this.handlers[type] = [];\n        } // 将事件存入\n\n\n        this.handlers[type].push(handler);\n      } // 触发事件两个参数（事件名，参数）\n\n    }, {\n      key: \"$emit\",\n      value: function $emit(type) {\n        for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          params[_key - 1] = arguments[_key];\n        }\n\n        // 若没有注册该事件则抛出错误\n        if (!(type in this.handlers)) {\n          return new Error('未注册该事件');\n        } // 便利触发\n\n\n        this.handlers[type].forEach(function (handler) {\n          handler.apply(void 0, params);\n        });\n      } // 事件移除参数（事件名，删除的事件，若无第二个参数则删除该事件的订阅和发布）\n\n    }, {\n      key: \"$off\",\n      value: function $off(type, handler) {\n        // 无效事件抛出\n        if (!(type in this.handlers)) {\n          return new Error('无效事件');\n        }\n\n        if (!handler) {\n          // 直接移除事件\n          delete this.handlers[type];\n        } else {\n          var idx = this.handlers[type].findIndex(function (ele) {\n            return ele === handler;\n          }); // 抛出异常事件\n\n          if (idx === undefined) {\n            return new Error('无该绑定事件');\n          } // 移除事件\n\n\n          this.handlers[type].splice(idx, 1);\n\n          if (this.handlers[type].length === 0) {\n            delete this.handlers[type];\n          }\n        }\n      }\n    }]);\n\n    return BaseModule;\n  }();\n\n  var ChatModule = /*#__PURE__*/function (_BaseModule) {\n    _inherits(ChatModule, _BaseModule);\n\n    var _super = _createSuper(ChatModule);\n\n    function ChatModule() {\n      _classCallCheck(this, ChatModule);\n\n      return _super.call(this);\n    }\n    /**\n     * 初始化聊天 SDK\n     * @param {Object} customOptions 用户自定义参数\n     */\n\n\n    _createClass(ChatModule, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var defaultOptions = this.initDefaultOptions();\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        return new Promise(function (resolve, reject) {\n          VhallChat.createInstance(options, function (event) {\n            _this.instance = event.message;\n\n            _this.listenEvents();\n\n            resolve(event);\n          }, reject);\n        });\n      }\n      /**\n       * 销毁聊天实例\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.instance.destroy();\n        this.instance = null;\n      }\n      /**\n       * 获取实例化聊天的默认参数\n       * @returns {Object} defaultOptions 默认参数\n       */\n\n    }, {\n      key: \"initDefaultOptions\",\n      value: function initDefaultOptions() {\n        var isPcClient = isPc();\n\n        var _store$get = store.get('roomInitData'),\n            paasInfo = _store$get.paasInfo,\n            userInfo = _store$get.userInfo;\n\n        var defaultContext = {\n          nick_name: userInfo.nickname,\n          avatar: userInfo.avatar,\n          role_name: userInfo.role_name,\n          device_type: isPcClient ? '2' : '1',\n          // 设备类型 1手机端 2PC 0未检测\n          device_status: '0',\n          // 设备状态  0未检测 1可以上麦 2不可以上麦\n          is_banned: userInfo.is_gag,\n          // 是否禁言 1是 0否\n          watch_type: isPcClient ? '1' : '2',\n          // 1 pc  2 h5  3 app  4 是客户端\n          is_kick: userInfo.is_kick\n        };\n        var defaultOptions = {\n          context: defaultContext,\n          appId: paasInfo.paas_app_id,\n          accountId: userInfo.third_party_user_id,\n          channelId: paasInfo.channel_id,\n          token: paasInfo.paas_access_token,\n          hide: false // 是否隐身\n\n        };\n        return defaultOptions;\n      }\n      /**\n       * 注册聊天事件\n       */\n\n    }, {\n      key: \"listenEvents\",\n      value: function listenEvents() {\n        var _this2 = this;\n\n        this.instance.onRoomMsg(function (msg) {\n          // 房间消息（不对外）\n          _this2.$emit('ROOM_MSG', msg);\n        });\n        this.instance.onChat(function (msg) {\n          // 聊天消息\n          _this2.$emit('CHAT', msg);\n        });\n        this.instance.onCustomMsg(function (msg) {\n          // 自定义消息\n          _this2.$emit('CUSTOM_MSG', msg);\n        });\n        this.instance.onOffLine(function () {\n          // 连接断开\n          _this2.$emit('OFFLINE');\n        });\n        this.instance.onOnLine(function () {\n          // 连接连接上了\n          _this2.$emit('ONLINE');\n        });\n        this.instance.onDocMsg(function (msg) {\n          // 文档消息（不对外）\n          _this2.$emit('DOC_MSG');\n        });\n        this.instance.join(function (msg) {\n          // 用户加入\n          _this2.$emit('JOIN', msg);\n        });\n        this.instance.leave(function (msg) {\n          // 用户离开\n          _this2.$emit('LEFT', msg);\n        });\n      }\n      /**\n       * 发送聊天消息\n       * @param {String} data 消息体\n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"emitTextChat\",\n      value: function emitTextChat(data) {\n        var _this3 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this3.instance.emitChat(data, resolve, reject);\n        });\n      }\n      /**\n       * 发送自定义消息\n       * @param {String} data 消息体\n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"emitCustomChat\",\n      value: function emitCustomChat(data) {\n        return this.instance.emitCustomMsg(data);\n      }\n      /**\n       * 发送文档消息（不对外）\n       * @param {Object} data 消息体\n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"emitDocMsg\",\n      value: function emitDocMsg(data) {\n        return this.instance.emitDocMsg(data);\n      }\n      /**\n       * 发送房间消息（不对外）\n       * @param {Object} data 消息体\n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"emitRoomMsg\",\n      value: function emitRoomMsg(data) {\n        var retData = JSON.stringify(data);\n        return this.instance.emitRoomMsg(retData);\n      }\n      /**\n       * 获取用户列表信息\n       * @param {Object} params 分页参数\n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"getUserListInfo\",\n      value: function getUserListInfo(params) {\n        var _this4 = this;\n\n        var defaultParams = {\n          currPage: 1,\n          pageSize: 10\n        };\n        var retParams = merge.recursive({}, defaultParams, params);\n        return new Promise(function (resolve, reject) {\n          _this4.instance.getUserListInfo(retParams, resolve, reject);\n        });\n      }\n      /**\n       * 禁言某个用户\n       * @param {Object} accountId 用户 id \n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"setUserDisable\",\n      value: function setUserDisable(accountId) {\n        return new Peomise(function (resolve, reject) {\n          var param = {\n            type: VhallChat.TYPE_DISABLE,\n            targetId: accountId\n          };\n          chat.setDisable(param, resolve, reject);\n        });\n      }\n      /**\n       * 取消禁言某个用户\n       * @param {Object} accountId 用户 id \n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"setUserPermit\",\n      value: function setUserPermit(accountId) {\n        return new Peomise(function (resolve, reject) {\n          var param = {\n            type: VhallChat.TYPE_PERMIT,\n            targetId: accountId\n          };\n          chat.setDisable(param, resolve, reject);\n        });\n      }\n      /**\n       * 禁言频道\n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"setChannelDisable\",\n      value: function setChannelDisable() {\n        return new Peomise(function (resolve, reject) {\n          var param = {\n            type: VhallChat.TYPE_DISABLE_ALL\n          };\n          chat.setDisable(param, resolve, reject);\n        });\n      }\n      /**\n       * 取消禁言频道\n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"setChannelPermit\",\n      value: function setChannelPermit() {\n        return new Peomise(function (resolve, reject) {\n          var param = {\n            type: VhallChat.TYPE_PERMIT_ALL\n          };\n          chat.setDisable(param, resolve, reject);\n        });\n      }\n      /**\n       * 获取历史聊天消息\n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"getHistoryList\",\n      value: function getHistoryList(params) {\n        var _this5 = this;\n\n        var defaultParams = {\n          currPage: 1,\n          pageSize: 200\n        };\n        var retParams = merge.recursive({}, defaultParams, params);\n        return new Promise(function (resolve, reject) {\n          _this5.instance.getHistoryList(retParams, resolve, reject);\n        });\n      }\n      /**\n       * 获取房间在线信息\n       * @param {Object} params 分页参数\n       * @returns {Promise}\n       */\n\n    }, {\n      key: \"getOnlineInfo\",\n      value: function getOnlineInfo(params) {\n        var _this6 = this;\n\n        var defaultParams = {\n          currPage: 1,\n          pageSize: 200\n        };\n        var retParams = merge.recursive({}, defaultParams, params);\n        return new Promise(function (resolve, reject) {\n          _this6.instance.getOnlineInfo(retParams, resolve, reject);\n        });\n      }\n    }]);\n\n    return ChatModule;\n  }(BaseModule);\n\n  var DocModule = /*#__PURE__*/function (_BaseModule) {\n    _inherits(DocModule, _BaseModule);\n\n    _createSuper(DocModule);\n\n    function DocModule() {\n      var _this;\n\n      _classCallCheck(this, DocModule);\n\n      _this.instance = null;\n      _this.children = [];\n      return _possibleConstructorReturn(_this);\n    }\n\n    _createClass(DocModule, [{\n      key: \"init\",\n      value: function init() {\n        var _this2 = this;\n\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var defaultOptions = this.initDefaultOptions();\n        var options = merge.recursive({}, defaultOptions, customOptions);\n\n        var onSuccess = function onSuccess() {\n          console.log('saasSDK文档初始化成功');\n\n          _this2.$emit(CONST_VAL.DOC_SDK_READ, _this2.instance);\n        };\n\n        var onFail = function onFail() {\n          console.error('saasSDK文档初始化失败', failed.msg);\n\n          _this2.$emit(CONST_VAL.DOC_SDK_ERROR, failed.msg);\n        };\n\n        this.instance = VHDocSDK.createInstance(options, onSuccess, onFail);\n        this.listenEvents();\n      }\n    }, {\n      key: \"initDefaultOptions\",\n      value: function initDefaultOptions() {\n        isPc();\n\n        var _store$get = store.get('roomInitData'),\n            paasInfo = _store$get.paasInfo,\n            userInfo = _store$get.userInfo;\n\n        var defaultOptions = {\n          accountId: userInfo.third_party_user_id,\n          roomId: paasInfo.room_id,\n          channelId: paasInfo.channel_id,\n          // 频道id 必须\n          appId: paasInfo.paas_app_id,\n          // appId 必须\n          role: userInfo.role_name,\n          // 角色 必须\n          isVod: false,\n          // 是否是回放 必须\n          client: window.VHDocSDK.Client.PC_WEB,\n          // 客户端类型\n          token: this.token\n        };\n        return defaultOptions;\n      }\n    }, {\n      key: \"listenEvents\",\n      value: function listenEvents() {\n        var _this3 = this;\n\n        // 创建容器事件\n        this.instance.on(VHDocSDK.Event.CREATE_CONTAINER, function (data) {}); // 选择容器\n\n        this.instance.on(VHDocSDK.Event.SELECT_CONTAINER, function (data) {}); // 当前文档加载完成\n\n        this.instance.on(VHDocSDK.Event.DOCUMENT_LOAD_COMPLETE, function (data) {}); // 开关变换\n\n        this.instance.on(VHDocSDK.Event.SWITCH_CHANGE, function (status) {\n          _this3.$emit('SWITCH_CHANGE', status);\n        }); // 删除容器时候触发的事件\n\n        this.instance.on(VHDocSDK.Event.DELETE_CONTAINER, function (data) {\n          _this3.$emit('DELETE_CONTAINER');\n        }); // 所有的文档准备完成\n\n        this.instance.on(VHDocSDK.Event.ALL_COMPLETE, function () {\n          _this3.$emit('ALL_COMPLETE');\n        }); // 正在演示的文档被删除(文档不存在)\n\n        this.instance.on(VHDocSDK.Event.DOCUMENT_NOT_EXIT, function (_ref) {\n          var cid = _ref.cid,\n              docId = _ref.docId;\n\n          _this3.$emit('DOCUMENT_NOT_EXIT', {\n            cid: cid,\n            docId: docId\n          });\n        }); // 翻页事件\n\n        this.instance.on(VHDocSDK.Event.PAGE_CHANGE, function (event) {\n          _this3.$emit('PAGE_CHANGE\b', event);\n        }); // 回放文件加载完成\n\n        this.instance.on(VHDocSDK.Event.VOD_CUEPOINT_LOAD_COMPLETE, function (event) {\n          _this3.$emit('VOD_CUEPOINT_LOAD_COMPLETE', event);\n        }); // ppt文档加载完毕\n\n        this.instance.on(VHDocSDK.Event.PLAYBACKCOMPLETE, function (event) {\n          _this3.$emit('PLAYBACKCOMPLETE', event);\n        });\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        if (!this.instance) return;\n        this.instance.destroy();\n        this.instance = null;\n      }\n    }, {\n      key: \"createBoard\",\n      value: function createBoard(customOptions) {\n        var elId = this.instance.createUUID('board');\n        var defaultOptions = {\n          elId: elId,\n          // div 容器 必须\n          width: 200,\n          // div 宽度，像素单位，数值型不带px 必须\n          height: 200,\n          // div 高度，像素单位，数值型不带px 必须\n          backgroundColor: 'RGBA',\n          // 背景颜色， 支持RGB 与 RGBA， 如果全透明，舞台背景色与网页背景色相同，如 ‘#FF0000’或 ‘#FF000000’ 必须\n          noDispatch: false,\n          // 非必填，默认false，是否推送消息到远端，false为推送，true为不推送，加载远程文档时该字段应为true\n          option: {\n            // 非必填，画笔预设选项\n            graphicType: VHDocSDK.GRAPHIC.PEN,\n            // 选项请参考画笔预设值,\n            stroke: '#000',\n            // 颜色值\n            strokeWidth: 4 // 正数 Number\n\n          }\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        this.instance.createBoard(options);\n      }\n    }, {\n      key: \"creatDocument\",\n      value: function creatDocument(customOptions) {\n        var _defaultOptions;\n\n        var elId = sdk.createUUID('document'); // 容器id，必须用此方法创建，文档传入document，返回唯一id\n\n        var defaultOptions = (_defaultOptions = {\n          id: customOptions.id,\n          docId: customOptions.docId,\n          elId: elId,\n          // div 容器 必须\n          width: 200,\n          // div 宽度，像素单位，数值型不带px 必须\n          height: 200\n        }, _defineProperty(_defaultOptions, \"docId\", 'yyy'), _defineProperty(_defaultOptions, \"noDispatch\", false), _defineProperty(_defaultOptions, \"option\", {\n          // 非必填，画笔预设选项\n          graphicType: VHDocSDK.GRAPHIC.PEN,\n          // 选项请参考画笔预设值,\n          stroke: '#000',\n          // 颜色值\n          strokeWidth: 4 // 正数 Number\n\n        }), _defaultOptions);\n        merge.recursive({}, defaultOptions, customOptions);\n        sdk.createDocument(opts); // 返回promise\n      }\n    }, {\n      key: \"selectContainer\",\n      value: function selectContainer(id) {\n        this.instance.selectContainer({\n          id: id\n        });\n        this.currentCid = id;\n      }\n      /**\n       * \n       * @param {*} child is cid-ret\n       */\n\n    }, {\n      key: \"addChild\",\n      value: function addChild(child) {\n        this.children.push(child);\n      }\n    }, {\n      key: \"zoomIn\",\n      value: function zoomIn() {\n        this.instance.zoomIn();\n      }\n    }, {\n      key: \"zoomOut\",\n      value: function zoomOut() {\n        this.instance.zoomOut();\n      }\n    }, {\n      key: \"zoomReset\",\n      value: function zoomReset() {\n        this.instance.zoomReset();\n      }\n    }, {\n      key: \"move\",\n      value: function move() {\n        this.instance.move();\n      }\n    }, {\n      key: \"prevStep\",\n      value: function prevStep() {\n        this.instance.prevStep();\n      }\n    }, {\n      key: \"nextStep\",\n      value: function nextStep() {\n        this.instance.nextStep();\n      }\n    }]);\n\n    return DocModule;\n  }(BaseModule);\n\n  var InteractiveModule = /*#__PURE__*/function (_BaseModule) {\n    _inherits(InteractiveModule, _BaseModule);\n\n    var _super = _createSuper(InteractiveModule);\n\n    function InteractiveModule(customOptions) {\n      _classCallCheck(this, InteractiveModule);\n\n      return _super.call(this, customOptions);\n    }\n    /**\n     * 初始化互动sdk\n     * @param {Object} customOptions \n     * @param {*} successCb \n     * @param {*} failCb \n     * \n     */\n\n\n    _createClass(InteractiveModule, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n        console.log('customoptions', customOptions);\n        console.log('store', store);\n        var defaultOptions = {\n          appId: store.get('roomInitData').paasInfo.paas_app_id,\n          // 互动应用ID，必填\n          inavId: store.get('roomInitData').paasInfo.inav_id,\n          // 互动房间ID，必填\n          roomId: store.get('roomInitData').paasInfo.room_id,\n          // 如需开启旁路，必填。\n          accountId: store.get('roomInitData').userInfo.third_party_user_id,\n          // 第三方用户ID，必填\n          token: store.get('roomInitData').paasInfo.paas_access_token,\n          // access_token，必填\n          mode: VhallRTC.MODE_RTC,\n          //应用场景模式，选填，可选值参考下文【应用场景类型】。支持版本：2.3.1及以上。\n          role: VhallRTC.ROLE_HOST,\n          //用户角色，选填，可选值参考下文【互动参会角色】。当mode为rtc模式时，不需要配置role。支持版本：2.3.1及以上。\n          attributes: '',\n          // String 类型\n          autoStartBroadcast: store.get('roomInitData').userInfo.role_name == 1,\n          // 是否开启自动旁路 Boolean 类型   主持人默认开启true v2.3.5版本以上可用\n          broadcastConfig: store.get('roomInitData').userInfo.role_name == 1 ? {\n            layout: customOptions.layout || VhallRTC.CANVAS_LAYOUT_PATTERN_FLOAT_6_5D,\n            // 旁路布局，选填 默认大屏铺满，一行5个悬浮于下面\n            profile: customOptions.profile || VhallRTC.BROADCAST_VIDEO_PROFILE_1080P_1,\n            // 旁路直播视频质量参数\n            paneAspectRatio: VhallRTC.BROADCAST_PANE_ASPACT_RATIO_16_9,\n            //旁路混流窗格指定高宽比。  v2.3.2及以上\n            border: customOptions.border || {\n              // 旁路边框属性\n              width: 2,\n              color: '0x666666'\n            }\n          } : {} // 自动旁路   开启旁路直播方法所需参数\n\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        console.log(\"optionssssssssssssssssssssssssssss\", options);\n        return new Promise(function (resolve, reject) {\n          var onSuccess = function onSuccess(event) {\n            _this.instance = event.vhallrtc;\n\n            _this.listenEvents();\n\n            console.log('init interactive sdk success:', event);\n            successCb(event);\n            resolve(event);\n          };\n\n          var onFail = function onFail(event) {\n            console.log('fail:', event);\n            failCb(event);\n            reject(event);\n          };\n\n          VhallRTC.createInstance(options, onSuccess, onFail);\n        });\n      }\n    }, {\n      key: \"listenEvents\",\n      value: function listenEvents() {\n        var _this2 = this;\n\n        this.instance.on(VhallRTC.EVENT_REMOTESTREAM_ADD, function (e) {\n          // 远端流加入事件\n          _this2.$emit('interactive_REMOTESTREAM_ADD', e);\n        });\n        this.instance.on(VhallRTC.EVENT_REMOTESTREAM_REMOVED, function (e) {\n          // 远端流离开事件\n          _this2.$emit('interactive_REMOTESTREAM_REMOVED', e);\n        });\n        this.instance.on(VhallRTC.EVENT_ROOM_EXCDISCONNECTED, function (e) {\n          // 房间信令异常断开事件\n          _this2.$emit('interactive_ROOM_EXCDISCONNECTED', e);\n        });\n        this.instance.on(VhallRTC.EVENT_REMOTESTREAM_MUTE, function (e) {\n          // 远端流音视频状态改变事件\n          _this2.$emit('interactive_REMOTESTREAM_MUTE', e);\n        });\n        this.instance.on(VhallRTC.EVENT_REMOTESTREAM_FAILED, function (e) {\n          // 本地推流或订阅远端流异常断开事件\n          _this2.$emit('interactive_REMOTESTREAM_FAILED', e);\n        });\n        this.instance.on(VhallRTC.EVENT_STREAM_END, function (e) {\n          // 本地流采集停止事件(处理拔出设备和桌面共享停止时)\n          _this2.$emit('interactive_STREAM_END', e);\n        });\n        this.instance.on(VhallRTC.EVENT_STREAM_STUNK, function (e) {\n          // 本地流视频发送帧率异常事件\n          _this2.$emit('interactive_STREAM_STUNK', e);\n        });\n        this.instance.on(VhallRTC.EVENT_DEVICE_CHANGE, function (e) {\n          // 新增设备或移除设备时触发\n          _this2.$emit('interactive_DEVICE_CHANGE', e);\n        });\n      }\n      /**\n       * 销毁互动sdk\n       * @returns -- 销毁互动sdk\n       */\n\n    }, {\n      key: \"destroyInit\",\n      value: function destroyInit() {\n        var _this3 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this3.instance.destroyInstance({}).then(function () {\n            resolve();\n            _this3.instance = null;\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 创建本地流\n       * @param obt {Object} - sdk init stream base info config\n       * @return {Promise} - 创建成功后的promise 回调\n       *\n       */\n\n    }, {\n      key: \"createLocalStream\",\n      value: function createLocalStream() {\n        var _this4 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this4.instance.createStream(options).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            if (store.get('roomInitData').userInfo.role_name != 1) {\n              //上麦人员无法创建本地流上麦，向外抛出信息\n              var toSpeakInfo = _objectSpread2({\n                roleName: store.get('roomInitData').userInfo.role_name,\n                accountId: store.get('roomInitData').userInfo.third_party_user_id,\n                nickName: store.get('roomInitData').userInfo.nickname\n              }, error);\n\n              reject(toSpeakInfo);\n            } else {\n              reject(error);\n            }\n          });\n        });\n      }\n      /**\n       * 创建摄像头视频流\n       * @param obt {Object} - sdk init stream base info config  videoNode: 容器 audioDevice: 音频的Id videoDevice:视频的设备Id profile:视频推流的质量\n       * @return {Promise} - 创建成功后的promise 回调\n       *\n       */\n\n    }, {\n      key: \"createLocalVideoStream\",\n      value: function createLocalVideoStream() {\n        var _this5 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 必填，传入本地视频显示容器ID\n            audio: true,\n            // 选填，是否采集音频设备，默认为true\n            video: true,\n            // 选填，是否采集视频设备，默认为true\n            audioDevice: options.audioDevice,\n            // 选填，指定的音频设备id，默认为系统缺省\n            videoDevice: options.videoDevice,\n            // 选填，指定的视频设备id，默认为系统缺省\n            profile: VhallRTC[options.profile] || VhallRTC.RTC_VIDEO_PROFILE_1080P_16x9_H,\n            // 选填，视频质量参数，可选值参考文档中的[互动流视频质量参数表]\n            streamType: 2,\n            //选填，指定互动流类型，当需要自定义类型时可传值。如未传值，则底层自动判断： 0为纯音频，1为纯视频，2为音视频，3为屏幕共享。\n            attributes: JSON.stringify({\n              roleName: store.get('roomInitData').userInfo.role_name,\n              accountId: store.get('roomInitData').userInfo.third_party_user_id,\n              nickName: store.get('roomInitData').userInfo.nickname\n            }) //选填，自定义信息，支持字符串类型\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n          console.log('pass params::', params);\n\n          _this5.instance.createStream(params).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            if (store.get('roomInitData').userInfo.role_name != 1) {\n              //上麦人员无法创建本地流上麦，向外抛出信息\n              var toSpeakInfo = _objectSpread2({\n                roleName: store.get('roomInfo').roleName,\n                accountId: store.get('roomInfo').accountId,\n                nickName: store.get('roomInfo').nickName\n              }, error);\n\n              reject(toSpeakInfo);\n            } else {\n              reject(error);\n            }\n          });\n        });\n      }\n      /**\n       * 创建桌面共享流\n       * @param obt {Object} - sdk init stream base info config  videoNode: 容器 speaker: 是否采集扬声器 profile: 视频的质量 addConfig: 扩展配置项\n       * @return {Promise} - 创建成功后的promise 回调\n       *\n       */\n\n    }, {\n      key: \"createLocaldesktopStream\",\n      value: function createLocaldesktopStream() {\n        var _this6 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 必填，传入本地视频显示容器ID\n            screen: true,\n            speaker: options.speaker || false,\n            // 桌面共享时是否分享桌面音频(如为true，则chrome浏览器弹框左下角将显示“分享音频”选框)，默认为false\n            profile: options.profile || VhallRTC.RTC_VIDEO_PROFILE_1080P_16x9_H,\n            // 选填，视频质量参数，可选值参考文档中的[互动流视频质量参数表]\n            streamType: 3,\n            //选填，指定互动流类型，当需要自定义类型时可传值。如未传值，则底层自动判断： 0为纯音频，1为纯视频，2为音视频，3为屏幕共享。\n            attributes: JSON.stringify({\n              roleName: store.get('roomInitData').userInfo.role_name,\n              accountId: store.get('roomInitData').userInfo.third_party_user_id,\n              nickName: store.get('roomInitData').userInfo.nickname\n            }) //选填，自定义信息，支持字符串类型\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this6.instance.createStream(params).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            if (store.get('roomInitData').userInfo.role_name != 1) {\n              //上麦人员无法创建本地流上麦，向外抛出信息\n              var toSpeakInfo = _objectSpread2({\n                roleName: store.get('roomInitData').userInfo.role_name,\n                accountId: store.get('roomInitData').userInfo.third_party_user_id,\n                nickName: store.get('roomInitData').userInfo.nickname\n              }, error);\n\n              reject(toSpeakInfo);\n            } else {\n              reject(error);\n            }\n          });\n        });\n      }\n      /**\n       * 创建本地音频流\n       * @param obt {Object} - sdk init stream base info config  videoNode: 容器 audioDevice: 音频Id addConfig: 扩展配置项\n       * @return {Promise} - 创建成功后的promise 回调\n       *\n       */\n\n    }, {\n      key: \"createLocalAudioStream\",\n      value: function createLocalAudioStream() {\n        var _this7 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 必填，传入本地视频显示容器ID\n            audio: true,\n            // 选填，是否采集音频设备，默认为true\n            video: false,\n            // 选填，是否采集视频设备，默认为true\n            audioDevice: options.audioDevice,\n            // 选填，指定的音频设备id，默认为系统缺省\n            showControls: false,\n            // 选填，是否开启视频原生控制条，默认为false\n            attributes: JSON.stringify({\n              account_id: store.get('roomInfo').accountId,\n              nick_name: store.get('roomInfo').nickName,\n              role_name: store.get('roomInfo').roleName\n            }),\n            //选填，自定义信息，支持字符串类型\n            streamType: 0 //选填，指定互动流类型，当需要自定义类型时可传值。如未传值，则底层自动判断： 0为纯音频，1为纯视频，2为音视频，3为屏幕共享。\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this7.instance.createStream(params).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 创建图片推流\n       * @param obt {Object} - sdk init stream base info config  videoNode: 容器 videoTrack: MediaStreamTrack对象,采集图像 addConfig: 扩展配置项\n       * @return {Promise} - 创建成功后的promise 回调\n       *\n       */\n\n    }, {\n      key: \"createLocalPhotoStream\",\n      value: function createLocalPhotoStream() {\n        var _this8 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 传入本地视频显示容器，必填\n            audio: true,\n            video: true,\n            //如参会者没有摄像头，则传入false\n            videoTrack: options.videoTrack //MediaStreamTrack对象\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this8.instance.createStream(params).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 销毁本地流\n       * @param {String} streamId -- 要销毁的流Id\n       * @returns \n       */\n\n    }, {\n      key: \"destroyStream\",\n      value: function destroyStream() {\n        var _this9 = this;\n\n        var streamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this9.instance.destroyStream({\n            streamId: streamId\n          }).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 推送本地流到远端\n       * @param {Object} options publish stream base info config  streamId：要推的流Id，accountId:用户Id\n       * @return {Promise} - 推流成功后的promise 回调\n       */\n\n    }, {\n      key: \"publishStream\",\n      value: function publishStream() {\n        var _this10 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this10.instance.publish({\n            streamId: options.streamId,\n            accountId: options.accountId\n          }).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (errInfo) {\n            reject(errInfo);\n          });\n        });\n      }\n      /**\n       * 取消推送到远端的流\n       * @param {String} streamId 要取消推的流Id\n       * @returns {Promise} - 取消推流成功后的promise 回调\n      */\n\n    }, {\n      key: \"unpublishStream\",\n      value: function unpublishStream() {\n        var _this11 = this;\n\n        var streamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this11.instance.unpublish({\n            streamId: streamId\n          }).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 订阅远端流\n       * @param {Object} options -- streamId:订阅的流id videoNode: 页面显示的容器 mute: 远端流的音视频 dual: 大小流 0小流 1大流\n       * @returns {Promise} - 订阅成功后的promise 回调\n       */\n\n    }, {\n      key: \"subscribeStream\",\n      value: function subscribeStream() {\n        var _this12 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 传入本地视频显示容器，必填\n            streamId: options.streamId,\n            mute: {\n              // 选填，订阅成功后立即mute远端流\n              audio: options.mute.audio || false,\n              // 是否关闭音频，默认false\n              video: options.mute.audio || false // 是否关闭视频，默认false\n\n            },\n            dual: options.dual || 1 // 双流订阅选项， 0为小流， 1为大流(默认)\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this12.instance.subscribe(params).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 取消订阅远端流\n       * @param {String} streamId -- 要取消订阅的流Id \n       * @returns {Promise} - 取消订阅成功后的promise 回调\n       */\n\n    }, {\n      key: \"unSubscribeStream\",\n      value: function unSubscribeStream() {\n        var _this13 = this;\n\n        var streamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this13.instance.unsubscribe({\n            streamId: streamId\n          }).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 设置大小流\n       * @param {Object} options streamId: 需要设置的流Id  dual: 0为小流 1为大流\n       * @returns {Promise} - 设置订阅大小流成功后的promise回调\n       */\n\n    }, {\n      key: \"setDual\",\n      value: function setDual() {\n        var _this14 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var params = {\n            streamId: options.streamId,\n            dual: options.dual\n          };\n\n          _this14.instance.setDual(params).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 改变视频的禁用和启用\n       * @param {Object} options streamId: 对哪一路流进行操作的流Id  isMute: true为禁用，false为启用\n       * @returns {Promise} - 改变视频的禁用与开启后的promise 回调\n       */\n\n    }, {\n      key: \"muteVideo\",\n      value: function muteVideo() {\n        var _this15 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var params = {\n            streamId: options.streamId,\n            isMute: options.isMute\n          };\n\n          _this15.instance.muteVideo(params).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 改变音频的禁用和启用\n       * @param {Object} options streamId: 对哪一路流进行操作的流Id isMute: true为禁用，false为启用\n       * @returns {Promise} - 改变音频的禁用与开启后的promise 回调\n       */\n\n    }, {\n      key: \"muteAudio\",\n      value: function muteAudio() {\n        var _this16 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var params = {\n            streamId: options.streamId,\n            isMute: options.isMute\n          };\n\n          _this16.instance.muteAudio(params).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 开启旁路\n       * @param {Object} options --  layout: 旁路布局  profile: 旁路直播视频质量参数 paneAspectRatio:旁路混流窗格指定高宽比 border: 旁路边框属性\n       * @returns {Promise} - 开启旁路后的promise回调\n       */\n\n    }, {\n      key: \"startBroadCast\",\n      value: function startBroadCast() {\n        var _this17 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            layout: options.layout || VhallRTC.CANVAS_LAYOUT_PATTERN_FLOAT_6_5D,\n            // 旁路布局，选填 默认大屏铺满，一行5个悬浮于下面\n            profile: options.profile || VhallRTC.BROADCAST_VIDEO_PROFILE_1080P_1,\n            // 旁路直播视频质量参数\n            paneAspectRatio: VhallRTC.BROADCAST_PANE_ASPACT_RATIO_16_9,\n            //旁路混流窗格指定高宽比。  v2.3.2及以上\n            border: options.border || {\n              // 旁路边框属性\n              width: 2,\n              color: '0x666666'\n            }\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this17.instance.startBroadCast(params).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 停止旁路\n       * @returns {Promise} - 停止旁路后的promise回调\n       */\n\n    }, {\n      key: \"stopBroadCast\",\n      value: function stopBroadCast() {\n        var _this18 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this18.instance.stopBroadCast().then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 动态配置指定旁路布局模板\n       * @param {Object} options --  layout: 指定旁路布局模板\n       * @returns {Promise} - 动态配置指定旁路布局模板的promise回调\n       */\n\n    }, {\n      key: \"setBroadCastLayout\",\n      value: function setBroadCastLayout() {\n        var _this19 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this19.instance.setBroadCastLayout({\n            layout: options.layout || VhallRTC.CANVAS_LAYOUT_PATTERN_FLOAT_6_5D\n          }).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 配置旁路布局自适应模式\n       * @param {Object} options --  layout: 指定旁路布局模板\n       * @returns {Promise} - 配置旁路布局自适应模式的promise回调\n       */\n\n    }, {\n      key: \"setBroadCastAdaptiveLayoutMode\",\n      value: function setBroadCastAdaptiveLayoutMode() {\n        var _this20 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this20.instance.setBroadCastAdaptiveLayoutMode({\n            adaptiveLayoutMode: options.adaptiveLayoutMode || VhallRTC.CANVAS_ADAPTIVE_LAYOUT_GRID_MODE\n          }).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 动态配置旁路主屏\n       * @param {String} mainScreenStreamId -- 将哪路流设置成主屏的流Id\n       * @returns {Promise} - 动态配置旁路主屏的promise回调\n       */\n\n    }, {\n      key: \"setBroadCastScreen\",\n      value: function setBroadCastScreen() {\n        var _this21 = this;\n\n        var mainScreenStreamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this21.instance.setBroadCastScreen({\n            mainScreenStreamId: mainScreenStreamId\n          }).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取全部音视频列表\n       * @returns {Promise} - 获取全部音视频列表的promise回调\n       */\n\n    }, {\n      key: \"getDevices\",\n      value: function getDevices() {\n        var _this22 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this22.instance.getDevices().then(function (devices) {\n            resolve(devices);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取摄像头列表\n       * @returns {Promise} - 获取摄像头列表的promise回调\n       */\n\n    }, {\n      key: \"getCameras\",\n      value: function getCameras() {\n        var _this23 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this23.instance.getCameras().then(function (devices) {\n            resolve(devices);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取麦克风列表\n       * @returns {Promise} - 获取麦克风列表的promise回调\n       */\n\n    }, {\n      key: \"getMicrophones\",\n      value: function getMicrophones() {\n        var _this24 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this24.instance.getMicrophones().then(function (devices) {\n            resolve(devices);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取扬声器列表\n       * @returns {Promise} - 获取扬声器列表的promise回调\n       */\n\n    }, {\n      key: \"getSpeakers\",\n      value: function getSpeakers() {\n        var _this25 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this25.instance.getSpeakers().then(function (devices) {\n            resolve(devices);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取设备的分辨率\n       * @param {String} deviceId -- 摄像头设备的Id\n       * @returns {Promise} - 分辨率获取之后的promise回调\n       */\n\n    }, {\n      key: \"getVideoConstraints\",\n      value: function getVideoConstraints(deviceId) {\n        var _this26 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this26.instance.getVideoConstraints({\n            deviceId: deviceId\n          }, function (data) {\n            resolve(data);\n          }, function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 配置本地流视频质量参数\n       * @param {Object} options --  streamId: 切换本地流Id profile: 必填，互动视频质量参数\n       * @returns {Promise} - 配置本地流视频质量参数的promise回调\n       */\n\n    }, {\n      key: \"setVideoProfile\",\n      value: function setVideoProfile() {\n        var _this27 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this27.instance.setVideoProfile({\n            streamId: options.streamId,\n            profile: options.profile\n          }, function (data) {\n            resolve(data);\n          }, function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取房间流信息\n       * @param {Object} options --  streamId: 切换本地流Id profile: 必填，互动视频质量参数\n       * @returns {Promise} - 配置本地流视频质量参数的promise回调\n       */\n\n    }, {\n      key: \"getRoomStreams\",\n      value: function getRoomStreams() {\n        return this.instance.getRoomStreams();\n      }\n      /**\n       * 获取房间总的信息\n       * @param {Object} options --  streamId: 切换本地流Id profile: 必填，互动视频质量参数\n       * @returns {Promise} - 配置本地流视频质量参数的promise回调\n       */\n\n    }, {\n      key: \"getRoomInfo\",\n      value: function getRoomInfo() {\n        return this.instance.getRoomInfo();\n      }\n      /**\n       * 是否支持桌面共享\n       * @returns Boolean\n       */\n\n    }, {\n      key: \"isScreenShareSupported\",\n      value: function isScreenShareSupported() {\n        return this.instance.isScreenShareSupported();\n      }\n      /**\n       * 检查当前浏览器支持性\n       * @returns Boolean\n       */\n\n    }, {\n      key: \"checkSystemRequirements\",\n      value: function checkSystemRequirements() {\n        var _this28 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this28.instance.checkSystemRequirements().then(function (data) {\n            resolve(data.result);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取上下行丢包率\n       * @returns  data中有 upLossRate 上行丢包率   downLossRate 下行丢包率\n       */\n\n    }, {\n      key: \"getPacketLossRate\",\n      value: function getPacketLossRate() {\n        var _this29 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this29.instance.getPacketLossRate().then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取流上下行丢包率\n       * @returns  data中有 \n       */\n\n    }, {\n      key: \"getStreamPacketLoss\",\n      value: function getStreamPacketLoss() {\n        var _this30 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this30.instance.getStreamPacketLoss(options).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取流音频能量\n       * @returns  \n       */\n\n    }, {\n      key: \"getAudioLevel\",\n      value: function getAudioLevel() {\n        var _this31 = this;\n\n        var streamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this31.instance.getAudioLevel({\n            streamId: streamId\n          }).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\n       * 获取流的mute状态\n       * @returns  \n       */\n\n    }, {\n      key: \"getStreamMute\",\n      value: function getStreamMute() {\n        var _this32 = this;\n\n        var streamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this32.instance.getStreamMute({\n            streamId: streamId\n          }).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n    }]);\n\n    return InteractiveModule;\n  }(BaseModule);\n\n  var PlayerModule = /*#__PURE__*/function (_BaseModule) {\n    _inherits(PlayerModule, _BaseModule);\n\n    var _super = _createSuper(PlayerModule);\n\n    function PlayerModule(customOptions) {\n      var _this;\n\n      _classCallCheck(this, PlayerModule);\n\n      _this = _super.call(this, customOptions);\n\n      _this.init(customOptions);\n\n      _this.isPlaying = false;\n      return _this;\n    }\n\n    _createClass(PlayerModule, [{\n      key: \"init\",\n      value: function init() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n        if (customOptions.type === 'live') {\n          this.initLivePlayer(customOptions, successCb, failCb);\n        }\n\n        if (customOptions.type === 'vod') {\n          this.initVodPlayer(customOptions, successCb, failCb);\n        }\n      }\n    }, {\n      key: \"createInstance\",\n      value: function createInstance() {\n        var _this2 = this;\n\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n        var _store$get = store.get('roomInitData'),\n            paasInfo = _store$get.paasInfo,\n            userInfo = _store$get.userInfo;\n\n        var defaultOptions = {\n          appId: paasInfo.paas_app_id,\n          accountId: userInfo.third_party_user_id,\n          token: paasInfo.paas_access_token,\n          type: 'live'\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        console.log('options:', options);\n\n        var onSuccess = function onSuccess(event) {\n          _this2.instance = event.vhallplayer;\n\n          _this2.listenEvents();\n\n          successCb(event);\n        };\n\n        var onFail = function onFail(event) {\n          console.log('fail:', event);\n          failCb(event);\n        };\n\n        VhallPlayer.createInstance(options, onSuccess, onFail);\n      }\n    }, {\n      key: \"initLivePlayer\",\n      value: function initLivePlayer() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n        var _store$get2 = store.get('roomInitData'),\n            paasInfo = _store$get2.paasInfo;\n            _store$get2.userInfo;\n\n        var defaultOptions = {\n          type: 'live',\n          language: 'zh',\n          liveOption: {\n            roomId: paasInfo.room_id,\n            forceMSE: true,\n            type: 'flv'\n          }\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        this.createInstance(options, successCb, failCb);\n      }\n    }, {\n      key: \"initVodPlayer\",\n      value: function initVodPlayer() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n        var defaultOptions = {\n          appId: '',\n          accountId: '',\n          token: '',\n          type: 'live',\n          vodOption: {\n            forceMSE: true,\n            recordId: ''\n          }\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        this.createInstance(options, successCb, failCb);\n      }\n    }, {\n      key: \"listenEvents\",\n      value: function listenEvents() {\n        var _this3 = this;\n\n        this.instance.on(VhallPlayer.CURRENTTIME_CHANGE, function (e) {\n          // 当前时间改变\n          _this3.$emit('CURRENTTIME_CHANGE', e);\n        });\n        this.instance.on(VhallPlayer.TIMEUPDATE, function (e) {\n          // 播放时间改变时触发\n          _this3.$emit('TIMEUPDATE', e);\n        });\n        this.instance.on(VhallPlayer.ENDED, function (e) {\n          // 播放完毕\n          _this3.$emit('ENDED', e);\n        });\n        this.instance.on(VhallPlayer.ERROR, function (e) {\n          // 播放器自身出现错误时触发\n          _this3.$emit('ERROR', e);\n        });\n        this.instance.on(VhallPlayer.LOADED, function (e) {\n          // 视频加载完成时触发\n          _this3.$emit('LOADED', e);\n        });\n        this.instance.on(VhallPlayer.PLAY, function (e) {\n          // 点播开始播放时触发\n          _this3.$emit('PLAY', e);\n        });\n        this.instance.on(VhallPlayer.PAUSE, function (e) {\n          // 点播暂停播放时触发\n          _this3.$emit('PAUSE', e);\n        });\n        this.instance.on(VhallPlayer.LAG_REPORT, function (e) {\n          // 视频卡顿时触发\n          _this3.$emit('LAG_REPORT', e);\n        });\n        this.instance.on(VhallPlayer.LAG_RECOVER, function (e) {\n          // 视频卡顿恢复时触发\n          _this3.$emit('LAG_RECOVER', e);\n        });\n        this.instance.on(VhallPlayer.FULLSCREEN_CHANGE, function (e) {\n          // 全屏状态改变时触发\n          _this3.$emit('FULLSCREEN_CHANGE', e);\n        });\n        this.instance.on(VhallPlayer.MUTE_CHANGE, function (e) {\n          // 静音状态被改变时触发\n          _this3.$emit('MUTE_CHANGE', e);\n        });\n        this.instance.on(VhallPlayer.LOOP_CHANGE, function (e) {\n          // 点播循环状态被改变时触发\n          _this3.$emit('LOOP_CHANGE', e);\n        });\n        this.instance.on(VhallPlayer.DEFINITION_CHANGE, function (e) {\n          // 当前清晰度改变时触发(卡顿时自动切清晰度触发，手动切换不触发)\n          _this3.$emit('DEFINITION_CHANGE', e);\n        });\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.instance.destroy();\n        this.instance = null;\n      }\n    }, {\n      key: \"play\",\n      value: function play() {\n        return this.instance.play();\n      }\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        return this.instance.pause();\n      }\n    }, {\n      key: \"isPause\",\n      value: function isPause() {\n        return this.instance.getIsPause();\n      }\n    }, {\n      key: \"getQualitys\",\n      value: function getQualitys() {\n        // 获取清晰度列表\n        return this.instance.getQualitys();\n      }\n    }, {\n      key: \"getCurrentQuality\",\n      value: function getCurrentQuality() {\n        // 获取当前视频清晰度\n        return this.instance.getCurrentQuality();\n      }\n    }, {\n      key: \"setQuality\",\n      value: function setQuality(val, failure) {\n        // 设置当前视频清晰度\n        return this.instance.setQuality(val, failure);\n      }\n    }, {\n      key: \"enterFullScreen\",\n      value: function enterFullScreen(failure) {\n        // 进入全屏\n        return this.instance.enterFullScreen(failure);\n      }\n    }, {\n      key: \"exitFullScreen\",\n      value: function exitFullScreen(failure) {\n        // 退出全屏\n        return this.instance.exitFullScreen(failure);\n      }\n    }, {\n      key: \"setMute\",\n      value: function setMute(isMute, failure) {\n        return this.instance.setMute(isMute, failure);\n      }\n    }, {\n      key: \"getVolume\",\n      value: function getVolume() {\n        // 获取音量\n        return this.instance.getVolume();\n      }\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(volume, failure) {\n        // 设置音量\n        return this.instance.setVolume(volume, failure);\n      }\n    }, {\n      key: \"getDuration\",\n      value: function getDuration(failure) {\n        // 获取当前视频总时长\n        return this.instance.getDuration(failure);\n      }\n    }, {\n      key: \"getCurrentTime\",\n      value: function getCurrentTime(failure) {\n        // 获取当前视频播放时间\n        return this.instance.getCurrentTime(failure);\n      }\n    }, {\n      key: \"setCurrentTime\",\n      value: function setCurrentTime(time, failure) {\n        // 设置当前播放时间\n        return this.instance.setCurrentTime(time, failure);\n      }\n    }, {\n      key: \"getUsableSpeed\",\n      value: function getUsableSpeed(failure) {\n        // 获取当前可选倍速\n        return this.instance.getUsableSpeed(failure);\n      }\n    }, {\n      key: \"setPlaySpeed\",\n      value: function setPlaySpeed(val, failure) {\n        // 设置倍速播放\n        return this.instance.setPlaySpeed(val, failure);\n      }\n    }, {\n      key: \"openControls\",\n      value: function openControls(isOpen) {\n        // 开关默认控制条\n        return this.instance.openControls(isOpen);\n      }\n    }, {\n      key: \"openUI\",\n      value: function openUI(isOpen) {\n        return this.instance.openUI(isOpen);\n      }\n    }, {\n      key: \"setResetVideo\",\n      value: function setResetVideo() {\n        var videoDom = document.getElementById(this.params.videoNode);\n\n        if (videoDom && this.instance) {\n          this.instance.setSize({\n            width: videoDom.offsetWidth,\n            height: videoDom.offsetHeight\n          });\n        }\n      }\n    }, {\n      key: \"setBarrageInfo\",\n      value: function setBarrageInfo(option) {\n        return this.instance.setBarrageInfo(option, function (err) {\n          Vlog.error(err);\n        });\n      }\n    }, {\n      key: \"addBarrage\",\n      value: function addBarrage(content) {\n        return this.instance.addBarrage(content, function (err) {\n          Vlog.error(err);\n        });\n      }\n    }, {\n      key: \"toggleBarrage\",\n      value: function toggleBarrage(open) {\n        if (!this.instance) return;\n\n        if (open) {\n          this.instance.openBarrage();\n        } else {\n          this.instance.closeBarrage();\n        }\n      }\n    }, {\n      key: \"toggleSubtitle\",\n      value: function toggleSubtitle(open) {\n        if (this.instance && this.params.recordId) {\n          if (open) {\n            // 开启点播字幕(仅点播可用)\n            this.instance.openSubtitle();\n          } else {\n            // 关闭点播字幕(仅点播可用)\n            this.instance.closeSubtitle();\n          }\n        }\n      }\n    }]);\n\n    return PlayerModule;\n  }(BaseModule);\n\n  var initLoader = function initLoader() {\n    Promise.all([mountSDK('https://static.vhallyun.com/jssdk/vhall-jssdk-player/latest/vhall-jssdk-player-2.3.8.js'), mountSDK('https://static.vhallyun.com/jssdk/vhall-jssdk-chat/latest/vhall-jssdk-chat-2.1.3.js'), mountSDK('https://static.vhallyun.com/jssdk/vhall-jssdk-interaction/latest/vhall-jssdk-interaction-2.3.3.js')]).then(function (res) {\n    });\n  };\n\n  var VhallSaasSDK = /*#__PURE__*/function () {\n    function VhallSaasSDK() {\n      _classCallCheck(this, VhallSaasSDK);\n\n      this.msgBus = null;\n      this.request = requestApi;\n      this.baseState = store;\n    }\n\n    _createClass(VhallSaasSDK, [{\n      key: \"init\",\n      value: function init() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n          clientType: 'send',\n          receiveType: 'standard'\n        };\n        this.setRequestConfig(options);\n        this.setClientType(options.clientType);\n\n        if (options.clientType === 'send') {\n          return this.initSendLive(options);\n        } else {\n          return this.initReceiveLive(options);\n        }\n      }\n    }, {\n      key: \"initSendLive\",\n      value: function initSendLive(options) {\n        var _this = this;\n\n        return new Promise(function (resolve, reject) {\n          _this.request.live.initSendLive(options).then(function (res) {\n            if (res.code === 200) {\n              store.set('roomInitData', getRoomInfo(res));\n              resolve(res);\n            } else {\n              reject(res);\n            }\n          });\n        });\n      }\n    }, {\n      key: \"initReceiveLive\",\n      value: function initReceiveLive(options) {\n        var _this2 = this;\n\n        var receiveApi = {\n          standard: 'initStandardReceiveLive',\n          embed: 'initEmbeddedReceiveLive',\n          sdk: 'initSdkReceiveLive'\n        };\n        return new Promise(function (resolve, reject) {\n          _this2.request.live[receiveApi[options.receiveType]](options).then(function (res) {\n            if (res.code === 200) {\n              store.set('roomInitData', getRoomInfo(res));\n              resolve(res);\n            } else {\n              reject(res);\n            }\n          });\n        });\n      }\n    }, {\n      key: \"setClientType\",\n      value: function setClientType(clientType) {\n        if (clientType !== 'send' && clientType !== 'receive') {\n          throw new TypeError('clientType is invalid');\n        }\n\n        store.set('clientType', clientType);\n      }\n    }, {\n      key: \"setRequestConfig\",\n      value: function setRequestConfig(options) {\n        if (options.development) {\n          setBaseUrl('https://t-saas-dispatch.vhall.com');\n        } else {\n          setBaseUrl('https://saas-api.vhall.com');\n        }\n\n        setToken(options.token, options.liveToken);\n\n        if (options.requestHeaders) {\n          setRequestHeaders(options.requestHeaders);\n        }\n      }\n    }, {\n      key: \"isReady\",\n      value: function isReady() {\n        return loadSuccess === true;\n      }\n    }, {\n      key: \"createPlayer\",\n      value: function createPlayer() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var instance = new PlayerModule(options);\n          resolve(instance);\n        });\n      }\n    }, {\n      key: \"createInteractive\",\n      value: function createInteractive() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var instance = new InteractiveModule(options);\n          instance.init(options).then(function (res) {\n            resolve(instance);\n          });\n        });\n      }\n    }, {\n      key: \"createChat\",\n      value: function createChat() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var instance = new ChatModule();\n          instance.init(options).then(function (res) {\n            resolve(instance);\n          });\n        });\n      }\n    }, {\n      key: \"createDoc\",\n      value: function createDoc() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var instance = new DocModule(options);\n          resolve(instance);\n        });\n      }\n    }]);\n\n    return VhallSaasSDK;\n  }();\n\n  VhallSaasSDK.requestApi = requestApi;\n  initLoader();\n\n  window.VhallSaasSDK = VhallSaasSDK;\n\n}));\n//# sourceMappingURL=sdk.js.map\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isPlainObject = exports.clone = exports.recursive = exports.merge = exports.main = void 0;\r\nmodule.exports = exports = main;\r\nexports.default = main;\r\nfunction main() {\r\n    var items = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        items[_i] = arguments[_i];\r\n    }\r\n    return merge.apply(void 0, items);\r\n}\r\nexports.main = main;\r\nmain.clone = clone;\r\nmain.isPlainObject = isPlainObject;\r\nmain.recursive = recursive;\r\nfunction merge() {\r\n    var items = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        items[_i] = arguments[_i];\r\n    }\r\n    return _merge(items[0] === true, false, items);\r\n}\r\nexports.merge = merge;\r\nfunction recursive() {\r\n    var items = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        items[_i] = arguments[_i];\r\n    }\r\n    return _merge(items[0] === true, true, items);\r\n}\r\nexports.recursive = recursive;\r\nfunction clone(input) {\r\n    if (Array.isArray(input)) {\r\n        var output = [];\r\n        for (var index = 0; index < input.length; ++index)\r\n            output.push(clone(input[index]));\r\n        return output;\r\n    }\r\n    else if (isPlainObject(input)) {\r\n        var output = {};\r\n        for (var index in input)\r\n            output[index] = clone(input[index]);\r\n        return output;\r\n    }\r\n    else {\r\n        return input;\r\n    }\r\n}\r\nexports.clone = clone;\r\nfunction isPlainObject(input) {\r\n    return input && typeof input === 'object' && !Array.isArray(input);\r\n}\r\nexports.isPlainObject = isPlainObject;\r\nfunction _recursiveMerge(base, extend) {\r\n    if (!isPlainObject(base))\r\n        return extend;\r\n    for (var key in extend) {\r\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype')\r\n            continue;\r\n        base[key] = (isPlainObject(base[key]) && isPlainObject(extend[key])) ?\r\n            _recursiveMerge(base[key], extend[key]) :\r\n            extend[key];\r\n    }\r\n    return base;\r\n}\r\nfunction _merge(isClone, isRecursive, items) {\r\n    var result;\r\n    if (isClone || !isPlainObject(result = items.shift()))\r\n        result = {};\r\n    for (var index = 0; index < items.length; ++index) {\r\n        var item = items[index];\r\n        if (!isPlainObject(item))\r\n            continue;\r\n        for (var key in item) {\r\n            if (key === '__proto__' || key === 'constructor' || key === 'prototype')\r\n                continue;\r\n            var value = isClone ? clone(item[key]) : item[key];\r\n            result[key] = isRecursive ? _recursiveMerge(result[key], value) : value;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n","\n/**\n * ajax请求 jsonp处理\n * 1.jsonp 请求格式\n *   $fetch({\n *      url:'',\n *      type: 'GET',\n *      jsonp: 'callback',\n *      data: {\n *        name: 123\n *      }\n *   })\n */\nimport { isPc } from './index.js'\n\n\nlet BUSE_URL = ''\nlet TOKEN = ''\nlet LIVETOKEN = ''\nlet HEADERS = {}\n\n\nfunction setBaseUrl(url) {\n    BUSE_URL = url\n}\nfunction setToken(token, livetoken) {\n    console.log(token, livetoken, 888)\n    TOKEN = token\n    LIVETOKEN = livetoken\n}\nfunction setRequestHeaders(options) {\n    Object.assign(HEADERS,options)\n}\n\nfunction $fetch(options) {\n    // if (process.env.NODE_ENV != 'development') {\n    //\n    // }\n    options.url = BUSE_URL + options.url\n    console.log('接口环境', options.url)\n\n    return new Promise((resolve, reject) => {\n        options = options || {}\n        if (options.data) {\n            if (LIVETOKEN) {\n                options.data.live_token = LIVETOKEN\n            }\n            options.data = formatParams(options.data)\n        }\n        options.dataType ? jsonp(options, resolve, reject) : json(options, resolve, reject)\n    })\n}\n\n// JSON请求\nfunction json(params, success, fail) {\n    let xhr = null\n    // interactToken = sessionStorage.getItem('interact-token') || '',\n    // grayId = sessionStorage.getItem('grayId') || '',\n    // vhallJSSDKUserInfo = localStorage.getItem('vhallJSSDKUserInfo') ? JSON.parse(localStorage.getItem('vhallJSSDKUserInfo')) : {},\n    params.type = (params.type || 'GET').toUpperCase()\n\n    if (window.XMLHttpRequest) {\n        xhr = new XMLHttpRequest()\n    } else {\n        xhr = new ActiveXObject('Microsoft.XMLHTTP')\n    }\n\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState == 4) {\n            let status = xhr.status\n            if (status >= 200 && status < 300) {\n                let response = ''\n                let type = xhr.getResponseHeader('Content-type')\n\n                if (type.indexOf('xml') !== -1 && xhr.responseXML) {\n                    response = xhr.responseXML\n                } else if (type === 'application/json' || type === 'application/json;charset=UTF-8') {\n                    response = JSON.parse(xhr.responseText)\n\n                } else {\n                    response = xhr.responseText\n                }\n                success && success(response)\n            } else {\n                fail && fail(status)\n            }\n        }\n    }\n\n    if (params.type == 'GET') {\n        if (params.data) {\n            xhr.open(params.type, params.url + '?' + params.data, true)\n        } else {\n            xhr.open(params.type, params.url, true)\n        }\n    } else if (params.type == 'POST') {\n        xhr.open(params.type, params.url, true)\n    }\n\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\n    if (!LIVETOKEN) {\n        TOKEN && xhr.setRequestHeader('token', TOKEN)\n    }\n    console.log('HEADERS', HEADERS, TOKEN)\n    if (HEADERS) {\n        Object.getOwnPropertyNames(HEADERS).forEach(item => {\n            xhr.setRequestHeader(item, HEADERS[item])\n        })\n    }\n    // if (params.headers && params.headers.activeType == 'new') {\n    //     xhr.setRequestHeader('platform', 18)\n    //     xhr.setRequestHeader('request-id', uuid())\n    //     grayId && xhr.setRequestHeader('gray-id', grayId)\n    //     interactToken && xhr.setRequestHeader('interact-token', interactToken)\n    //     token && xhr.setRequestHeader('token', token)\n    // }\n    if (params.type == 'GET') {\n        xhr.send(null)\n    } else {\n        xhr.send(params.data)\n    }\n}\n\n// JSONP请求\nfunction jsonp(params, success, fail) {\n    let callbackName = params.dataType\n    params['callback'] = callbackName\n\n    let script = document.createElement('script')\n    script.type = \"text/javascript\"\n    script.charset = \"utf-8\"\n    document.body.appendChild(script)\n\n    // 创建回调函数\n    window[callbackName] = function (val) {\n        document.body.removeChild(script)\n        clearTimeout(script.timer)\n        window[callbackName] = null\n        success && success(val)\n    }\n    let stemp = random()\n    script.src = `${params.url}?${params.data}&_=${1594014089800}`\n\n    // 超时处理\n    if (params.time) {\n        script.timer = setTimeout(function () {\n            window[callbackName] = null;\n            head.removeChild(script);\n            fail && fail('请求超时')\n        }, parmas.time * 1000);\n    }\n}\n\n// 格式化数据\nfunction formatParams(data) {\n    var arr = []\n    if (data) {\n        for (let item in data) {\n            arr.push(encodeURIComponent(item) + '=' + encodeURIComponent(data[item]))\n        }\n    }\n    return arr.join('&')\n}\n\n// 随机数\nfunction random() {\n    return Math.floor(Math.random() * 10000 + 500);\n}\n\n\nexport default $fetch\nexport { setBaseUrl, setToken, setRequestHeaders }\n","import $http from '@/utils/http.js'\nimport contextServer from \"@/domain/common/context.server.js\"\n\n// 查询活动基础信息\nconst getWebinarInfo = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    const retParmams = {\n        webinar_id: params.webinarId || state.watchInitData.webinar.id,\n        is_no_check: 1 || params.is_no_check\n    }\n\n    return $http({\n        url: '/v3/webinars/webinar/info',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\n// 查询活动配置信息\nconst getConfigList = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    const retParmams = {\n        webinar_id: params.webinar_id || state.watchInitData.webinar.id,\n        webinar_user_id: params.webinar_user_id || state.watchInitData.webinar.userinfo.user_id,\n        scene_id: params.scene_id || 1\n    }\n\n    return $http({\n        url: '/v3/users/permission/get-config-list',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\n// 设置设备检测状态\nconst setDevice = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    const retParmams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n        status: params.status || 1,\n        type: params.type || 0\n    }\n\n    return $http({\n        url: '/v3/interacts/room/set-device',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\n// 开始暂停结束录制api\nconst recordApi = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n    const { state: roomInitGroupServerState } = contextServer.get('roomInitGroupServer')\n\n    const retParmams = {\n        webinar_id: params.webinarId || state.watchInitData.webinar.id,\n        status: params.status || 1\n    }\n\n    if (params.live_token || roomInitGroupServerState.live_token) {\n        retParmams.live_token = params.live_token || roomInitGroupServerState.live_token\n    }\n\n    return $http({\n        url: '/v3/webinars/record/ticker',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\nconst roomBase = {\n    getWebinarInfo,\n    getConfigList,\n    setDevice,\n    recordApi\n}\n\nexport default roomBase\n","import $http from '@/utils/http.js'\nimport { merge } from '../utils/index.js'\nimport contextServer from \"../domain/common/context.server\"\n\n// 账号登录&&验证码登录\nconst loginInfo = (params = {}) => {\n    // const { state } = contextServer.get('roomInitGroupServer') || {}\n\n    const retParmams = params\n    retParmams.biz_id = 2\n\n    return $http({\n        url: '/v3/users/user-consumer/login',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\n// 第三方授权\nconst callbackUserInfo = (params = {}) => {\n    // const { state } = contextServer.get('roomBaseServer')\n\n    const retParmams = params;\n\n    return $http({\n        url: '/v3/users/oauth/callback',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\n// 注册\nconst register = (params = {}) => {\n    // const { state } = contextServer.get('roomBaseServer')\n\n    const retParmams = { ...params }\n\n    return $http({\n        url: '/v3/users/user-consumer/register',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\n// 手机||邮箱验证码\nconst codeCheck = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    const retParmams = { ...params }\n\n    return $http({\n        url: '/v3/users/code-consumer/check',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\n// 密码重置\nconst resetPassword = (params = {}) => {\n    const { state } = contextServer.get('roomInitGroupServer')\n\n    const retParmams = Object.assign({},params,{\n        biz_id: state.biz_id || 2\n    })\n\n    return $http({\n        url: '/v3/users/user-consumer/reset-password',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\nconst userBase = {\n    loginInfo,\n    callbackUserInfo,\n    register,\n    codeCheck,\n    resetPassword,\n}\n\nexport default userBase","import $http from '@/utils/http.js'\nimport contextServer from \"@/domain/common/context.server.js\"\n\n// 获取插播文件列表\nconst getInsertFileList = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    const retParmams = {\n        webinar_id: params.webinarId || state.watchInitData.webinar.id,\n        is_no_check: params.is_no_check || 1,\n        pos: params.pos || 0,\n        limit: params.limit || 10,\n        get_no_trans: params.get_no_trans || 1,\n    }\n    if (params.name) {\n        retParmams.name = params.name\n    }\n\n    return $http({\n        url: '/v3/webinars/waiting-file/get-list',\n        type: 'POST',\n        data: retParmams\n    })\n}\n\n// 删除插播文件\nconst deleteInsertFile = (params = {}) => {\n    return $http({\n        url: '/v3/webinars/waiting-file/deletes',\n        type: 'POST',\n        data: params\n    })\n}\n\nconst insertFile = {\n    getInsertFileList,\n    deleteInsertFile\n}\n\nexport default insertFile\n","import $http from '@/utils/http.js'\nimport { merge } from '../utils/index.js'\nimport contextServer from \"../domain/common/context.server\"\n\n// 发起端-开始增加虚拟观众\nconst virtualClientStart = (params = {}) => {\n    // const { state } = contextServer.get('roomInitGroupServer') || {}\n\n    const retParmams = params\n\n    return $http({\n        url: '/v3/webinars/virtual/start',\n        type: 'GET',\n        data: retParmams\n    })\n}\n\n// 发起端-增加虚拟观众\nconst virtualAccumulation = (params = {}) => {\n    // const { state } = contextServer.get('roomInitGroupServer') || {}\n\n    const retParmams = params\n\n    return $http({\n        url: '/v3/webinars/virtual/accumulation',\n        type: 'GET',\n        data: retParmams\n    })\n}\n\n// 发起端-获取虚拟观众基数\nconst virtualClientGet = (params = {}) => {\n    // const { state } = contextServer.get('roomInitGroupServer') || {}\n\n    const retParmams = params\n\n    return $http({\n        url: '/v3/webinars/virtual/get-base',\n        type: 'GET',\n        data: retParmams\n    })\n}\n\nconst virtualClient = {\n    virtualClientStart,\n    virtualAccumulation,\n    virtualClientGet\n}\n\nexport default virtualClient","import $http from '@/utils/http.js'\nimport contextServer from \"@/domain/common/context.server.js\"\n\n\n// 设置主屏\nconst setMainScreen = (params={})=>{\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n    }\n    retParams = Object.assign(retParams,params)\n\n    return $http({\n        url:'/v3/interacts/room/set-main-screen',\n        type:'POST',\n        data:retParams\n    })\n}\n\n// 设置主讲人\nconst setSpeaker = (params={})=>{\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n    }\n    retParams = Object.assign(retParams,params)\n\n    return $http({\n        url:'/v3/interacts/room/set-doc-permission',\n        type:'POST',\n        data:retParams\n    })\n}\n\n// 设置音视频设备开关\nconst setRoomDevice = (params={})=>{\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n        device: params.device,\n        status: params.status,\n        receive_account_id: params.receive_account_id\n    }\n    retParams = Object.assign(retParams,params)\n\n    return $http({\n        url:'/v3/interacts/room/set-device-status',\n        type:'POST',\n        data:retParams\n    })\n}\n\nexport default {\n    setMainScreen,// 设置主屏\n    setSpeaker,// 设置主讲人\n    setRoomDevice,// 设置音视频设备开关\n}","import $http from '@/utils/http.js'\nimport contextServer from \"@/domain/common/context.server.js\"\n\n\n// 允许上下麦\nconst allowSpeak = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        roomId: params.roomId || state.watchInitData.interact.room_id,\n        receive_account_id: ''\n    }\n    retParams = Object.assign(retParams, params)\n\n\n    return $http({\n        url: '/v3/interacts/inav/agree-apply',\n        type: 'POST',\n        data: retParams\n    })\n}\n\n// 用户上麦\nconst speakOn = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n    }\n    retParams = Object.assign(retParams, params)\n\n\n    return $http({\n        url: '/v3/interacts/inav-user/speak',\n        type: 'POST',\n        data: retParams\n    })\n}\n\n// 用户自己下麦\nconst speakOff = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n    }\n    retParams = Object.assign(retParams, params)\n\n    return $http({\n        url: '/v3/interacts/inav-user/nospeak',\n        type: 'POST',\n        data: retParams\n    })\n}\n\n// 设置其他人下麦\nconst speakUserOff = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n    }\n\n    retParams = Object.assign(retParams, params)\n\n    return $http({\n        url: '/v3/interacts/inav/nospeak',\n        type: 'POST',\n        data: retParams\n    })\n}\n\n// 允许举手\nconst setHandsUp = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n        status: 0 // 1-允许 0-不允许\n    }\n\n    retParams = Object.assign(retParams, params)\n\n    return $http({\n        url: '/v3/interacts/inav/set-handsup',\n        type: 'POST',\n        data: retParams\n    })\n}\n\n// 邀请上麦\nconst inviteMic = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n    }\n    retParams = Object.assign(retParams,params)\n\n    return $http({\n        url: '/v3/interacts/inav/invite',\n        type: 'POST',\n        data: retParams\n    })\n}\n\n// 取消申请\nconst cancelApply = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n    }\n    retParams = Object.assign(retParams,params)\n\n    return $http({\n        url: '/v3/interacts/inav-user/cancel-apply',\n        type: 'POST',\n        data: retParams\n    })\n}\n\n// 拒绝邀请上麦\nconst refuseInvite = (params = {}) => {\n    const { state } = contextServer.get('roomBaseServer')\n\n    let retParams = {\n        room_id: params.room_id || state.watchInitData.interact.room_id,\n    }\n    retParams = Object.assign(retParams,params)\n\n    return $http({\n        url: '/v3/interacts/inav-user/reject-invite',\n        type: 'POST',\n        data: retParams\n    })\n}\n\nexport default {\n    allowSpeak,// 允许上麦\n    speakOn,// 用户上麦\n    speakOff,// 用户下麦\n    speakUserOff,// 设置其他人下麦\n    inviteMic,// 邀请上麦\n    setHandsUp,// 允许举手\n    cancelApply,// 取消申请\n    refuseInvite// 拒绝邀请上麦\n}\n","import $http from '@/utils/http.js'\n// import contextServer from \"@/domain/common/context.server.js\"\n\n\n// 获取文档列表(资料库所有文档)\nconst getAllDocList = (params = {}) => {\n    return $http({\n        url: '/v3/interacts/document/get-shared-document-list',\n        type: 'GET',\n        data: params\n    })\n}\n\n// 获取文档列表(当前活动下)\nconst getWebinarDocList = (params = {}) => {\n    return $http({\n        url: '/v3/interacts/document/get-webinar-document-list',\n        type: 'POST',\n        data: params\n    })\n}\n\n// 获取文档详情\nconst getDocDetail = (params = {}) => {\n    return $http({\n        url: '/v3/interacts/document/get-shared-document-list',\n        type: 'GET',\n        data: params\n    })\n}\n\n// 同步文档\nconst syncDoc= (params = {}) => {\n    return $http({\n        url: '/v3/interacts/document/clone-from-shared-document',\n        type: 'GET',\n        data: params\n    })\n}\n\n// 删除文档(多选)\nconst delDocList = (params = {}) => {\n    return $http({\n        url: '/v3/interacts/document/batch-remove-reference',\n        type: 'POST',\n        data: params\n    })\n}\n\n\nexport default {\n    getAllDocList,\n    getWebinarDocList,\n    getDocDetail,\n    syncDoc,\n    delDocList\n}\n","import '../libs/sdk.js'\nimport roomBase from './roomBase.js'\nimport user from './user.js'\nimport insertFile from './insertFile.js'\nimport virtualClient from './virtualClient.js'\nimport interactive from './interactive.js'\nimport mic from './mic.js'\nimport doc from './doc.js'\n\n\nclass RequestApi {\n    constructor() {\n        this.live = window.VhallSaasSDK.requestApi.live\n        this.roomBase = roomBase\n        this.user = user\n        this.insertFile = insertFile\n        this.virtualClient = virtualClient\n        this.interactive = interactive\n        this.mic = mic\n        this.doc = doc\n    }\n}\n\nconst requestApi = new RequestApi()\nexport default requestApi\n","import contextServer from \"@/domain/common/context.server.js\"\nimport requestApi from \"../../request\";\n\nexport default function useInteractiveServer() {\n    let state = {\n        vhallSaasInstance: null,  // vhallsdk的实例\n        interactiveInstance: null,  // 互动实例\n        streamId: null,\n        remoteStreams:[] // 远端流数组\n    }\n\n    const init = (option) => {\n        const roomInitGroupServer = contextServer.get('roomInitGroupServer');\n        state.vhallSaasInstance = roomInitGroupServer.state.vhallSaasInstance;\n        return state.vhallSaasInstance.createInteractive().then(interactives => {\n            console.log('5555555555555createInteractive');\n            state.interactiveInstance = interactives\n            // setTimeout(()=>{\n            //     console.log('555888888createInteractive');\n            //     state.interactiveInstance.listenEvents()\n            // },2000)\n            console.log('5555state.interactiveInstance',interactives,interactives.getRoomInfo())\n            return true\n        })\n    }\n\n    // 监听事件\n    const on = (type,callback) => {\n        console.log('ON INTERACTIVE REGSITER SUCCESS',type);\n\n        return state.interactiveInstance.$on(type, callback)\n    }\n\n    // 销毁实例\n    const destroyInit = () => {\n        return state.interactiveInstance.destroyInit()\n    }\n    // 基础api\n    // 常见本地流\n    const createLocalStream = (options = {}, addConfig = {}) => {\n        return state.interactiveInstance.createLocalStream(options)\n    }\n    // 创建摄像头视频流\n    const createLocalVideoStream = (options = {}, addConfig = {}) => {\n        return state.interactiveInstance.createLocalVideoStream(options, addConfig)\n    }\n    // 创建桌面共享流\n    const createLocaldesktopStream = (options = {}, addConfig = {}) => {\n        return state.interactiveInstance.createLocaldesktopStream(options, addConfig)\n    }\n    // 创建本地音频流\n    const createLocalAudioStream = (options = {}, addConfig = {}) => {\n        return state.interactiveInstance.createLocalAudioStream(options, addConfig)\n    }\n    // 创建图片推流\n    const createLocalPhotoStream = (options = {}, addConfig = {}) => {\n        return state.interactiveInstance.createLocalPhotoStream(options, addConfig)\n    }\n    // 销毁额本地流\n    const destroyStream = (streamId) => {\n        return state.interactiveInstance.destroyStream(streamId || state.streamId)\n    }\n    // 推送本地流到远端\n    const publishStream = (options = {}) => {\n        return state.interactiveInstance.publishStream({ streamId: options.streamId || state.streamId })\n    }\n    // 取消推送到远端的流\n    const unpublishStream = (streamId) => {\n        return state.interactiveInstance.unpublishStream( streamId || state.streamId)\n    }\n    // 订阅远端流\n    const subscribeStream = (options = {}) => {\n        return state.interactiveInstance.subscribeStream(options)\n    }\n    // 取消订阅远端流\n    const unSubscribeStream = (streamId) => {\n        return state.interactiveInstance.unSubscribeStream(streamId)\n    }\n    // 设置大小流\n    const setDual = (options = {}) => {\n        return state.interactiveInstance.setDual(options)\n    }\n    // 改变视频的禁用和启用\n    const muteVideo = (options = {}) => {\n        return state.interactiveInstance.muteVideo(options)\n    }\n    // 改变音频的禁用和启用\n    const muteAudio = (options = {}) => {\n        return state.interactiveInstance.muteAudio(options)\n    }\n    // 开启旁路\n    const startBroadCast = (options = {}, addConfig = {}) => {\n        return state.interactiveInstance.startBroadCast(options, addConfig)\n    }\n    // 停止旁路\n    const stopBroadCast = () => {\n        return state.interactiveInstance.stopBroadCast()\n    }\n    // 动态配置指定旁路布局模板\n    const setBroadCastLayout = (options = {}) => {\n        return state.interactiveInstance.setBroadCastLayout(options)\n    }\n    // 配置旁路布局自适应模式\n    const setBroadCastAdaptiveLayoutMode = (options = {}) => {\n        return state.interactiveInstance.setBroadCastAdaptiveLayoutMode(options)\n    }\n    // 动态配置旁路主屏\n    const setBroadCastScreen = (mainScreenStreamId = '') => {\n        return state.interactiveInstance.setBroadCastScreen(mainScreenStreamId)\n    }\n    // 获取全部音视频列表\n    const getDevices = () => {\n        return state.interactiveInstance.getDevices()\n    }\n    // 获取摄像头列表\n    const getCameras = () => {\n        return state.interactiveInstance.getCameras()\n    }\n    // 获取麦克风列表\n    const getMicrophones = () => {\n        return state.interactiveInstance.getMicrophones()\n    }\n    // 获取扬声器列表\n    const getSpeakers = () => {\n        return state.interactiveInstance.getSpeakers()\n    }\n    // 获取设备的分辨率\n    const getVideoConstraints = (deviceId = '') => {\n        return state.interactiveInstance.getSpeakers(deviceId)\n    }\n    // 配置本地流视频质量参数\n    const setVideoProfile = (options = {}) => {\n        return state.interactiveInstance.setVideoProfile(options)\n    }\n    // 是否支持桌面共享\n    const isScreenShareSupported = () => {\n        return state.interactiveInstance.isScreenShareSupported()\n    }\n    // 检查当前浏览器支持性\n    const checkSystemRequirements = async () => {\n        if(!state.interactiveInstance)return;\n        return state.interactiveInstance.checkSystemRequirements()\n    }\n    // 获取上下行丢包率\n    const getPacketLossRate = () => {\n        return state.interactiveInstance.getPacketLossRate()\n    }\n    // 获取流上下行丢包率\n    const getStreamPacketLoss = (options = {}) => {\n        return state.interactiveInstance.getStreamPacketLoss(options)\n    }\n    // 获取房间流信息\n    const getRoomStreams = () => {\n        return state.interactiveInstance.getRoomStreams()\n    }\n    // 获取房间总的流信息(本地流加远端流)\n    const getRoomInfo = () => {\n        return state.interactiveInstance.getRoomInfo()\n    }\n    // 获取流音频能量\n    const getAudioLevel = (streamId) => {\n        return state.interactiveInstance.getAudioLevel(streamId)\n    }\n    // 获取流的mute状态\n    const getStreamMute = (streamId) => {\n        return state.interactiveInstance.getStreamMute(streamId)\n    }\n\n    // 获取当前流的信息,返回一个数组\n    const currentStreams = () => {\n        return state.interactiveInstance.currentStreams\n    }\n    // 上麦\n    const speakOn=(data={})=>{\n        return requestApi.mic.speakOn(data)\n    }\n\n    // 下麦\n    const speakOff=(data={})=>{\n        return requestApi.mic.speakOff(data)\n    }\n\n    const speakUserOff=(data={})=>{\n        return requestApi.interactive.speakUserOff(data)\n    }\n\n    // 设置主屏\n    const setMainScreen=(data={})=>{\n        return requestApi.interactive.setMainScreen(data)\n    }\n\n\n    // 设置主讲人\n    const setSpeaker = (data={})=>{\n        return requestApi.interactive.setSpeaker(data)\n    }\n\n    // 设置（麦克风-1 摄像头-2）\n    const setRoomDevice=(data={})=>{\n        return requestApi.interactive.setRoomDevice(data)\n    }\n\n    // 允许举手\n    const setHandsup = (data={})=>{\n        return requestApi.mic.setHandsUp(data)\n    }\n\n    // 邀请上麦\n    const inviteMic = (data={})=>{\n        return requestApi.mic.inviteMic(data)\n    }\n    // 取消申请\n    const cancelApply = (data={})=>{\n        return requestApi.mic.cancelApply(data)\n    }\n    // 拒绝邀请\n    const refuseInvite = (data={})=>{\n        return requestApi.mic.refuseInvite(data)\n    }\n\n\n\n    // 组合api\n    const startPushStream = ()=> {\n        console.log('state:',state)\n        createLocalAndStream(state.interactiveInstance)\n    }\n\n    // 创建本地的推流和推流\n    const createLocalAndStream = (interactive) => {\n        let camerasList = null, micropsList = null, videoConstraintsList = null, streamId = null\n        return interactive.getDevices().then((data) => {\n            console.log('devices list::', data);\n            camerasList = data.videoInputDevices.filter(d => d.label && d.deviceId != 'desktopScreen')\n            micropsList = data.audioInputDevices.filter(\n                d => d.deviceId != 'default' && d.deviceId != 'communications' && d.label\n            )\n        }).then(() => {\n            const RESOLUTION_REG = /((^VIDEO_PROFILE_(720P|540P|480P|360P)_1$)|(^RTC_VIDEO_PROFILE_(720P|540P|480P|360P)_16x9_M$))/\n            interactive.getVideoConstraints(camerasList[0].deviceId).then((data) => {\n                console.log('constrainList', data);\n                videoConstraintsList = data.filter(item => RESOLUTION_REG.test(item.label))\n            }).then(() => {\n                let params = {\n                    videoNode: 'vhall-video',\n                    videoDevice: camerasList[0].deviceId,\n                    audioDevice: micropsList[0].deviceId,\n                    profile: videoConstraintsList[0]\n                }\n                interactive.createLocalVideoStream(params).then((res) => {\n                    console.log('create local stream success::', res);\n                    state.streamId = res\n                    streamId = res\n                    return res\n                }).catch((err) => {\n                    console.log('local stream failed::', err);\n                })\n            }).catch((err) => {\n                console.log('constrainlist is failed::', err);\n            })\n        }).catch((err) => {\n            console.log('getDevies is failed::', err);\n        })\n    }\n\n    const pulishStream = (streamId) => {\n        interactive.publishStream({ streamId }).then((res) => {\n            console.log('publish stream success::', streamId);\n        })\n        .catch((err) => {\n            console.log('publish is failed::', err);\n        })\n    }\n\n    // 订阅流列表\n    const remoteStreamList = ()=> {\n        state.remoteStreams = state.interactiveInstance.getRemoteStreams()\n        for (const remoteStream in state.interactiveInstance.getRemoteStreams()) {\n            state.remoteStreams.push(remoteStream)\n        }\n        return state.remoteStreams\n    }\n\n    // sdk的监听事件\n    const listenerSdk = () => {\n        state.interactiveInstance.on(VhallRTC.EVENT_REMOTESTREAM_ADD, (e) => {\n            // 0: 纯音频, 1: 只是视频, 2: 音视频  3: 屏幕共享, 4: 插播\n            console.log('55555remote stream add info::',e);\n            // state.remoteStreams.push(e)\n        })\n        state.interactiveInstance.on(VhallRTC.EVENT_REMOTESTREAM_REMOVED, (e) => {\n            // 0: 纯音频, 1: 只是视频, 2: 音视频  3: 屏幕共享, 4: 插播\n            console.log('55555remote stream remove info::',e);\n            // state.remoteStreams.filter(item => item.streamId == e.streamId)\n        })\n    }\n    return { state, startPushStream ,init, destroyInit, createLocalStream, createLocalVideoStream, createLocaldesktopStream, createLocalAudioStream,\n    createLocalPhotoStream, destroyStream, publishStream, unpublishStream, subscribeStream, unSubscribeStream, setDual, muteVideo,\n    muteAudio, startBroadCast, stopBroadCast, setBroadCastLayout, setBroadCastScreen, getDevices, getCameras, getMicrophones,\n    getSpeakers, getVideoConstraints, isScreenShareSupported, checkSystemRequirements, getPacketLossRate, getRoomStreams, remoteStreamList,\n    listenerSdk, setVideoProfile, getStreamPacketLoss, getAudioLevel, on, getRoomInfo, getStreamMute, setBroadCastAdaptiveLayoutMode,speakOn,speakOff,speakUserOff,setMainScreen,\n    setSpeaker,setRoomDevice,setHandsup,inviteMic,cancelApply,refuseInvite,currentStreams}\n}\n","\nimport requestApi from '@/request/index.js';\nimport contextServer from \"@/domain/common/context.server.js\"\nimport useEventEmitter from '@/domain/common/eventEmitter.server.js';\nimport { setRequestHeaders } from '@/utils/http.js';\n\nexport default function useRoomBaseServer() {\n    const state = {\n        inited: false,\n        isLiveOver: false,\n        webinarVo: {},\n        watchInitData: {},\n        watchInitErrorData: undefined,// 默认undefined，如果为其他值将触发特殊逻辑\n        configList: {}\n    }\n\n    const eventEmitter = useEventEmitter()\n\n    // 初始化房间信息,包含发起/观看(嵌入/标品)\n    const getWatchInitData = (options) => {\n        console.log(contextServer.get('useRoomInitGroupServer'))\n        const { state: roomInitGroupServer } = contextServer.get('roomInitGroupServer')\n\n        console.log('init options:', roomInitGroupServer)\n\n        return roomInitGroupServer.vhallSaasInstance.init(options).then(res => {\n            if (res.code === 200) {\n                state.inited = true;\n                state.watchInitData = res.data;\n                setRequestHeaders({\n                    'interact-token': res.data.interact.interact_token\n                })\n            } else {\n                state.watchInitErrorData = res;\n            }\n            return res\n        });\n    }\n\n    const on = (type, cb) => {\n        eventEmitter.$on(type, cb)\n    }\n\n    const destroy = () => {\n        eventEmitter.$destroy()\n    }\n\n    // 获取活动信息\n    const getWebinarInfo = (data) => {\n        return requestApi.roomBase.getWebinarInfo(data).then(res => {\n            state.webinarVo = res.data;\n            return res;\n        })\n    }\n\n    // 获取房间权限配置列表\n    const getConfigList = (data) => {\n        return requestApi.roomBase.getConfigList(data).then(res => {\n            state.configList = JSON.parse(res.data.permissions);\n            return res;\n        })\n    }\n\n    // 设置设备检测状态\n    const setDevice = (data) => {\n        return requestApi.roomBase.setDevice(data).then(res => {\n            return res;\n        })\n    }\n\n    // 开播startLive\n    const startLive = (data = {}) => {\n        setDevice(data)\n        return requestApi.live.startLive(data)\n    }\n\n    // 结束直播\n    const endLive = (data) => {\n        return requestApi.live.endLive(data)\n    }\n\n    // 开始/恢复录制\n    const startRecord = () => {\n        return requestApi.roomBase.recordApi({\n            status: 1\n        })\n    }\n\n    // 暂停录制\n    const pauseRecord = () => {\n        return requestApi.roomBase.recordApi({\n            status: 2\n        })\n    }\n\n    // 结束录制\n    const endRecord = () => {\n        return requestApi.roomBase.recordApi({\n            status: 3\n        })\n    }\n\n    const init = (option) => {\n        return getWatchInitData(option)\n    }\n\n\n\n    return { state, init, on, destroy, getWatchInitData, getWebinarInfo, getConfigList, startLive, endLive, setDevice, startRecord, pauseRecord, endRecord }\n\n}\n","export default function useEventEmitter() {\n    const state = {\n        eventMap: {}\n    }\n\n    const $on = (eventName, callback) => {\n        const { eventMap } = state;\n        if (eventMap[eventName] === undefined) eventMap[eventName] = []\n\n        eventMap[eventName].push(callback)\n    }\n\n    const $emit = (eventName, payload = null) => {\n        const { eventMap } = state;\n\n        if (!eventMap[eventName] || eventMap[eventName].length === 0) return;\n\n        eventMap[eventName].forEach(eventCallback => {\n            eventCallback(payload)\n        })\n    }\n\n    const $off = (eventName, callback = null) => {\n        const { eventMap } = state;\n\n        if (callback === null) {\n            eventMap[eventName] = [];\n            return;\n        }\n\n        const index = eventMap[eventName].findIndex(cb => cb === callback)\n        index && eventMap[eventName].splice(index, 1)\n    }\n\n    const $destroy = () => {\n        const { eventMap } = state;\n        eventMap = {};\n    }\n\n    return { $on, $emit, $off, $destroy }\n}","import requestApi from \"../../request\";\n\nexport default function useMicServer() {\n    const state = {}\n\n    // 上麦\n    const speakOn=(data={})=>{\n        return requestApi.mic.speakOn(data)\n    }\n\n    // 下麦\n    const speakOff=(data={})=>{\n        return requestApi.mic.speakOff(data)\n    }\n\n    const speakUserOff=(data={})=>{\n        return requestApi.interactive.speakUserOff(data)\n    }\n\n    // 允许举手\n    const setHandsUp = (data={})=>{\n        return requestApi.mic.setHandsUp(data)\n    }\n    // 允许上麦\n    const allowSpeak = (data={})=>{\n        return requestApi.mic.allowSpeak(data)\n    }\n    // 邀请上麦\n    const inviteMic = (data={})=>{\n        return requestApi.mic.inviteMic(data)\n    }\n    // 取消申请\n    const cancelApply = (data={})=>{\n        return requestApi.mic.cancelApply(data)\n    }\n    // 拒绝邀请\n    const refuseInvite = (data={})=>{\n        return requestApi.mic.refuseInvite(data)\n    }\n\n    return { state, speakOn, speakOff, speakUserOff,allowSpeak, setHandsUp, inviteMic, cancelApply, refuseInvite}\n}\n","import contextServer from '@/domain/common/context.server.js'\nimport requestApi from '../../request/index.js';\n\nconst docApi = requestApi.doc\n\nexport default function useDocServer() {\n    const state = {\n        docInstance: null\n    }\n\n    const on = (type, cb) => {\n        if (!state.docInstance) return;\n        state.docInstance.$on(type, cb)\n    }\n\n    const destroy = () => {\n        return state.docInstance.destroy()\n    }\n\n    const init = (options) => {\n        const { state: roomInitGroupServer } = contextServer.get('roomInitGroupServer')\n        console.log('create doc', roomInitGroupServer.vhallSaasInstance.createDoc)\n        return roomInitGroupServer.vhallSaasInstance.createDoc(options).then(instance => {\n            state.docInstance = instance;\n            return instance\n        }).catch(e => {\n            return e\n        })\n    }\n\n    const createBoard = (options)=>{\n        return state.docInstance.createBoard(options)\n    }\n\n    const createDocument = (options)=>{\n        return state.docInstance.createDocument(options)\n    }\n\n    const selectContainer=(option)=>{\n        console.log('select container:',option)\n        return state.docInstance.selectContainer(option)\n    }\n\n    const switchOnContainer=(val)=>{\n        return state.docInstance.switchOnContainer(val)\n    }\n\n    const switchOffContainer=(val)=>{\n        return state.docInstance.switchOffContainer(val)\n    }\n\n    const resetContainer=()=>{\n        return state.docInstance.resetContainer()\n    }\n\n    const getContainerInfo = async (options) =>{\n        return state.docInstance.getContainerInfo(options)\n    }\n\n    const destroyContainer = (val)=>{\n        return state.docInstance.destroyContainer(val)\n    }\n\n    const getVodAllCids = (val)=>{\n        return state.docInstance.getVodAllCids(val)\n    }\n\n    const setRemoteData = (item)=>{\n        return state.docInstance.setRemoteData(item)\n    }\n\n    const zoomIn=()=> {\n        return state.docInstance.zoomIn()\n    }\n\n    const zoomOut=()=> {\n        return state.docInstance.zoomOut()\n    }\n\n    const zoomReset=()=> {\n        return state.docInstance.zoomReset()\n    }\n\n    const cancelZoom=()=>{\n        return state.docInstance.cancelZoom()\n    }\n\n    const move=()=> {\n        return state.docInstance.move()\n    }\n\n    const prevStep=()=> {\n        return state.docInstance.prevStep()\n    }\n\n    const nextStep=()=> {\n        return state.docInstance.nextStep()\n    }\n\n    const setPlayMode=(mode)=>{\n        return state.docInstance.setPlayMode(mode)\n    }\n\n    const setSize=(width,height,options)=>{\n        return state.docInstance.setSize(width,height,options)\n    }\n\n    const createUUID=(type)=>{\n        return state.docInstance.createUUID(type)\n    }\n\n    const setControlStyle = (style)=>{\n        return state.docInstance.setControlStyle(style)\n    }\n\n    const gotoPage=(options)=>{\n        return state.docInstance.gotoPage(options)\n    }\n\n    const setPen=(val)=>{\n        return state.docInstance.setPen(val)\n    }\n\n    const setEraser=(val)=>{\n        return state.docInstance.setEraser(val)\n    }\n\n    const setStroke=(options)=>{\n        return state.docInstance.setStroke(options)\n    }\n\n    const setStrokeWidth=(options)=>{\n        return state.docInstance.setStrokeWidth(options)\n    }\n\n    const clear = ()=>{\n        return state.docInstance.clear()\n    }\n\n    const cancelDrawable=()=>{\n        return state.docInstance.cancelDrawable()\n    }\n\n    const setHighlighters=()=>{\n        return state.docInstance.setHighlighters()\n    }\n\n    const setText=(val)=>{\n        return state.docInstance.setText(val)\n    }\n\n    const loadDoc=(options)=>{\n        return state.docInstance.loadDoc(options)\n    }\n\n    const start=(val,type)=>{\n        return state.docInstance.start(val,type)\n    }\n\n    const republish = ()=>{\n        return state.docInstance.republish()\n    }\n\n    const setRole = (role)=>{\n        return state.docInstance.setRole(role)\n    }\n\n    const setAccountId=(role)=>{\n        return state.docInstance.setAccountId(role)\n    }\n\n    const setEditable=(editable)=>{\n        return state.docInstance.setEditable(editable)\n    }\n\n    const getThumbnailList=(options)=>{\n        return state.docInstance.getThumbnailList(options)\n    }\n    // 获取文档列表(资料库所有文档)\n    const getAllDocList = (params) =>{\n        return docApi.getAllDocList(params)\n    }\n\n    // 获取文档列表(当前活动下)\n    const getWebinarDocList = (params) => {\n        return docApi.getWebinarDocList(params)\n    }\n\n    // 获取文档详情\n    const getDocDetail = (params) => {\n        return docApi.getDocDetail(params)\n    }\n\n    // 同步文档\n    const syncDoc = (params) => {\n        return docApi.syncDoc(params)\n    }\n\n    // 删除文档(多选)\n    const delDocList = (params) => {\n        return docApi.delDocList(params)\n    }\n\n    return { state, init, on, destroy, getVodAllCids,\n        createBoard,createDocument,selectContainer,\n        getContainerInfo,destroyContainer,getVodAllCids,\n        setRemoteData,zoomIn,zoomOut,zoomReset,move,prevStep,\n        nextStep ,setPlayMode,setSize,createUUID,\n        setControlStyle,gotoPage,cancelZoom,switchOnContainer,switchOffContainer,resetContainer,\n        setPen,setEraser,setStroke,setStrokeWidth,clear,cancelDrawable,\n        setHighlighters,setText,loadDoc,start,republish,setRole,setAccountId,\n        setEditable,getThumbnailList,\n\n    }\n}\n","// import { emojiUrl } from './config.js'\nconst emojiUrl = 'https://cnstatic01.e.vhall.com/static/img/arclist'\nconst faceArr_v2 = [\n  {\n    '[微笑]': '1'\n  },\n  {\n    '[撇嘴]': '2'\n  },\n  {\n    '[色]': '3'\n  },\n  {\n    '[发呆]': '4'\n  },\n  {\n    '[得意]': '5'\n  },\n  {\n    '[流泪]': '6'\n  },\n  {\n    '[害羞]': '7'\n  },\n  {\n    '[闭嘴]': '8'\n  },\n  {\n    '[睡]': '9'\n  },\n  {\n    '[哭]': '10'\n  },\n  {\n    '[尴尬]': '11'\n  },\n  {\n    '[发怒]': '12'\n  },\n  {\n    '[调皮]': '13'\n  },\n  {\n    '[呲牙]': '14'\n  },\n  {\n    '[惊讶]': '15'\n  },\n  {\n    '[难过]': '16'\n  },\n  {\n    '[酷]': '17'\n  },\n  {\n    '[汗]': '18'\n  },\n  {\n    '[抓狂]': '19'\n  },\n  {\n    '[吐]': '20'\n  },\n  {\n    '[偷笑]': '21'\n  },\n  {\n    '[愉快]': '22'\n  },\n  {\n    '[白眼]': '23'\n  },\n  {\n    '[傲慢]': '24'\n  },\n  {\n    '[饥饿]': '25'\n  },\n  {\n    '[困]': '26'\n  },\n  {\n    '[惊恐]': '27'\n  },\n  {\n    '[流汗]': '28'\n  },\n  {\n    '[憨笑]': '29'\n  },\n  {\n    '[悠闲]': '30'\n  },\n  {\n    '[奋斗]': '31'\n  },\n  {\n    '[咒骂]': '32'\n  },\n  {\n    '[疑问]': '33'\n  },\n  {\n    '[嘘]': '34'\n  },\n  {\n    '[晕]': '35'\n  },\n  {\n    '[疯了]': '36'\n  },\n  {\n    '[衰]': '37'\n  },\n  {\n    '[骷髅]': '38'\n  },\n  {\n    '[敲打]': '39'\n  },\n  {\n    '[再见]': '40'\n  },\n  {\n    '[擦汗]': '41'\n  },\n  {\n    '[抠鼻]': '42'\n  },\n  {\n    '[鼓掌]': '43'\n  },\n  {\n    '[糗大了]': '44'\n  },\n  {\n    '[坏笑]': '45'\n  },\n  {\n    '[左哼哼]': '46'\n  },\n  {\n    '[右哼哼]': '47'\n  },\n  {\n    '[打哈欠]': '48'\n  },\n  {\n    '[鄙视]': '49'\n  },\n  {\n    '[委屈]': '50'\n  },\n  {\n    '[快哭了]': '51'\n  },\n  {\n    '[阴险]': '52'\n  },\n  {\n    '[亲亲]': '53'\n  },\n  {\n    '[吓]': '54'\n  },\n  {\n    '[可怜]': '55'\n  },\n  {\n    '[菜刀]': '56'\n  },\n  {\n    '[西瓜]': '57'\n  },\n  {\n    '[啤酒]': '58'\n  },\n  {\n    '[篮球]': '59'\n  },\n  {\n    '[乒乓]': '60'\n  },\n  {\n    '[咖啡]': '61'\n  },\n  {\n    '[饭]': '62'\n  },\n  {\n    '[猪头]': '63'\n  },\n  {\n    '[玫瑰]': '64'\n  },\n  {\n    '[凋谢]': '65'\n  },\n  {\n    '[嘴唇]': '66'\n  },\n  {\n    '[爱心]': '67'\n  },\n  {\n    '[心碎]': '68'\n  },\n  {\n    '[蛋糕]': '69'\n  },\n  {\n    '[闪电]': '70'\n  },\n  {\n    '[炸弹]': '71'\n  },\n  {\n    '[刀]': '72'\n  },\n  {\n    '[足球]': '73'\n  },\n  {\n    '[瓢虫]': '74'\n  },\n  {\n    '[便便]': '75'\n  },\n  {\n    '[月亮]': '76'\n  },\n  {\n    '[太阳]': '77'\n  },\n  {\n    '[礼物]': '78'\n  },\n  {\n    '[拥抱]': '79'\n  },\n  {\n    '[强]': '80'\n  },\n  {\n    '[弱]': '81'\n  },\n  {\n    '[握手]': '82'\n  },\n  {\n    '[胜利]': '83'\n  },\n  {\n    '[抱拳]': '84'\n  },\n  {\n    '[勾引]': '85'\n  },\n  {\n    '[拳头]': '86'\n  },\n  {\n    '[差劲]': '87'\n  },\n  {\n    '[爱你]': '88'\n  },\n  {\n    '[NO]': '89'\n  },\n  {\n    '[OK]': '90'\n  }\n]\n// TODO暂时先用直接加元素的方式处理，后面封装\nconst faceArr = {\n  '[微笑]': '1',\n  '[撇嘴]': '2',\n  '[色]': '3',\n  '[发呆]': '4',\n  '[得意]': '5',\n  '[流泪]': '6',\n  '[害羞]': '7',\n  '[闭嘴]': '8',\n  '[睡]': '9',\n  '[哭]': '10',\n  '[尴尬]': '11',\n  '[发怒]': '12',\n  '[调皮]': '13',\n  '[呲牙]': '14',\n  '[惊讶]': '15',\n  '[难过]': '16',\n  '[酷]': '17',\n  '[汗]': '18',\n  '[抓狂]': '19',\n  '[吐]': '20',\n  '[偷笑]': '21',\n  '[愉快]': '22',\n  '[白眼]': '23',\n  '[傲慢]': '24',\n  '[饥饿]': '25',\n  '[困]': '26',\n  '[惊恐]': '27',\n  '[流汗]': '28',\n  '[憨笑]': '29',\n  '[悠闲]': '30',\n  '[奋斗]': '31',\n  '[咒骂]': '32',\n  '[疑问]': '33',\n  '[嘘]': '34',\n  '[晕]': '35',\n  '[疯了]': '36',\n  '[衰]': '37',\n  '[骷髅]': '38',\n  '[敲打]': '39',\n  '[再见]': '40',\n  '[擦汗]': '41',\n  '[抠鼻]': '42',\n  '[鼓掌]': '43',\n  '[糗大了]': '44',\n  '[坏笑]': '45',\n  '[左哼哼]': '46',\n  '[右哼哼]': '47',\n  '[哈欠]': '48',\n  '[鄙视]': '49',\n  '[委屈]': '50',\n  '[快哭了]': '51',\n  '[阴险]': '52',\n  '[亲亲]': '53',\n  '[吓]': '54',\n  '[可怜]': '55',\n  '[菜刀]': '56',\n  '[西瓜]': '57',\n  '[啤酒]': '58',\n  '[篮球]': '59',\n  '[乒乓]': '60',\n  '[咖啡]': '61',\n  '[饭]': '62',\n  '[猪头]': '63',\n  '[玫瑰]': '64',\n  '[凋谢]': '65',\n  '[嘴唇]': '66',\n  '[爱心]': '67',\n  '[心碎]': '68',\n  '[蛋糕]': '69',\n  '[闪电]': '70',\n  '[炸弹]': '71',\n  '[刀]': '72',\n  '[足球]': '73',\n  '[瓢虫]': '74',\n  '[便便]': '75',\n  '[月亮]': '76',\n  '[太阳]': '77',\n  '[礼物]': '78',\n  '[拥抱]': '79',\n  '[强]': '80',\n  '[弱]': '81',\n  '[握手]': '82',\n  '[胜利]': '83',\n  '[抱拳]': '84',\n  '[勾引]': '85',\n  '[拳头]': '86',\n  '[差劲]': '87',\n  '[爱你]': '88',\n  '[NO]': '89',\n  '[OK]': '90'\n}\nconst textToEmoji = s => {\n  s = s.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\n/g, '<br/>')\n\n  // eslint-disable-next-line no-useless-escape\n  const reg = /\\[[^\\[\\]]+?\\]/g\n  const ret = []\n  const textArr = s.split(reg) // 字符串分割，返回一个数组\n  const emojiArr = s.match(reg) // 返回一个数组，成员是所有匹配的子字符串\n\n  // 文字与表情 轮流添加到a\n  // textArr 的长度 永远比 emojiArr 大 1\n  // 当然 emojiArr 可能为 null，此时 textArr 长度为 1，成员即为原始字符串\n  textArr.forEach((cont, i) => {\n    // 当文字内容不为空 添加到a\n    cont &&\n      ret.push({\n        msgType: 'text',\n        msgCont: cont\n      })\n\n    // 最后一次循环，肯定没有表情与之对应，所以忽略\n    // 如果不是最后一次，添加表情到a\n    // 当然此处还需判断是否有此表情的图片定义\n    if (i !== textArr.length - 1) {\n      if (faceArr[emojiArr[i]]) {\n        ret.push({\n          msgType: 'emoji',\n          msgCont: emojiArr[i],\n          msgImage: emojiToPath(emojiArr[i])\n        })\n      } else {\n        ret.push({\n          msgType: 'text',\n          msgCont: emojiArr[i]\n        })\n      }\n    }\n    // i !== textArr.length - 1 &&\n    //   ret.push(\n    //     faceArr[emojiArr[i]]\n    //       ? {\n    //           msgType: 'emoji',\n    //           msgCont: emojiArr[i],\n    //           msgImage: emojiToPath(emojiArr[i])\n    //         }\n    //       : {\n    //           msgType: 'text',\n    //           msgCont: emojiArr[i]\n    //         }\n    //   )\n  })\n  return ret\n}\nfunction getEmojiList() {\n  const result = []\n  for (const key in faceArr) {\n    result.push({\n      name: key,\n      value: faceArr[key],\n      src: emojiToPath(key)\n    })\n  }\n\n  return result\n}\n// 将拆分开的消息数组转换成字符串\nfunction combinationStr(arr) {\n  let result = ''\n\n  arr.forEach(item => {\n    const str =\n      item.msgType === 'text'\n        ? item.msgCont\n        : `<img width=\"24\" height=\"24\" style=\"vertical-align:text-bottom;\" src=\"${item.msgImage}\"/>`\n    result += str\n  })\n\n  return result\n}\nfunction textToEmojiText(str) {\n  const arr = textToEmoji(str)\n  const result = combinationStr(arr)\n  return result\n}\nconst emojiToPath = key =>\n  key.includes('[删除]')\n    ? `${emojiUrl}/${faceArr[key]}@2x.png`\n    : `${emojiUrl}/Expression_${faceArr[key]}@2x.png`\nexport {\n  getEmojiList,\n  textToEmojiText,\n  emojiToPath,\n  textToEmoji,\n  faceArr,\n  faceArr_v2\n}\n","let count = 0\nexport default class Msg {\n  constructor({\n    avatar = '',\n    sendId = '',\n    nickName = '',\n    type = 'text',\n    showTime = '',\n    roleName = '',\n    content = {},\n    sendTime = '',\n    client = '',\n    self = false,\n    replyMsg = {},\n    atList = [],\n    context = {}, // 回复或者@消息集合\n    source = 'mobile' // 暂时没用到\n  }) {\n    // 用户id\n    this.type = type\n    this.avatar = avatar\n    this.sendId = sendId\n    this.nickName = nickName\n    this.roleName = roleName\n    this.content = content\n    this.showTime = showTime\n    this.sendTime = sendTime\n    this.client = client\n    this.count = count++\n    this.self = self\n    this.replyMsg = replyMsg\n    this.atList = atList\n    this.context = context\n    this.source = source\n  }\n}\n","/**\n * 聊天服务\n * */\nimport {textToEmojiText} from './emoji';\nimport Msg from './msg-class';\nimport contextServer from '@/domain/common/context.server.js';\nimport $http from '@/utils/http.js';\n\nexport default function useChatServer() {\n\n    const state = {\n        //聊天记录\n        chatList: [],\n        //过滤的敏感词列表\n        keywordList: [],\n        //预览图片地址\n        imgUrls: [],\n\n        page: 0,\n        limit: 10,\n\n        roomId: '',\n        avatar: '',\n        roleName: ''\n    };\n\n    //消息服务\n    const msgServer = contextServer.get('msgServer');\n\n    //消息sdk\n    const {msgInstance} = msgServer.state;\n\n    //基础服务\n    const roomServer = contextServer.get('roomBaseServer');\n\n    const {roomId = '', roleName, avatar = ''} = roomServer.state.watchInitData;\n\n    //接收聊天消息\n    const getHistoryMsg = async (params = {}, from = '观看端') => {\n\n        //请求获取聊天消息\n        let backData = await fetchHistoryData(params);\n\n        let list = (backData.data.list || [])\n            .map(item => {\n\n                //处理普通内容\n                item.data.text_content && (item.data.text_content = textToEmojiText(item.data.text_content));\n\n                //处理图片预览\n                item.data.image_urls && _handleImgUrl(item.data.image_urls);\n\n                //处理私聊列表\n                if (item.context && Array.isArray(item.context.at_list) && item.context.at_list.length && item.data.text_content) {\n                    item.context.at_list = _handlePrivateChatList(item, item.context.at_list);\n                    //发起端的特殊处理，可以考虑统一\n                    item.context.atList = item.context.at_list;\n                }\n\n                //格式化消息\n                return _handleGenerateMsg(item, from);\n            })\n            .reduce((acc, curr) => {\n                const showTime = curr.showTime;\n                acc.some(s => s.showTime === showTime) ? acc.push({...curr, showTime: ''}) : acc.push(curr);\n                return acc;\n            }, [])\n            .reverse()\n            .filter(item => !['customPraise'].includes(item.type));\n\n        if (['观看端'].includes(from)) {\n            list.forEach((msg, index) => {\n                if (index !== 0) {\n                    const preMsgTime = list[index - 1].sendTime\n                    if (preMsgTime.slice(0, 13) === msg.sendTime.slice(0, 13)) {\n                        msg.showTime = ''\n                    }\n                }\n            })\n        }\n\n        state.chatList.unshift(...list);\n\n        //返回原始数据等以方便使用\n        return {\n            backData,\n            list,\n            chatList: state.chatList,\n            imgUrls: state.imgUrls || []\n        };\n    }\n\n    //发送聊天消息\n    const sendMsg = (params = {}) => {\n\n        let {inputValue, needFilter = true, data = {}, context = {}} = params;\n        // let filterStatus = checkHasKeyword(needFilter, inputValue);\n        // return new Promise((resolve, reject) => {\n        //     if (roleName != 2 || (roleName == 2 && filterStatus)) {\n        //         msgServer.$emit(data, context);\n        //         resolve();\n        //     } else {\n        //         reject();\n        //     }\n        // });\n\n        return  new Promise((resolve,reject)=>{\n            msgInstance.emitTextChat(data,context);\n            resolve();\n        });\n\n    }\n\n    //发起请求，或者聊天记录数据\n    const fetchHistoryData = (params) => {\n\n        let defaultParams = {\n            room_id: roomId,\n            pos: state.page * state.limit,\n            limit: state.limit\n        };\n\n        let mixedParams = Object.assign({}, defaultParams, params);\n\n        return $http({\n            url: '/v3/interacts/chat/get-list',\n            type: 'POST',\n            data: mixedParams\n        });\n\n    }\n\n    //获取keywordList\n    const setKeywordList = (list = []) => {\n        state.keywordList = list;\n    }\n\n    //检测是否包含敏感词\n    const checkHasKeyword = (needFilter=true,inputValue)=>{\n        let filterStatus = true;\n\n        if (needFilter && state.keywordList.length) {\n            //只要找到一个敏感词，消息就不让发\n            filterStatus = !state.keywordList.some(item => inputValue.includes(item.name));\n        }\n\n        return filterStatus;\n    }\n\n    //私有方法，处理图片链接\n    const _handleImgUrl = (rawData) => {\n        state.imgUrls.push(...rawData);\n    }\n\n    //私有方法，处理私聊列表\n    const _handlePrivateChatList = (item, list = [], from = '观看端') => {\n\n        if (['观看端'].includes(from)) {\n            return list.map(a => {\n                item.data.text_content = item.data.text_content.replace(`***${a.nick_name}`, `@${a.nick_name}`);\n                return a;\n            })\n        }\n\n        if (['h5'].includes(from)) {\n            return list.map(a => {\n                // 向前兼容fix 14968  历史消息有得是@\n                if (item.data.text_content.indexOf('***') >= 0) {\n                    item.data.text_content = item.data.text_content.replace(\n                        `***${a.nick_name}`,\n                        `<span style='color:#4da1ff;float:left'>@${a.nick_name} &nbsp;</span> `\n                    )\n                } else {\n                    item.data.text_content = item.data.text_content.replace(\n                        `@${a.nick_name}`,\n                        `<span style='color:#4da1ff;float:left'>@${a.nick_name} &nbsp;</span> `\n                    )\n                }\n                return a;\n            });\n        }\n    }\n\n    //私有方法，组装消息（暂时按照的h5版本的,大致数据一致，具体业务逻辑操作有差异，后续返回一个promise，并返回未处理的原始数据，由视图自己决定如何处理）\n    const _handleGenerateMsg = (item = {}, from = '') => {\n        let params = {};\n\n        if (['观看端','发起端'].includes(from)) {\n            params = {\n                type: item.data.type,\n                avatar: item.avatar ? item.avatar : '',\n                sendId: item.sender_id,\n                showTime: item.showTime,\n                nickName: item.nickname,\n                roleName: item.role_name,\n                sendTime: item.date_time,\n                content: item.data,\n                replyMsg: item.context.reply_msg,\n                atList: item.context.atList,\n                msgId: item.msg_id,\n                channel: item.channel_id,\n                isHistoryMsg: true\n            }\n\n            if(['发起端'].includes(from) && params.avatar === ''){\n                params.avatar = 'https://cnstatic01.e.vhall.com/3rdlibs/vhall-static/img/default_avatar.png';\n            }\n        }\n\n        if (['h5'].includes(from)) {\n            params = {\n                type: item.data.type,\n                avatar: item.avatar ? item.avatar : defaultAvatar,\n                sendId: item.sender_id,\n                showTime: item.show_time,\n                nickName: item.nickname,\n                roleName: item.role_name,\n                sendTime: item.date_time,\n                content: item.data,\n                context: item.context,\n                replyMsg: item.context.reply_msg,\n                atList: item.context.at_list\n            };\n        }\n\n        let resultMsg = new Msg(params);\n        if (item.data.event_type) {\n            resultMsg = {\n                ...resultMsg,\n                type: item.data.event_type,\n                event_type: item.data.event_type,\n                content: {\n                    source_status: item.data.source_status,\n                    gift_name: item.data.gift_name,\n                    gift_url: item.data.gift_url\n                }\n            }\n            if (['观看端'].includes(from)) {\n                resultMsg.nickName = item.nickname.length > 8 ? item.nickname.substr(0, 8) + '...' : item.nickname;\n                resultMsg.interactToolsStatus = true;\n            }\n        }\n        return resultMsg;\n    }\n\n    return {state, getHistoryMsg, sendMsg, fetchHistoryData, setKeywordList,checkHasKeyword};\n}\n","import contextServer from \"../common/context.server\";\nexport default function useDesktopShareServer(){\n\n    const state = { localDesktopStreamId: '' }\n\n    const interactiveServer = contextServer.get('interactiveServer');\n\n    //检测浏览器是否支持桌面共享\n    const  browserDetection = ()=>{\n        const ua = navigator.userAgent;\n        const chromeTest = ua.match(/chrome\\/([\\d\\.]+)/i);\n        const chromeVersion = chromeTest ? chromeTest[1] : 0;\n        const safariTest = ua.match(/Version\\/([\\d.]+).*Safari/);\n        const safariVersion = safariTest ? safariTest[1].replace(/\\./g, '') : 0;\n\n        //浏览器是否支持桌面共享\n        const isNotSupport = !chromeVersion && (!safariVersion || Number(safariVersion) < 1304);\n\n        //浏览器是否版本过低，需要安装插件支持\n        const needInstallPlugin = Number(chromeVersion) < 74;\n\n        return {isNotSupport,needInstallPlugin,chromeTest,chromeVersion,safariTest,safariVersion};\n    }\n\n    //分享屏幕检测\n    const shareScreenCheck = ()=>{\n        return new Promise((resolve, reject) => {\n            interactiveServer.checkSystemRequirements().then(checkResult => {\n                console.log('result',checkResult, checkResult.result, 'detail', checkResult.detail);\n                if (checkResult.result || checkResult.detail.isScreenShareSupported) {\n                    resolve(true);\n                } else {\n                    reject(false);\n                }\n            });\n        });\n    }\n\n    // 开始桌面共享\n    const startShareScreen = (options) => {\n\n        const { state: roomBaseServerState } = contextServer.get('roomBaseServer')\n\n        const retOptions = {\n            videoNode: options.videoNode,\n            profile: options.profile,\n            audio: false, // 桌面共享不采集麦克风防止回声\n            speaker: true, // 桌面共享开启采集扬声器声音的入口\n        }\n\n        const addConfig = {\n            videoDevice: 'desktopScreen',\n            attributes: JSON.stringify({\n                nickName: roomBaseServerState.watchInitData.join_info.nickname,\n                role: roomBaseServerState.watchInitData.join_info.role_name\n            })\n        }\n\n        return interactiveServer.createLocaldesktopStream(retOptions, addConfig)\n    }\n\n    // 推桌面共享流\n    const publishDesktopShareStream = (streamId) => {\n        return new Promise((resolve, reject) => {\n            interactiveServer.publishStream({streamId}).then(res => {\n                state.localDesktopStreamId = streamId\n                resolve(res)\n            }).catch(reject)\n        })\n    }\n\n    /**\n     * 停止桌面共享\n     * */\n    const stopShareScreen = (streamId)=>{\n        return interactiveServer.unpublishStream(streamId || state.localDesktopStreamId);\n    }\n\n    return {state,browserDetection,shareScreenCheck,startShareScreen,publishDesktopShareStream,stopShareScreen};\n}\n","import requestApi from '../../request/index.js';\nimport { uploadFile, isChrome88 } from '@/utils/index.js'\nimport contextServer from \"@/domain/common/context.server.js\"\n\nfunction useInsertFileServer() {\n    let state = {\n        localInsertStream: null,\n        isChrome88: isChrome88()\n    }\n\n    const interactiveServer = contextServer.get('interactiveServer')\n\n    // 注册插播流加入事件\n    const onInsertFileStreamAdd = (cb) => {\n        interactiveServer.on('interactive_REMOTESTREAM_ADD', (e) => {\n            e.data.attributes = JSON.parse(e.data.attributes)\n            if (e.data.attributes.stream_type == 4 || e.data.streamType == 4) {\n                cb(e)\n            }\n        })\n    }\n\n    // 注册插播流删除事件\n    const onInsertFileStreamDelete = (cb) => {\n        interactiveServer.on('interactive_REMOTESTREAM_REMOVED', (e) => {\n            cb(e)\n        })\n    }\n\n    // 插播流订阅失败\n    const onInsertFileStreamFaild = (cb) => {\n        interactiveServer.on('interactive_REMOTESTREAM_FAILED', (e) => {\n            cb(e)\n        })\n    }\n\n    // 获取插播列表\n    const getInsertFileList = (params = {}) => {\n        return requestApi.insertFile.getInsertFileList(params)\n    }\n\n    // 删除插播文件\n    const deleteInsertFile = (params = {}) => {\n        return requestApi.insertFile.deleteInsertFile(params)\n    }\n\n    // 检查captureStream是否能用\n    const isCanUseCaptureStream = () => {\n        const v = document.createElement('video');\n        if (typeof v.captureStream !== 'function') {\n            return false\n        }\n        return  true\n    }\n\n    // 选择音视频文件\n    const selectLocalFile = (onChange = (e) => {}) => {\n        const { state: roomBaseState } = contextServer.get('roomBaseServer')\n\n        let accept = 'video/mp4,video/webm,audio/ogg'\n        if (roomBaseState.watchInitData.webinar.mode == 1) { // 直播模式：1-音频、2-视频、3-互动\n            accept = 'audio/ogg'\n        }\n\n        const retParams = {\n            accept\n        }\n\n        uploadFile(retParams, onChange)\n    }\n\n    // 创建video标签播放本地音视频文件\n    const createLocalVideoElement = (file, options = {}) => {\n        return new Promise((resolve, reject) => {\n            state._isAudio = file.type.includes('ogg')\n            const videoElement =  document.createElement('video')\n            state._videoElement = videoElement\n            videoElement.setAttribute(\"width\", \"100%\")\n            videoElement.setAttribute(\"height\", \"100%\")\n            const windowURL = window.URL || window.webkitURL\n            const fileUrl = windowURL.createObjectURL(file)\n            videoElement.src = fileUrl\n            videoElement.onload = () => {\n                windowURL.revokeObjectURL(fileUrl)\n            }\n            const videoContainerElement = document.getElementById(options.el)\n            videoContainerElement.innerHTML = ''\n            videoContainerElement.appendChild(videoElement)\n            videoElement.addEventListener('canplay', (e) => {\n                setTimeout(()=>{\n                    console.log(videoElement.videoHeight,videoElement.videoWidth, '分辨率', (videoElement.videoHeight > 720 || videoElement.videoWidth > 1280))\n                    if (videoElement.videoHeight > 720 || videoElement.videoWidth > 1281){\n                        reject({ msg: '视频分辨率过高，请打开分辨率为1280*720以下的视频' })\n                    } else {\n                        resolve(videoElement)\n                    }\n                },100)\n            })\n        })\n    }\n\n    // 使用canvas抓流\n    const captureStreamByCanvas = () => {\n        const videoElement = state._videoElement\n        const chrome88Canvas = document.createElement('canvas')\n        const chrome88canvasContext = chrome88Canvas.getContext('2d')\n\n        // 将video播放器的画面绘制至canvas上\n        clearInterval(state._canvasInterval)\n        function drawVideoCanvas() {\n            chrome88canvasContext.drawImage(videoElement, 0, 0, chrome88Canvas.width, chrome88Canvas.height)\n        }\n        chrome88Canvas.width = videoElement.videoWidth;\n        chrome88Canvas.height = videoElement.videoHeight;\n        drawVideoCanvas();\n        state._canvasInterval = setInterval(drawVideoCanvas, 40)\n\n        // 从canvas中抓取MediaStream\n        const canvasStream = chrome88Canvas.captureStream()\n        // 从video播放器中抓取MediaStream\n        const vodCpatureStream = videoElement.captureStream()\n        // audio track 从[video播放器抓取MediaStream对象]中获取\n        const audioTrack = vodCpatureStream.getAudioTracks()[0]\n        // video track 从[canvas抓取MediaStream对象]中获取\n        const videoTrack = canvasStream.getVideoTracks()[0]\n        return { audioTrack, videoTrack }\n    }\n\n    // 使用videoElement抓流\n    const captureStreamByVideo = () => {\n        let videoStream\n        const videoElement = state._videoElement\n        if (videoElement.captureStream) {\n            videoStream = videoElement.captureStream();\n            if (!videoStream) {\n                return false\n            }\n            if(videoStream.getTracks().length < 1){\n                return false\n            }\n            return videoStream;\n        }\n    }\n\n    // 抓取本地音视频轨道\n    const captureLocalStream = () => {\n        if (state.isChrome88 && !state._isAudio) {\n            return captureStreamByCanvas()\n        } else {\n            return captureStreamByVideo()\n        }\n    }\n\n    // 创建本地插播流\n    const createLocalInsertStream = (options = {}) => {\n        const retSteram = captureLocalStream()\n        const { state: roomBaseServerState } = contextServer.get('roomBaseServer')\n\n        let retOptions = {\n            videoNode: options.videoNode, // 传入本地互动流的显示容器，必填\n            audio: false,\n            video: false,\n            profile: VhallRTC.RTC_VIDEO_PROFILE_1080P_16x9_H, // 默认1080p，后续sdk会做优化，自动识别视频清晰度\n            attributes: JSON.stringify({\n                role: roomBaseServerState.watchInitData.join_info.role_name,\n                nickname: roomBaseServerState.watchInitData.join_info.nickname,\n                stream_type: 4,\n                has_video: state._isAudio ? 0 : 1\n            }),\n            streamType: 4\n\n        }\n\n        if (state.isChrome88 && !state._isAudio) {\n            retOptions = {\n                ...retOptions,\n                audioTrack: retSteram.audioTrack, // 音频轨道\n                videoTrack: retSteram.videoTrack, // 视频轨道\n            }\n        } else {\n            retOptions = {\n                ...retOptions,\n                mixOption: { // 选填，指定此本地流的音频和视频是否加入旁路混流。支持版本：2.3.2及以上。\n                    mixVideo: state._isAudio ? false : true, // 视频是否加入旁路混流\n                    mixAudio: true,  // 音频是否加入旁路混流\n                },\n                hasInsertedStream: true, // 使用外部插入的MediaStream流对象\n                insertedStream: retSteram,  // 在上一步已抓取的MediaStream流对象\n            }\n        }\n\n        const interactiveServer = contextServer.get('interactiveServer')\n        console.log('interactiveServer', interactiveServer)\n        return interactiveServer.createLocalStream(retOptions)\n    }\n\n    // 推插播流\n    const publishInsertStream = (stream) => {\n        const interactiveServer = contextServer.get('interactiveServer')\n        return new Promise((resolve, reject) => {\n            interactiveServer.publishStream({ streamId: stream.streamId })\n                .then(res => {\n                    state._LoclaStreamId = res.streamId\n                    resolve(res)\n                })\n                .catch(reject)\n        })\n    }\n\n    // 停止推流\n    const stopPublishInsertStream = (streamId) => {\n        return new Promise((resolve, reject)=>{\n            const interactiveServer = contextServer.get('interactiveServer')\n            console.log('stopPublishInsertStream', streamId)\n            interactiveServer.unpublishStream(streamId || this._LoclaStreamId)\n                .then(res => {\n                    state._LoclaStreamId = null\n                    resolve(res)\n                })\n                .catch(reject)\n        })\n    }\n\n    // 订阅插播流\n    const subscribeInsertStream = (options = {}) => {\n        const interactiveServer = contextServer.get('interactiveServer')\n        return interactiveServer.subscribeStream(options)\n    }\n\n    // 取消订阅流\n    const unsubscribeInsertStream = (options = {}) => {\n        const interactiveServer = contextServer.get('interactiveServer')\n        return interactiveServer.unSubscribeStream(options)\n    }\n\n    return {\n        state,\n        getInsertFileList,\n        deleteInsertFile,\n        isCanUseCaptureStream,\n        selectLocalFile,\n        createLocalVideoElement,\n        createLocalInsertStream,\n        publishInsertStream,\n        stopPublishInsertStream,\n        subscribeInsertStream,\n        unsubscribeInsertStream,\n        onInsertFileStreamAdd,\n        onInsertFileStreamDelete,\n        onInsertFileStreamFaild\n    }\n}\n\n\nexport default useInsertFileServer\n","import merge from \"merge\";\n\n// 判断终端类型\nfunction isPc() {\n    let userAgentInfo = navigator.userAgent;\n    let Agents = [\n        \"Android\",\n        \"iPhone\",\n        \"SymbianOS\",\n        \"Windows Phone\",\n        \"iPad\",\n        \"iPod\",\n    ];\n    let flag = true;\n    for (let v = 0; v < Agents.length; v++) {\n        if (userAgentInfo.indexOf(Agents[v]) > 0) {\n        flag = false;\n        break;\n        }\n    }\n    return flag;\n}\n\n// 上传文件\nfunction uploadFile(options, onChange) {\n    var inputObj=document.createElement('input')\n    inputObj.setAttribute('id','file');\n    inputObj.setAttribute('type','file');\n    inputObj.setAttribute('name','file');\n    inputObj.setAttribute(\"style\",'height:0px; position: absolute;');\n    inputObj.setAttribute(\"accept\",options.accept);\n    document.body.appendChild(inputObj);\n    inputObj.value;\n    inputObj.click();\n    inputObj.addEventListener('change', function (e) {\n        onChange && onChange(e)\n        document.body.removeChild(this)\n    })\n}\n\n// 判断浏览器是否是 chrome88 以上版本\nfunction isChrome88() {\n    let chromeReg = /Chrome\\/(\\d{2})[.\\d]+\\sSafari\\/[.\\d]+$/gi;\n    let chromeResult = chromeReg.exec(navigator.userAgent);\n    return chromeResult && chromeResult.length > 0 && chromeResult[1] > 87\n}\n\nexport { merge, isPc, uploadFile, isChrome88 };\n","import contextServer from \"@/domain/common/context.server.js\";\n\n// 业务功能: 1.获取设备列表(继承interactiveServer-getDevices) / 2.本地预览 / 3.停止预览  /  4.获取清晰度(继承interactiveServer-getVideoConstraints)\n\nexport default function useMediaCheckServer() {\n    let interactiveServer = null\n\n    const state = {\n        videoNode: \"vh-device-check-video\", // 视频容器\n        selectedVideoDeviceId: \"\", // 当前选取的设备id\n        localStreamId: \"\" // 本地流id\n    }\n\n    const init = (opt= {}) => {\n        state.videoNode = opt.videoNode || \"vh-device-check-video\"\n        state.selectedVideoDeviceId = opt.selectedVideoDeviceId === undefined ? opt.selectedVideoDeviceId : \"\"\n        state.localStreamId = opt.localStreamId === undefined ? opt.localStreamId : \"\"\n        interactiveServer = contextServer.get(\"interactiveServer\")\n\n    }\n\n    const setVideoNode = (videoNode) => {\n        state.videoNode = videoNode\n    }\n\n    const setSelectedVideoDeviceId = (selectedVideoDeviceId) => {\n        state.selectedVideoDeviceId = selectedVideoDeviceId\n    }\n\n    // 开始视频预览\n    const startPreviewVideo = (opts = {}) => {\n        const originalOpts = {\n            videoNode: state.videoNode, // 传入本地视频显示容器，必填\n            audio: false, // 是否获取音频，选填，默认为true\n            videoDevice: state.selectedVideoDeviceId,\n            profile: VhallRTC.RTC_VIDEO_PROFILE_240P_16x9_M\n        }\n        const options = Object.assign(\n            { ...originalOpts },\n            { ...opts }\n        )\n        return interactiveServer.createLocalStream(options).then(streamId => {\n            state.localStreamId = streamId\n            return streamId\n        })\n    }\n\n    // 结束视频预览\n    const stopPreviewVideo = (streamId) => {\n        const id = streamId || state.localStreamId\n        return interactiveServer.destroyStream(id).then(() => {\n            setVideoNode(\"\");\n            return state.localStreamId\n        })\n    }\n\n    init()\n\n    return {\n        state,\n        init,\n        setVideoNode,\n        setSelectedVideoDeviceId,\n        startPreviewVideo,\n        stopPreviewVideo,\n        getDevices: interactiveServer.getDevices,\n        getVideoConstraints: interactiveServer.getVideoConstraints\n    }\n}\n","import contextServer from '@/domain/common/context.server.js';\nimport $http from '@/utils/http.js';\n\nexport default function useNoticeServer() {\n    const state = {\n        //公告列表\n        noticeList: [],\n\n        //请求的分页参数\n        pageInfo: {\n            pos: 0,\n            limit: 10,\n            pageNum: 1\n        },\n        //总页数\n        totalPages: 1,\n        //总条数\n        total: 0,\n    };\n\n    const roomServer = contextServer.get('roomBaseServer');\n    const {roomId = '', channelId = ''} = roomServer.state.watchInitData;\n\n    //从服务器获取消息记录\n    const fetchNoticeList = (params) => {\n        return $http({\n            url: '/v3/interacts/chat/get-announcement-list',\n            type: 'POST',\n            data: params\n        });\n    }\n\n    //获取消息记录\n    const getNoticeList = ({flag = false, params = {}}) => {\n\n        if (!flag) {\n            state.noticeList = [];\n            state.pageInfo = {\n                pos: 0,\n                limit: 10,\n                pageNum: 1\n            };\n            state.totalPages = 1;\n            state.total = 0;\n        } else {\n            state.pageInfo.limit = params.limit;\n            state.pageInfo.pos = params.pos;\n            state.pageInfo.pageNum = params.pageNum;\n        }\n\n\n        return fetchNoticeList(params)\n            .then(res => {\n                if (res.code == 200 && res.data) {\n                    state.total = res.data.total;\n                    if (flag) {\n                        state.noticeList.push(...res.data.list)\n                    } else {\n                        state.noticeList = res.data.list\n                    }\n                    state.totalPages = Math.ceil(res.data.total / state.pageInfo.limit);\n                }\n                return {backData:res,state};\n            });\n    }\n\n    //发送消息\n    const sendNotice = (params = {}) => {\n        return $http({\n            url: '/v3/interacts/chat/send-notice-message',\n            type: 'POST',\n            data: params\n        });\n    }\n\n    return {state, sendNotice, getNoticeList, fetchNoticeList};\n}\n","import contextServer from \"../common/context.server\";\n\nexport default function usePlayerServer() {\n    let state = {\n        playerInstance: null,\n        isPlaying:false,\n        markPoints:[],\n        type:'live',// live or vod\n        voice:60\n    }\n\n    let vhallSaasInstance = null;\n\n    const init = (options) => {\n        const roomInitGroupServer = contextServer.get('roomInitGroupServer')\n        vhallSaasInstance = roomInitGroupServer.state.vhallSaasInstance\n\n        return vhallSaasInstance.createPlayer(options).then((instance)=>{\n            state.playerInstance = instance;\n            state.markPoints = state.playerInstance.markPoints;\n            return true\n        })\n    }\n\n    const setType = (type='live')=>{\n        state.type = type\n    }\n\n    const play = () => {\n        return state.playerInstance.play();\n    }\n\n    const pause = () => {\n        return state.playerInstance.pause()\n    }\n\n\n    const isPause = () => {\n        return state.playerInstance.isPause()\n    }\n\n    const getQualitys = () => {\n        return state.playerInstance.getQualitys()\n    }\n\n    const getCurrentQuality = () => {\n        return state.playerInstance.getCurrentQuality()\n    }\n\n    const setQuality = () => {\n        return state.playerInstance.setQuality()\n    }\n\n    const enterFullScreen = () => {\n        return state.playerInstance.enterFullScreen()\n    }\n\n    const exitFullScreen = () => {\n        return state.playerInstance.exitFullScreen()\n    }\n\n    const setMute = () => {\n        return state.playerInstance.setMute()\n    }\n\n    const getVolume = () => {\n        return state.playerInstance.getVolume()\n    }\n\n    const setVolume = (val) => {\n        state.voice = val;\n        return state.playerInstance.setVolume(val)\n    }\n\n    const getDuration = (onFail=()=>{}) => {\n        return state.playerInstance.getDuration(onFail)\n    }\n\n    const getCurrentTime = () => {\n        return state.playerInstance.getCurrentTime()\n    }\n\n    const setCurrentTime = (val) => {\n        return state.playerInstance.setCurrentTime(val)\n    }\n\n    const getUsableSpeed = () => {\n        return state.playerInstance.getUsableSpeed()\n    }\n\n    const setPlaySpeed = (val) => {\n        return state.playerInstance.setPlaySpeed(val)\n    }\n\n    const openControls = (status) => {\n        return state.playerInstance.openControls(status)\n    }\n\n    const openUI = (status) => {\n        return state.playerInstance.openUI(status)\n    }\n\n    const setResetVideo = (val) => {\n        return state.playerInstance.setResetVideo(val)\n    }\n\n    const setBarrageInfo = (val) => {\n        return state.playerInstance.setBarrageInfo(val)\n    }\n\n    const addBarrage = () => {\n        return state.playerInstance.addBarrage()\n    }\n\n    const toggleBarrage = () => {\n        return state.playerInstance.toggleBarrage()\n    }\n\n    const toggleSubtitle = () => {\n        return state.playerInstance.toggleSubtitle()\n    }\n\n    const on = (type, cb) => {\n        state.playerInstance.$on(type,cb)\n    }\n\n    const emit = (type,params) => {\n        state.playerInstance.$emit(type,params)\n    }\n\n    const destroy = () => {\n\n    }\n\n    return { \n        state, \n        setType,\n        init,\n        on, \n        emit, \n        destroy, \n        play, \n        pause, \n        isPause, \n        getQualitys, \n        getCurrentQuality, \n        setQuality, \n        enterFullScreen, \n        exitFullScreen, \n        setMute, \n        getVolume, \n        setVolume, \n        getDuration, \n        getCurrentTime, \n        setCurrentTime, \n        getUsableSpeed, \n        setPlaySpeed, \n        openControls, \n        openUI, \n        setResetVideo, \n        setBarrageInfo, \n        addBarrage, \n        toggleBarrage, \n        toggleSubtitle\n     }\n}","import contextServer from '@/domain/common/context.server.js'\nimport useMsgServer from '@/domain/common/msg.server.js'\nimport useRoomBaseServer from '@/domain/roombase/roombase.server.js'\nimport useInteractiveServer from '@/domain/stream/interactive.server.js';\nimport { setBaseUrl, setToken, setRequestHeaders } from '@/utils/http.js';\nimport useMicServer from \"@/domain/stream/mic.server.js\";\n\nexport default function useRoomInitGroupServer(options = {}) {\n    const state = {\n        bizId: options.biz_id || 2,// 区分 端（知客/直播） 2-直播 4-知客\n        vhallSaasInstance: null,\n        live_token: null\n    }\n\n    let roomBaseServer = useRoomBaseServer();\n    let msgServer = useMsgServer();\n    let interactiveServer = useInteractiveServer()\n    let micServer = useMicServer()\n\n\n    setTimeout(() => {\n        contextServer.set('roomBaseServer', roomBaseServer)\n        contextServer.set('msgServer', msgServer)\n        contextServer.set('interactiveServer', interactiveServer)\n        contextServer.set('micServer', micServer)\n    }, 100)\n\n    const reload = async () => {\n        msgServer.destroy();\n        await msgServer.init();\n    }\n\n    const setRequestConfig = (options) => {\n        setToken(options.token, options.liveToken)\n\n        if (options.requestHeaders) {\n            setRequestHeaders(options.requestHeaders)\n        }\n    }\n\n    const initSdk = () => {\n        return new Promise((resolve, reject) => {\n            state.vhallSaasInstance = new window.VhallSaasSDK()\n            addToContext()\n            resolve()\n        })\n    }\n\n    const initSendLive = async (customOptions = {}) => {\n        await initSdk()\n        const defaultOptions = {\n            clientType: 'send',\n            development: true,\n            requestHeaders: {\n                platform: 7\n            }\n        }\n\n        if (customOptions.liveToken) {\n            state.live_token = customOptions.liveToken\n        }\n\n        const options = Object.assign({}, defaultOptions, customOptions)\n        setRequestConfig(options)\n\n        await roomBaseServer.init(options);\n        await roomBaseServer.getWebinarInfo();\n        await roomBaseServer.getConfigList();\n        await msgServer.init();\n        await interactiveServer.init();\n\n        return true;\n    }\n\n    const initReceiveLive = async (customOptions = {}) => {\n        initSdk()\n        const defaultOptions = {\n            clientType: 'receive',\n            development: true,\n            requestHeaders: {\n                platform: 7\n            },\n            receiveType: 'standard'\n        }\n        const options = Object.assign({}, defaultOptions, customOptions)\n        setRequestConfig(options)\n\n        await roomBaseServer.init(options)\n        await roomBaseServer.getWebinarInfo()\n        await roomBaseServer.getConfigList()\n        await msgServer.init();\n        await interactiveServer.init();\n\n        return true;\n    }\n\n    const result = { state, roomBaseServer, msgServer, interactiveServer, reload, initSendLive, initReceiveLive }\n\n    function addToContext() {\n        contextServer.set('roomInitGroupServer', result)\n    }\n\n    return result;\n}\n","import requestApi from '../../request/index';\nimport '../../libs/sdk.js'\n\nexport default function useUserServer() {\n    const state = {}\n\n    // 验证码登录&&账号登录\n    const loginInfo = (data) => {\n        return requestApi.user.loginInfo(data)\n    }\n\n    // 第三方授权\n    const callbackUserInfo = (data) => {\n        return requestApi.user.callbackUserInfo(data)\n    }\n\n    // 注册\n    const register = (data) => {\n        return requestApi.user.register(data)\n    }\n\n    // 手机||邮箱验证码\n    const codeCheck = (data) => {\n        return requestApi.user.codeCheck(data)\n    }\n\n    // 密码重置\n    const resetPassword = (data) => {\n        return requestApi.user.resetPassword(data)\n    }\n\n    return { state, loginInfo, callbackUserInfo, register, codeCheck, resetPassword }\n}","import requestApi from '../../request/index';\n\nexport default function useVirtualClientStartServe() {\n    const state = {\n        preson: {\n            pv: '',\n            basePv: '',\n            baseTime: '',\n            onlineNum: '',\n            baseOnlineNum: '',\n        },\n        addCount: ''\n    }\n\n    const virtualClientStart = (data) => {\n        return requestApi.virtualClient.virtualClientStart(data)\n    }\n\n    const virtualAccumulation = (data) => {\n        return requestApi.virtualClient.virtualAccumulation(data)\n    }\n\n    const virtualClientGet = (data) => {\n        let http = requestApi.virtualClient.virtualClientGet(data)\n        http.then(res => {\n            console.log('请求成功！！！！！')\n            state.preson.pv = res.data.pv;\n            state.preson.basePv = res.data.base_pv;\n            state.preson.baseTime = res.data.base_time;\n            state.addCount = res.data.base_time;\n            state.preson.onlineNum = res.data.online;\n            state.preson.baseOnlineNum = res.data.base_online;\n        })\n        return http\n    }\n\n    return { state, virtualClientStart, virtualAccumulation, virtualClientGet }\n}","import $http from '@/utils/http.js';\nexport default function userMemberServer(){\n    const state = {\n        //在线的成员\n        onlineUsers:[],\n        //申请上麦的人员\n        applyUsers:[],\n        //是否刷新了\n        isRefresh:false,\n\n        //总数\n        totalNum:0,\n        //当前页数\n        page:1,\n\n        //举手状态\n        raiseHandTip:false\n\n    };\n\n    //设置state的值\n    const setState = (key, value) => {\n        state[key] = value;\n    }\n\n    //请求在线成员列表然后处理\n    const getOnlineUserList = (params = {}) => {\n        return _getOnlineUser(params)\n            .then(res => {\n                console.warn('当前在线人员列表', res);\n\n                if(res && [200,'200'].includes(res.code)){\n\n                    if (state.isRefesh) {\n                        state.onlineUsers = _sortUsers(res.data.list);\n                        state.isRefesh = false;\n                        console.log('>>>>>>aaaa2', state.applyUsers)\n                        state.applyUsers.forEach(element => {\n                            state.onlineUsers.forEach(item => {\n                                if (element.accountId == item.accountId) {\n                                    item.isApply = true\n                                }\n                            })\n                        })\n                    }\n\n                    if (!state.isRefesh && res.data.list.length === 0) {\n                        state.page--;\n                    }\n\n                    state.totalNum = res.data.total;\n                }\n\n                if(![200,'200'].includes(res.code)){\n                    state.page--;\n                }\n\n                return res;\n            });\n    }\n\n    /**\n     * 将在线人员列表分为五个部分排序 主持人 / 上麦嘉宾 / 下麦嘉宾 / 助理 / 上麦观众 / 普通观众\n     */\n   const  _sortUsers =  (list=[])=> {\n        let host = []; // 主持人\n        let onMicGuest = []; // 上麦嘉宾\n        let downMicGuest = []; // 下麦嘉宾\n        let assistant = []; // 助理\n        let onMicAudience = []; // 上麦观众\n        let downMicAudience = []; // 普通观众\n        list.forEach(item => {\n            switch (Number(item.role_name)) {\n                // 主持人\n                case 1:\n                    host.push(item);\n                    break;\n\n                // 观众\n                case 2:\n                    item.is_speak\n                        ? onMicAudience.push(item)\n                        : downMicAudience.push(item);\n                    break;\n\n                // 助理\n                case 3:\n                    assistant.push(item);\n                    break;\n\n                // 嘉宾\n                case 4:\n                    item.is_speak ? onMicGuest.push(item) : downMicGuest.push(item);\n                    break;\n                default:\n                    console.error('角色未定义');\n            }\n        });\n\n        // 加载更多的时候，如果普通观众超过200，只显示后200\n        if (downMicAudience.length > 200) {\n            downMicAudience = downMicAudience.slice(-200);\n        }\n        return host.concat(\n            onMicGuest,\n            downMicGuest,\n            assistant,\n            onMicAudience,\n            downMicAudience\n        );\n    }\n\n    //请求在线成员列表\n    const _getOnlineUser = (params={})=>{\n        return $http({\n            url: '/v3/interacts/chat-user/get-online-list',\n            type: 'POST',\n            data: params\n        });\n    }\n\n    //踢出成员\n    const kickedUser = (params={})=>{\n       return _kickedUser(params)\n           .then(res=>{\n               return res;\n           })\n    }\n\n    //禁言成员\n    const mutedUser = (params={})=>{\n       return _mutedUser(params)\n           .then(res=>{\n               return res;\n           });\n    }\n\n\n\n    //请求踢出成员\n    const _kickedUser = (params={})=>{\n        return $http({\n            url: '/v3/interacts/chat-user/set-kicked',\n            type: 'POST',\n            data: params\n        });\n    }\n\n\n    //请求禁言\n    const _mutedUser = (params={})=>{\n        return $http({\n            url: '/v3/interacts/chat-user/set-banned',\n            type: 'POST',\n            data: params\n        });\n    }\n\n    //请求禁言的成员列表\n    const getMutedUserList = (params={})=>{\n        return $http({\n            url: '/v3/interacts/chat-user/get-banned-list',\n            type: 'POST',\n            data: params\n        });\n    }\n    //请求踢出的成员列表\n    const getKickedUserList = (params={})=>{\n        return $http({\n            url: '/v3/interacts/chat-user/get-kicked-list',\n            type: 'POST',\n            data: params\n        });\n    }\n\n    return {state,setState,getOnlineUserList,getMutedUserList,getKickedUserList,mutedUser,kickedUser};\n}\n"],"names":["contextServer","state","set","key","server","get","show","clear","useContextServer","useMsgServer","msgInstance","init","vhallSaasInstance","createChat","then","res","destroy","$on","eventType","fn","$emit","params","mountSDK","src","Promise","resolve","node","document","main","items","_i","arguments","length","merge","apply","_merge","recursive","clone","input","Array","isArray","output","index","push","isPlainObject","isClone","isRecursive","result","shift","value","item","_recursiveMerge","base","extend","Object","defineProperty","exports","module","BUSE_URL","TOKEN","LIVETOKEN","HEADERS","setToken","token","livetoken","console","log","setRequestHeaders","options","assign","$fetch","url","reject","data","live_token","arr","encodeURIComponent","join","formatParams","dataType","success","fail","callbackName","script","createElement","type","charset","body","appendChild","window","val","removeChild","clearTimeout","timer","time","setTimeout","head","parmas","xhr","toUpperCase","XMLHttpRequest","ActiveXObject","onreadystatechange","status","response","readyState","getResponseHeader","indexOf","responseXML","JSON","parse","responseText","open","setRequestHeader","getOwnPropertyNames","forEach","send","roomBase","getWebinarInfo","$http","webinar_id","webinarId","watchInitData","webinar","id","is_no_check","getConfigList","webinar_user_id","userinfo","user_id","scene_id","setDevice","room_id","interact","recordApi","roomInitGroupServerState","retParmams","userBase","loginInfo","biz_id","callbackUserInfo","register","codeCheck","resetPassword","insertFile","getInsertFileList","pos","limit","get_no_trans","name","deleteInsertFile","virtualClient","virtualClientStart","virtualAccumulation","virtualClientGet","setMainScreen","retParams","setSpeaker","setRoomDevice","device","receive_account_id","allowSpeak","roomId","speakOn","speakOff","speakUserOff","inviteMic","setHandsUp","cancelApply","refuseInvite","getAllDocList","getWebinarDocList","getDocDetail","syncDoc","delDocList","requestApi","live","VhallSaasSDK","user","interactive","mic","doc","useInteractiveServer","createLocalAndStream","camerasList","micropsList","videoConstraintsList","getDevices","videoInputDevices","filter","d","label","deviceId","audioInputDevices","RESOLUTION_REG","getVideoConstraints","test","videoNode","videoDevice","audioDevice","profile","createLocalVideoStream","streamId","err","interactiveInstance","remoteStreams","checkSystemRequirements","startPushStream","option","roomInitGroupServer","createInteractive","interactives","getRoomInfo","destroyInit","createLocalStream","createLocaldesktopStream","createLocalAudioStream","createLocalPhotoStream","destroyStream","publishStream","unpublishStream","subscribeStream","unSubscribeStream","setDual","muteVideo","muteAudio","startBroadCast","stopBroadCast","setBroadCastLayout","setBroadCastScreen","getCameras","getMicrophones","getSpeakers","isScreenShareSupported","getPacketLossRate","getRoomStreams","remoteStreamList","remoteStream","getRemoteStreams","listenerSdk","on","VhallRTC","EVENT_REMOTESTREAM_ADD","e","EVENT_REMOTESTREAM_REMOVED","setVideoProfile","getStreamPacketLoss","getAudioLevel","callback","getStreamMute","setBroadCastAdaptiveLayoutMode","setHandsup","currentStreams","useRoomBaseServer","getWatchInitData","code","inited","interact_token","watchInitErrorData","isLiveOver","webinarVo","undefined","configList","eventEmitter","eventName","eventMap","payload","eventCallback","$off","findIndex","cb","splice","$destroy","permissions","startLive","endLive","startRecord","pauseRecord","endRecord","useMicServer","emojiUrl","faceArr","textToEmoji","s","replace","reg","ret","textArr","split","emojiArr","match","cont","i","msgType","msgCont","msgImage","emojiToPath","includes","Msg","avatar","sendId","nickName","showTime","roleName","content","sendTime","client","self","replyMsg","atList","context","source","count","chatList","keywordList","imgUrls","page","getHistoryMsg","from","fetchHistoryData","backData","list","map","str","text_content","image_urls","_handleImgUrl","at_list","_handlePrivateChatList","_handleGenerateMsg","reduce","acc","curr","some","reverse","msg","slice","unshift","defaultParams","rawData","a","nick_name","sender_id","nickname","role_name","date_time","reply_msg","msgId","msg_id","channel","channel_id","isHistoryMsg","defaultAvatar","show_time","resultMsg","event_type","source_status","gift_name","gift_url","substr","interactToolsStatus","sendMsg","inputValue","needFilter","emitTextChat","setKeywordList","checkHasKeyword","filterStatus","localDesktopStreamId","interactiveServer","browserDetection","ua","navigator","userAgent","chromeTest","chromeVersion","safariTest","safariVersion","isNotSupport","Number","needInstallPlugin","shareScreenCheck","checkResult","detail","startShareScreen","roomBaseServerState","retOptions","audio","speaker","addConfig","attributes","stringify","join_info","role","publishDesktopShareStream","stopShareScreen","getVodAllCids","docInstance","getContainerInfo","createDoc","instance","createBoard","createDocument","selectContainer","destroyContainer","setRemoteData","zoomIn","zoomOut","zoomReset","move","prevStep","nextStep","mode","setPlayMode","width","height","setSize","createUUID","style","setControlStyle","gotoPage","cancelZoom","switchOnContainer","switchOffContainer","resetContainer","setPen","setEraser","setStroke","setStrokeWidth","cancelDrawable","setHighlighters","setText","loadDoc","start","republish","setRole","setAccountId","editable","setEditable","getThumbnailList","chromeResult","localInsertStream","isChrome88","exec","captureStreamByCanvas","videoElement","_videoElement","chrome88Canvas","chrome88canvasContext","getContext","drawVideoCanvas","drawImage","clearInterval","_canvasInterval","videoWidth","videoHeight","setInterval","canvasStream","captureStream","audioTrack","getAudioTracks","videoTrack","getVideoTracks","captureStreamByVideo","videoStream","getTracks","captureLocalStream","_isAudio","isCanUseCaptureStream","selectLocalFile","onChange","accept","inputObj","setAttribute","click","addEventListener","this","createLocalVideoElement","file","windowURL","URL","webkitURL","fileUrl","createObjectURL","onload","revokeObjectURL","videoContainerElement","getElementById","el","innerHTML","createLocalInsertStream","retSteram","video","RTC_VIDEO_PROFILE_1080P_16x9_H","stream_type","has_video","streamType","mixOption","mixVideo","mixAudio","hasInsertedStream","insertedStream","publishInsertStream","stream","_LoclaStreamId","stopPublishInsertStream","_this","subscribeInsertStream","unsubscribeInsertStream","onInsertFileStreamAdd","onInsertFileStreamDelete","onInsertFileStreamFaild","opt","selectedVideoDeviceId","localStreamId","setVideoNode","setSelectedVideoDeviceId","startPreviewVideo","opts","originalOpts","RTC_VIDEO_PROFILE_240P_16x9_M","stopPreviewVideo","noticeList","pageInfo","pageNum","totalPages","total","fetchNoticeList","channelId","sendNotice","getNoticeList","flag","Math","ceil","playerInstance","isPlaying","markPoints","voice","setType","createPlayer","emit","play","pause","isPause","getQualitys","getCurrentQuality","setQuality","enterFullScreen","exitFullScreen","setMute","getVolume","setVolume","getDuration","getCurrentTime","setCurrentTime","getUsableSpeed","setPlaySpeed","openControls","openUI","setResetVideo","setBarrageInfo","addBarrage","toggleBarrage","toggleSubtitle","bizId","roomBaseServer","msgServer","micServer","setRequestConfig","liveToken","requestHeaders","initSdk","reload","initSendLive","customOptions","defaultOptions","clientType","development","platform","initReceiveLive","receiveType","preson","pv","basePv","baseTime","onlineNum","baseOnlineNum","addCount","http","base_pv","base_time","online","base_online","_sortUsers","host","onMicGuest","downMicGuest","assistant","onMicAudience","downMicAudience","is_speak","error","concat","_getOnlineUser","_kickedUser","_mutedUser","onlineUsers","applyUsers","isRefresh","totalNum","raiseHandTip","setState","getOnlineUserList","warn","isRefesh","element","accountId","isApply","getMutedUserList","getKickedUserList","mutedUser","kickedUser"],"mappings":"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YACA,YACA,YACA,WACD,WACA,YACC,WACD,YACC,YACA,YACA,YACA,YACA,WACD,YACC,YACA,YACA,YACA,YACA,YACA,YACA,WACD,WACA,YACC,WACD,YACC,YACA,YACA,YACA,YACA,YACA,aACC,YACD,aACC,aACA,YACD,YACA,YACA,aACC,YACD,YACA,WACD,YACC,YACA,YACA,YACA,YACA,YACA,YACA,WACD,YACC,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACD,YACC,YACA,YACA,YACA,YACA,YACA,YACA,WACD,WACA,YACC,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,MAEJC,EAAc,SAAAC,GAClBA,EAAIA,EAAEC,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQA,QAAQ,MAAO,aAG3DC,EAAM,iBACNC,EAAM,GACNC,EAAUJ,EAAEK,MAAMH,GAClBI,EAAWN,EAAEO,MAAML,UAKzBE,EAAQ5K,QAAQ,SAACgL,EAAMC,GAErBD,GACEL,EAAInP,KAAK,CACP0P,QAAS,OACTC,QAASH,IAMTC,IAAML,EAAQ/P,OAAS,IACrByP,EAAQQ,EAASG,IACnBN,EAAInP,KAAK,CACP0P,QAAS,QACTC,QAASL,EAASG,GAClBG,SAAUC,EAAYP,EAASG,MAGjCN,EAAInP,KAAK,CACP0P,QAAS,OACTC,QAASL,EAASG,QAkBnBN,GAiCW,SAAdU,EAAcrS,UAClBA,EAAIsS,SAAS,kBACNjB,iBACAA,0BADYC,EAAQtR,cCnc3B,SADmBuS,SAEjBC,gBAAAA,QAAS,KACTC,gBAAAA,QAAS,KACTC,gBAAAA,UAAW,KACXxN,gBAAAA,MAAO,SACPyN,gBAAAA,UAAW,KACXC,gBAAAA,UAAW,KACXC,gBAAAA,SAAU,KACVC,gBAAAA,UAAW,KACXC,gBAAAA,QAAS,KACTC,gBAAAA,SACAC,gBAAAA,UAAW,KACXC,gBAAAA,QAAS,KACTC,gBAAAA,SAAU,KACVC,gBAAAA,QAAS,0BAGJlO,KAAOA,OACPsN,OAASA,OACTC,OAASA,OACTC,SAAWA,OACXE,SAAWA,OACXC,QAAUA,O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"}