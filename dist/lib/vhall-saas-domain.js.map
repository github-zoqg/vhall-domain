{"version":3,"file":"vhall-saas-domain.js","sources":["../../src/domain/common/context.server.js","../../src/domain/common/msg.server.js","../../src/domain/stream/interactive.server.js","../../src/libs/sdk.js","../../node_modules/merge/lib/src/index.js","../../src/utils/index.js","../../src/utils/http.js","../../src/request/roomBase.js","../../src/request/user.js","../../src/request/insertFile.js","../../src/request/index.js","../../src/domain/common/eventEmitter.server.js","../../src/domain/roombase/roombase.server.js","../../src/domain/user/user.server.js","../../src/domain/stream/insertFile.server.js","../../src/domain/roombase/roomInit.group.server.js"],"sourcesContent":["\r\nfunction useContextServer() {\r\n    const state = {\r\n        serverPool: {}\r\n    }\r\n\r\n    const set = (key, server) => {\r\n        const { serverPool } = state;\r\n        serverPool[key] = server;\r\n    }\r\n\r\n    const get = (key) => {\r\n        const { serverPool } = state;\r\n        return serverPool[key]\r\n    }\r\n\r\n    const show = () => {\r\n        const { serverPool } = state;\r\n        return { ...serverPool }\r\n    }\r\n\r\n    const clear = () => {\r\n        const { serverPool } = state\r\n        serverPool = {}\r\n    }\r\n\r\n    return { set, get, show, clear }\r\n}\r\n\r\nconst contextServer = useContextServer()\r\nexport default contextServer;\r\n","import contextServer from '@/domain/common/context.server.js'\r\n\r\nexport default function useMsgServer() {\r\n    const state = {\r\n        msgInstance: null\r\n    }\r\n\r\n    const init = () => {\r\n        if (!contextServer.get('roomInitGroupServer')) return\r\n        const { state: roomInitGroupServer } = contextServer.get('roomInitGroupServer')\r\n        return roomInitGroupServer.vhallSaasInstance.createChat().then(res => {\r\n            state.msgInstance = res\r\n            return res\r\n        })\r\n    }\r\n\r\n    const $on = (eventType, fn) => {\r\n        if (!state.msgInstance) return;\r\n        state.msgInstance.$on(eventType, fn);\r\n    }\r\n\r\n    const $emit = (eventType, params) => {\r\n        if (!state.msgInstance) return;\r\n        state.msgInstance.$emit(eventType, params);\r\n    }\r\n\r\n    const destroy = () => {\r\n        if (!state.msgInstance) return\r\n        state.msgInstance.destroy\r\n        state.msgInstance = null\r\n    }\r\n\r\n    return { state, init, destroy, $on, $emit }\r\n}\r\n","import contextServer from \"@/domain/common/context.server.js\"\r\n\r\nexport default function useInteractiveServer() {\r\n    let state = {\r\n        vhallSaasInstance: null,  // vhallsdk的实例\r\n        interactiveInstance: null,  // 互动实例\r\n        streamId: null,\r\n        remoteStreams:[] // 远端流数组\r\n    }\r\n\r\n    const init = (option) => {\r\n        const roomInitGroupServer = contextServer.get('roomInitGroupServer');\r\n        state.vhallSaasInstance = roomInitGroupServer.state.vhallSaasInstance;\r\n        return state.vhallSaasInstance.createInteractive().then(interactives => {\r\n            state.interactiveInstance = interactives\r\n            console.log('state.interactiveInstance',interactives,interactives.instance)\r\n            return true\r\n        })\r\n    }\r\n    // 基础api\r\n    // 常见本地流\r\n    const createLocalStream = (options = {}, addConfig = {}) => {\r\n        return state.interactiveInstance.createLocalStream(options)\r\n    }\r\n    // 创建摄像头视频流\r\n    const createLocalVideoStream = (options = {}, addConfig = {}) => {\r\n        return state.interactiveInstance.createLocalVideoStream(options, addConfig)\r\n    }\r\n    // 创建桌面共享流\r\n    const createLocaldesktopStream = (options = {}, addConfig = {}) => {\r\n        return state.interactiveInstance.createLocaldesktopStream(options, addConfig)\r\n    }\r\n    // 创建本地音频流\r\n    const createLocalAudioStream = (options = {}, addConfig = {}) => {\r\n        return state.interactiveInstance.createLocalAudioStream(options, addConfig)\r\n    }\r\n    // 创建图片推流\r\n    const createLocalPhotoStream = (options = {}, addConfig = {}) => {\r\n        return state.interactiveInstance.createLocalPhotoStream(options, addConfig)\r\n    }\r\n    // 销毁额本地流\r\n    const stopStream = (streamId) => {\r\n        return state.interactiveInstance.destroyStream(state.streamId || streamId)\r\n    }\r\n    // 推送本地流到远端\r\n    const publishStream = (options = {}) => {\r\n        return state.interactiveInstance.publishStream({ streamId: state.streamId || options.streamId })\r\n    }\r\n    // 取消推送到远端的流\r\n    const unpublishStream = (streamId) => {\r\n        return state.interactiveInstance.unpublishStream(state.streamId || streamId)\r\n    }\r\n    // 订阅远端流\r\n    const subscribeStream = (options = {}) => {\r\n        return state.interactiveInstance.subscribeStream(options)\r\n    }\r\n    // 取消订阅远端流\r\n    const unSubscribeStream = (streamId) => {\r\n        return state.interactiveInstance.unSubscribeStream(streamId)\r\n    }\r\n    // 设置大小流\r\n    const setDual = (options = {}) => {\r\n        return state.interactiveInstance.setDual(options)\r\n    }\r\n    // 改变视频的禁用和启用\r\n    const muteVideo = (options = {}) => {\r\n        return state.interactiveInstance.muteVideo(options)\r\n    }\r\n    // 改变音频的禁用和启用\r\n    const muteAudio = (options = {}) => {\r\n        return state.interactiveInstance.muteAudio(options)\r\n    }\r\n    // 开启旁路\r\n    const startBroadCast = (options = {}, addConfig = {}) => {\r\n        return state.interactiveInstance.startBroadCast(options, addConfig)\r\n    }\r\n    // 停止旁路\r\n    const stopBroadCast = () => {\r\n        return state.interactiveInstance.stopBroadCast()\r\n    }\r\n    // 动态配置指定旁路布局模板\r\n    const setBroadCastLayout = (options = {}) => {\r\n        return state.interactiveInstance.setBroadCastLayout(options)\r\n    }\r\n    // 动态配置旁路主屏\r\n    const setBroadCastScreen = (mainScreenStreamId = '') => {\r\n        return state.interactiveInstance.setBroadCastScreen(mainScreenStreamId)\r\n    }\r\n    // 获取全部音视频列表\r\n    const getDevices = () => {\r\n        return state.interactiveInstance.getDevices()\r\n    }\r\n    // 获取摄像头列表\r\n    const getCameras = () => {\r\n        return state.interactiveInstance.getCameras()\r\n    }\r\n    // 获取麦克风列表\r\n    const getMicrophones = () => {\r\n        return state.interactiveInstance.getMicrophones()\r\n    }\r\n    // 获取扬声器列表\r\n    const getSpeakers = () => {\r\n        return state.interactiveInstance.getSpeakers()\r\n    }\r\n    // 获取设备的分辨率\r\n    const getVideoConstraints = (deviceId = '') => {\r\n        return state.interactiveInstance.getSpeakers(deviceId)\r\n    }\r\n    // 配置本地流视频质量参数\r\n    const setVideoProfile = (options = {}) => {\r\n        return state.interactiveInstance.setVideoProfile(options)\r\n    }\r\n    // 是否支持桌面共享\r\n    const isScreenShareSupported = () => {\r\n        return state.interactiveInstance.isScreenShareSupported()\r\n    }\r\n    // 检查当前浏览器支持性\r\n    const checkSystemRequirements = async () => {\r\n        if(!state.interactiveInstance)return;\r\n        return state.interactiveInstance.checkSystemRequirements()\r\n    }\r\n    // 获取上下行丢包率\r\n    const getPacketLossRate = () => {\r\n        return state.interactiveInstance.getPacketLossRate()\r\n    }\r\n    // 获取上下行丢包率\r\n    const getStreamPacketLoss = () => {\r\n        return state.interactiveInstance.getStreamPacketLoss()\r\n    }\r\n    // 获取房间流信息\r\n    const getRoomStreams = () => {\r\n        return state.interactiveInstance.getRoomStreams()\r\n    }\r\n    // 获取流音频能量\r\n    const getAudioLevel = (streamId) => {\r\n        return state.interactiveInstance.getAudioLevel(streamId)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // 组合api\r\n    const startPushStream = ()=> {\r\n        console.log('state:',state)\r\n        createLocalAndStream(state.interactiveInstance)\r\n    }\r\n\r\n    // 创建本地的推流和推流\r\n    const createLocalAndStream = (interactive) => {\r\n        let camerasList = null, micropsList = null, videoConstraintsList = null, streamId = null\r\n        return interactive.getDevices().then((data) => {\r\n            console.log('devices list::', data);\r\n            camerasList = data.videoInputDevices.filter(d => d.label && d.deviceId != 'desktopScreen')\r\n            micropsList = data.audioInputDevices.filter(\r\n                d => d.deviceId != 'default' && d.deviceId != 'communications' && d.label\r\n            )\r\n        }).then(() => {\r\n            const RESOLUTION_REG = /((^VIDEO_PROFILE_(720P|540P|480P|360P)_1$)|(^RTC_VIDEO_PROFILE_(720P|540P|480P|360P)_16x9_M$))/\r\n            interactive.getVideoConstraints(camerasList[0].deviceId).then((data) => {\r\n                console.log('constrainList', data);\r\n                videoConstraintsList = data.filter(item => RESOLUTION_REG.test(item.label))\r\n            }).then(() => {\r\n                let params = {\r\n                    videoNode: 'vhall-video',\r\n                    videoDevice: camerasList[0].deviceId,\r\n                    audioDevice: micropsList[0].deviceId,\r\n                    profile: videoConstraintsList[0]\r\n                }\r\n                interactive.createLocalVideoStream(params).then((res) => {\r\n                    console.log('create local stream success::', res);\r\n                    state.streamId = res\r\n                    streamId = res\r\n                    return res\r\n                }).catch((err) => {\r\n                    console.log('local stream failed::', err);\r\n                })\r\n            }).catch((err) => {\r\n                console.log('constrainlist is failed::', err);\r\n            })\r\n        }).catch((err) => {\r\n            console.log('getDevies is failed::', err);\r\n        })\r\n    }\r\n    const pulishStream = (streamId) => {\r\n        interactive.publishStream({ streamId }).then((res) => {\r\n            console.log('publish stream success::', streamId);\r\n        })\r\n        .catch((err) => {\r\n            console.log('publish is failed::', err);\r\n        })\r\n    }\r\n    // 订阅流列表\r\n    const remoteStreamList = ()=> {\r\n        state.remoteStreams = state.interactiveInstance.getRemoteStreams()\r\n        for (const remoteStream in state.interactiveInstance.getRemoteStreams()) {\r\n            state.remoteStreams.push(remoteStream)\r\n        }\r\n        return state.remoteStreams\r\n    }\r\n    // sdk的监听事件\r\n    const listenerSdk = () => {\r\n        state.interactiveInstance.on(VhallRTC.EVENT_REMOTESTREAM_ADD, (e) => {\r\n            // 0: 纯音频, 1: 只是视频, 2: 音视频  3: 屏幕共享, 4: 插播\r\n            console.log('remote stream add info::',e);\r\n            state.remoteStreams.push(e)\r\n        })\r\n        state.interactiveInstance.on(VhallRTC.EVENT_REMOTESTREAM_REMOVED, (e) => {\r\n            // 0: 纯音频, 1: 只是视频, 2: 音视频  3: 屏幕共享, 4: 插播\r\n            console.log('remote stream remove info::',e);\r\n            state.remoteStreams.filter(item => item.streamId == e.streamId)\r\n        })\r\n    }\r\n    return { state, startPushStream ,init, createLocalStream, createLocalVideoStream, createLocaldesktopStream, createLocalAudioStream,\r\n    createLocalPhotoStream, stopStream, publishStream, unpublishStream, subscribeStream, unSubscribeStream, setDual, muteVideo,\r\n    muteAudio, startBroadCast, stopBroadCast, setBroadCastLayout, setBroadCastScreen, getDevices, getCameras, getMicrophones,\r\n    getSpeakers, getVideoConstraints, isScreenShareSupported, checkSystemRequirements, getPacketLossRate, getRoomStreams, remoteStreamList,\r\n    listenerSdk, setVideoProfile, getStreamPacketLoss, getAudioLevel}\r\n\r\n}","(function (factory) {\n  typeof define === 'function' && define.amd ? define(factory) :\n  factory();\n})((function () { 'use strict';\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n\n      if (enumerableOnly) {\n        symbols = symbols.filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      }\n\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    } else if (call !== void 0) {\n      throw new TypeError(\"Derived constructors may only return object or undefined\");\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  var mountSDK = function mountSDK(src) {\n    return new Promise(function (resolve) {\n      var node = document.createElement('script');\n      document.head.appendChild(node);\n      node.src = src;\n\n      node.onload = function () {\n        resolve();\n      };\n    });\n  };\n\n  /**\r\n   * ajax请求 jsonp处理\r\n   * 1.jsonp 请求格式\r\n   *   $fetch({\r\n   *      url:'',\r\n   *      type: 'GET',\r\n   *      jsonp: 'callback',\r\n   *      data: {\r\n   *        name: 123\r\n   *      }\r\n   *   })\r\n   */\n  var BUSE_URL = '';\n  var TOKEN = '';\n  var LIVETOKEN = '';\n  var HEADERS = null;\n\n  function setBaseUrl(url) {\n    BUSE_URL = url;\n  }\n\n  function setToken(token, livetoken) {\n    console.log(token, livetoken, 888);\n    TOKEN = token;\n    LIVETOKEN = livetoken;\n  }\n\n  function setRequestHeaders(options) {\n    HEADERS = _objectSpread2({}, options);\n  }\n\n  function $fetch(options) {\n    // if (\"development\" != 'development') {\n    //\n    // }\n    options.url = BUSE_URL + options.url;\n    console.log('接口环境', options.url);\n    return new Promise(function (resolve, reject) {\n      options = options || {};\n\n      if (options.data) {\n        if (LIVETOKEN) {\n          options.data.live_token = LIVETOKEN;\n        }\n\n        options.data = formatParams(options.data);\n      }\n\n      options.dataType ? jsonp(options, resolve, reject) : json(options, resolve, reject);\n    });\n  } // JSON请求\n\n\n  function json(params, success, fail) {\n    var xhr = null; // interactToken = sessionStorage.getItem('interact-token') || '',\n    // grayId = sessionStorage.getItem('grayId') || '',\n    // vhallJSSDKUserInfo = localStorage.getItem('vhallJSSDKUserInfo') ? JSON.parse(localStorage.getItem('vhallJSSDKUserInfo')) : {},\n\n    params.type = (params.type || 'GET').toUpperCase();\n\n    if (window.XMLHttpRequest) {\n      xhr = new XMLHttpRequest();\n    } else {\n      xhr = new ActiveXObject('Microsoft.XMLHTTP');\n    }\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        var status = xhr.status;\n\n        if (status >= 200 && status < 300) {\n          var response = '';\n          var type = xhr.getResponseHeader('Content-type');\n\n          if (type.indexOf('xml') !== -1 && xhr.responseXML) {\n            response = xhr.responseXML;\n          } else if (type === 'application/json' || type === 'application/json;charset=UTF-8') {\n            response = JSON.parse(xhr.responseText);\n          } else {\n            response = xhr.responseText;\n          }\n\n          success && success(response);\n        } else {\n          fail && fail(status);\n        }\n      }\n    };\n\n    if (params.type == 'GET') {\n      if (params.data) {\n        xhr.open(params.type, params.url + '?' + params.data, true);\n      } else {\n        xhr.open(params.type, params.url, true);\n      }\n    } else if (params.type == 'POST') {\n      xhr.open(params.type, params.url, true);\n    }\n\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\n    if (!LIVETOKEN) {\n      TOKEN && xhr.setRequestHeader('token', TOKEN);\n    }\n\n    if (HEADERS) {\n      Object.getOwnPropertyNames(HEADERS).forEach(function (item) {\n        xhr.setRequestHeader(item, HEADERS[item]);\n      });\n    } // if (params.headers && params.headers.activeType == 'new') {\n    //     xhr.setRequestHeader('platform', 18)\n    //     xhr.setRequestHeader('request-id', uuid())\n    //     grayId && xhr.setRequestHeader('gray-id', grayId)\n    //     interactToken && xhr.setRequestHeader('interact-token', interactToken)\n    //     token && xhr.setRequestHeader('token', token)\n    // }\n\n\n    if (params.type == 'GET') {\n      xhr.send(null);\n    } else {\n      xhr.send(params.data);\n    }\n  } // JSONP请求\n\n\n  function jsonp(params, success, fail) {\n    var callbackName = params.dataType;\n    params['callback'] = callbackName;\n    var script = document.createElement('script');\n    script.type = \"text/javascript\";\n    script.charset = \"utf-8\";\n    document.body.appendChild(script); // 创建回调函数\n\n    window[callbackName] = function (val) {\n      document.body.removeChild(script);\n      clearTimeout(script.timer);\n      window[callbackName] = null;\n      success && success(val);\n    };\n    script.src = \"\".concat(params.url, \"?\").concat(params.data, \"&_=\", 1594014089800); // 超时处理\n\n    if (params.time) {\n      script.timer = setTimeout(function () {\n        window[callbackName] = null;\n        head.removeChild(script);\n        fail && fail('请求超时');\n      }, parmas.time * 1000);\n    }\n  } // 格式化数据\n\n\n  function formatParams(data) {\n    var arr = [];\n\n    if (data) {\n      for (var item in data) {\n        arr.push(encodeURIComponent(item) + '=' + encodeURIComponent(data[item]));\n      }\n    }\n\n    return arr.join('&');\n  } // 随机数\n\n  var Store = /*#__PURE__*/function () {\n    function Store() {\n      _classCallCheck(this, Store);\n\n      this.state = {};\n    }\n\n    _createClass(Store, [{\n      key: \"set\",\n      value: function set(key, value) {\n        this.state[key] = value;\n      }\n    }, {\n      key: \"get\",\n      value: function get(key) {\n        return this.state[key];\n      }\n    }]);\n\n    return Store;\n  }();\n\n  var store = new Store();\n\n  var getRoomInfo = function getRoomInfo(res) {\n    var _data = res.data;\n    return {\n      webinar: {\n        type: _data.webinar.type,\n        id: _data.webinar.id\n      },\n      paasInfo: {\n        channel_id: _data.interact.channel_id,\n        inav_id: _data.interact.inav_id,\n        paas_access_token: _data.interact.paas_access_token,\n        paas_app_id: _data.interact.paas_app_id,\n        room_id: _data.interact.room_id\n      },\n      userInfo: {\n        avatar: _data.join_info.avatar,\n        is_gag: _data.join_info.is_gag,\n        is_kick: _data.join_info.is_kick,\n        join_id: _data.join_info.join_id,\n        nickname: _data.join_info.nickname,\n        role_name: _data.join_info.role_name,\n        third_party_user_id: _data.join_info.third_party_user_id\n      },\n      reportData: {\n        guid: _data.report_data.guid,\n        aid: _data.interact.room_id,\n        report_extra: _data.report_data.report_extra\n      }\n    };\n  };\n\n  function getDefaultExportFromCjs (x) {\n  \treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n  }\n\n  var src = {exports: {}};\n\n  (function (module, exports) {\n\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    exports.isPlainObject = exports.clone = exports.recursive = exports.merge = exports.main = void 0;\n    module.exports = exports = main;\n    exports[\"default\"] = main;\n\n    function main() {\n      var items = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        items[_i] = arguments[_i];\n      }\n\n      return merge.apply(void 0, items);\n    }\n\n    exports.main = main;\n    main.clone = clone;\n    main.isPlainObject = isPlainObject;\n    main.recursive = recursive;\n\n    function merge() {\n      var items = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        items[_i] = arguments[_i];\n      }\n\n      return _merge(items[0] === true, false, items);\n    }\n\n    exports.merge = merge;\n\n    function recursive() {\n      var items = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        items[_i] = arguments[_i];\n      }\n\n      return _merge(items[0] === true, true, items);\n    }\n\n    exports.recursive = recursive;\n\n    function clone(input) {\n      if (Array.isArray(input)) {\n        var output = [];\n\n        for (var index = 0; index < input.length; ++index) {\n          output.push(clone(input[index]));\n        }\n\n        return output;\n      } else if (isPlainObject(input)) {\n        var output = {};\n\n        for (var index in input) {\n          output[index] = clone(input[index]);\n        }\n\n        return output;\n      } else {\n        return input;\n      }\n    }\n\n    exports.clone = clone;\n\n    function isPlainObject(input) {\n      return input && _typeof(input) === 'object' && !Array.isArray(input);\n    }\n\n    exports.isPlainObject = isPlainObject;\n\n    function _recursiveMerge(base, extend) {\n      if (!isPlainObject(base)) return extend;\n\n      for (var key in extend) {\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype') continue;\n        base[key] = isPlainObject(base[key]) && isPlainObject(extend[key]) ? _recursiveMerge(base[key], extend[key]) : extend[key];\n      }\n\n      return base;\n    }\n\n    function _merge(isClone, isRecursive, items) {\n      var result;\n      if (isClone || !isPlainObject(result = items.shift())) result = {};\n\n      for (var index = 0; index < items.length; ++index) {\n        var item = items[index];\n        if (!isPlainObject(item)) continue;\n\n        for (var key in item) {\n          if (key === '__proto__' || key === 'constructor' || key === 'prototype') continue;\n          var value = isClone ? clone(item[key]) : item[key];\n          result[key] = isRecursive ? _recursiveMerge(result[key], value) : value;\n        }\n      }\n\n      return result;\n    }\n  })(src, src.exports);\n\n  var merge = /*@__PURE__*/getDefaultExportFromCjs(src.exports);\n\n  /**\r\n   * 判断终端类型\r\n   *\r\n   * @export\r\n   * @param {*} target\r\n   * @returns\r\n   */\n\n  function isPc(target) {\n    var userAgentInfo = navigator.userAgent;\n    var Agents = [\"Android\", \"iPhone\", \"SymbianOS\", \"Windows Phone\", \"iPad\", \"iPod\"];\n    var flag = true;\n\n    for (var v = 0; v < Agents.length; v++) {\n      if (userAgentInfo.indexOf(Agents[v]) > 0) {\n        flag = false;\n        break;\n      }\n    }\n\n    return flag;\n  }\n\n  var initSendLive = function initSendLive(params) {\n    var retParmams = {\n      webinar_id: params.webinarId,\n      live_token: params.live_token || '',\n      nickname: params.nickname || '',\n      email: params.email || '',\n      biz_id: params.biz_id || ''\n    };\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/init',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 观看端初始化（标品）\n\n\n  var initStandardReceiveLive = function initStandardReceiveLive(params) {\n    var retParmams = {\n      webinar_id: params.webinarId,\n      visitor_id: params.visitor_id || '',\n      record_id: params.record_id || '',\n      refer: params.refer || '',\n      biz_id: params.biz_id || ''\n    };\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/watch/init',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 观看端初始化（嵌入页）\n\n\n  var initEmbeddedReceiveLive = function initEmbeddedReceiveLive(params) {\n    var retParmams = {\n      webinar_id: params.webinarId,\n      visitor_id: params.visitor_id || '',\n      record_id: params.record_id || '',\n      email: params.email || '',\n      nickname: params.nickname || '',\n      k: params.k || '',\n      state: params.state || '',\n      refer: params.refer || '',\n      sign: params.sign || '',\n      ts: params.ts || '',\n      biz_id: params.biz_id || ''\n    };\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/watch/inline-init',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 观看端初始化（SDK）\n\n\n  var initSdkReceiveLive = function initSdkReceiveLive(params) {\n    var retParmams = {\n      webinar_id: params.webinarId,\n      record_id: params.record_id || '',\n      email: params.email || '',\n      nickname: params.nickname || '',\n      pass: params.pass || '',\n      k: params.k || '',\n      refer: params.refer || '',\n      qrcode: params.qrcode || '',\n      share_id: params.share_id || '',\n      visitor_id: params.visitor_id || '',\n      biz_id: params.biz_id || ''\n    };\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/watch/sdk-init',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 开始直播\n\n\n  var startLive = function startLive(params) {\n    var _store$get = store.get('roomInitData'),\n        _store$get$webinar = _store$get.webinar,\n        webinar = _store$get$webinar === void 0 ? {} : _store$get$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/start',\n        type: 'POST',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 结束直播\n\n\n  var endLive = function endLive(params) {\n    var _store$get2 = store.get('roomInitData'),\n        _store$get2$webinar = _store$get2.webinar,\n        webinar = _store$get2$webinar === void 0 ? {} : _store$get2$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/end',\n        type: 'POST',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 进入直播前检测\n\n\n  var checkLive = function checkLive(params) {\n    var _store$get3 = store.get('roomInitData'),\n        _store$get3$webinar = _store$get3.webinar,\n        webinar = _store$get3$webinar === void 0 ? {} : _store$get3$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/check',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 获取聊天服务链接参数\n\n\n  var getChatInitOptions = function getChatInitOptions(params) {\n    var _store$get4 = store.get('roomInitData'),\n        _store$get4$webinar = _store$get4.webinar,\n        webinar = _store$get4$webinar === void 0 ? {} : _store$get4$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/get-connect',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 心跳检测\n\n\n  var liveHeartBeat = function liveHeartBeat(params) {\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/heartbeat',\n        type: 'GET',\n        data: params\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 获取live_token\n\n\n  var getLiveToken = function getLiveToken(params) {\n    var _store$get5 = store.get('roomInitData'),\n        _store$get5$webinar = _store$get5.webinar,\n        webinar = _store$get5$webinar === void 0 ? {} : _store$get5$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/get-live-token',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  }; // 获取推流地址\n\n\n  var getStreamPushAddress = function getStreamPushAddress(params) {\n    var _store$get6 = store.get('roomInitData'),\n        _store$get6$webinar = _store$get6.webinar,\n        webinar = _store$get6$webinar === void 0 ? {} : _store$get6$webinar;\n\n    var defaultParams = {\n      webinar_id: webinar.id\n    };\n    var retParmams = merge.recursive({}, defaultParams, params);\n    return new Promise(function (resolve, reject) {\n      $fetch({\n        url: '/v3/webinars/live/get-stream-push-address',\n        type: 'GET',\n        data: retParmams\n      }).then(function (res) {\n        return resolve(res);\n      })[\"catch\"](function (e) {\n        return reject(e);\n      });\n    });\n  };\n\n  var live = {\n    initSendLive: initSendLive,\n    initStandardReceiveLive: initStandardReceiveLive,\n    initEmbeddedReceiveLive: initEmbeddedReceiveLive,\n    initSdkReceiveLive: initSdkReceiveLive,\n    startLive: startLive,\n    endLive: endLive,\n    checkLive: checkLive,\n    getChatInitOptions: getChatInitOptions,\n    liveHeartBeat: liveHeartBeat,\n    getLiveToken: getLiveToken,\n    getStreamPushAddress: getStreamPushAddress\n  };\n\n  var RequestApi = function RequestApi() {\n    _classCallCheck(this, RequestApi);\n\n    this.live = live;\n  };\n\n  var requestApi = new RequestApi();\n\n  var BaseModule = /*#__PURE__*/function () {\n    function BaseModule() {\n      _classCallCheck(this, BaseModule);\n\n      _defineProperty(this, \"handlers\", {});\n    }\n\n    _createClass(BaseModule, [{\n      key: \"$on\",\n      value: // 事件添加方法，参数有事件名和事件方法\n      function $on(type, handler) {\n        // 首先判断handlers内有没有type事件容器，没有则创建一个新数组容器\n        if (!(type in this.handlers)) {\n          this.handlers[type] = [];\n        } // 将事件存入\n\n\n        this.handlers[type].push(handler);\n      } // 触发事件两个参数（事件名，参数）\n\n    }, {\n      key: \"$emit\",\n      value: function $emit(type) {\n        for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          params[_key - 1] = arguments[_key];\n        }\n\n        // 若没有注册该事件则抛出错误\n        if (!(type in this.handlers)) {\n          return new Error('未注册该事件');\n        } // 便利触发\n\n\n        this.handlers[type].forEach(function (handler) {\n          handler.apply(void 0, params);\n        });\n      } // 事件移除参数（事件名，删除的事件，若无第二个参数则删除该事件的订阅和发布）\n\n    }, {\n      key: \"$off\",\n      value: function $off(type, handler) {\n        // 无效事件抛出\n        if (!(type in this.handlers)) {\n          return new Error('无效事件');\n        }\n\n        if (!handler) {\n          // 直接移除事件\n          delete this.handlers[type];\n        } else {\n          var idx = this.handlers[type].findIndex(function (ele) {\n            return ele === handler;\n          }); // 抛出异常事件\n\n          if (idx === undefined) {\n            return new Error('无该绑定事件');\n          } // 移除事件\n\n\n          this.handlers[type].splice(idx, 1);\n\n          if (this.handlers[type].length === 0) {\n            delete this.handlers[type];\n          }\n        }\n      }\n    }]);\n\n    return BaseModule;\n  }();\n\n  var ChatModule = /*#__PURE__*/function (_BaseModule) {\n    _inherits(ChatModule, _BaseModule);\n\n    var _super = _createSuper(ChatModule);\n\n    function ChatModule() {\n      _classCallCheck(this, ChatModule);\n\n      return _super.call(this);\n    }\n    /**\r\n     * 初始化聊天 SDK\r\n     * @param {Object} customOptions 用户自定义参数\r\n     */\n\n\n    _createClass(ChatModule, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var defaultOptions = this.initDefaultOptions();\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        return new Promise(function (resolve, reject) {\n          VhallChat.createInstance(options, function (event) {\n            _this.instance = event.message;\n\n            _this.listenEvents();\n\n            resolve(event);\n          }, reject);\n        });\n      }\n      /**\r\n       * 销毁聊天实例\r\n       */\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.instance.destroy();\n        this.instance = null;\n      }\n      /**\r\n       * 获取实例化聊天的默认参数\r\n       * @returns {Object} defaultOptions 默认参数\r\n       */\n\n    }, {\n      key: \"initDefaultOptions\",\n      value: function initDefaultOptions() {\n        var isPcClient = isPc();\n\n        var _store$get = store.get('roomInitData'),\n            paasInfo = _store$get.paasInfo,\n            userInfo = _store$get.userInfo;\n\n        var defaultContext = {\n          nick_name: userInfo.nickname,\n          avatar: userInfo.avatar,\n          role_name: userInfo.role_name,\n          device_type: isPcClient ? '2' : '1',\n          // 设备类型 1手机端 2PC 0未检测\n          device_status: '0',\n          // 设备状态  0未检测 1可以上麦 2不可以上麦\n          is_banned: userInfo.is_gag,\n          // 是否禁言 1是 0否\n          watch_type: isPcClient ? '1' : '2',\n          // 1 pc  2 h5  3 app  4 是客户端\n          is_kick: userInfo.is_kick\n        };\n        var defaultOptions = {\n          context: defaultContext,\n          appId: paasInfo.paas_app_id,\n          accountId: userInfo.third_party_user_id,\n          channelId: paasInfo.channel_id,\n          token: paasInfo.paas_access_token,\n          hide: false // 是否隐身\n\n        };\n        return defaultOptions;\n      }\n      /**\r\n       * 注册聊天事件\r\n       */\n\n    }, {\n      key: \"listenEvents\",\n      value: function listenEvents() {\n        var _this2 = this;\n\n        this.instance.onRoomMsg(function (msg) {\n          // 房间消息（不对外）\n          _this2.$emit('ROOM_MSG', msg);\n        });\n        this.instance.onChat(function (msg) {\n          // 聊天消息\n          _this2.$emit('CHAT', msg);\n        });\n        this.instance.onCustomMsg(function (msg) {\n          // 自定义消息\n          _this2.$emit('CUSTOM_MSG', msg);\n        });\n        this.instance.onOffLine(function () {\n          // 连接断开\n          _this2.$emit('OFFLINE');\n        });\n        this.instance.onOnLine(function () {\n          // 连接连接上了\n          _this2.$emit('ONLINE');\n        });\n        this.instance.onDocMsg(function (msg) {\n          // 文档消息（不对外）\n          _this2.$emit('DOC_MSG');\n        });\n        this.instance.join(function (msg) {\n          // 用户加入\n          _this2.$emit('JOIN', msg);\n        });\n        this.instance.leave(function (msg) {\n          // 用户离开\n          _this2.$emit('LEFT', msg);\n        });\n      }\n      /**\r\n       * 发送聊天消息\r\n       * @param {String} data 消息体\r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"emitTextChat\",\n      value: function emitTextChat(data) {\n        var _this3 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this3.instance.emitChat(data, resolve, reject);\n        });\n      }\n      /**\r\n       * 发送自定义消息\r\n       * @param {String} data 消息体\r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"emitCustomChat\",\n      value: function emitCustomChat(data) {\n        return this.instance.emitCustomMsg(data);\n      }\n      /**\r\n       * 发送文档消息（不对外）\r\n       * @param {Object} data 消息体\r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"emitDocMsg\",\n      value: function emitDocMsg(data) {\n        return this.instance.emitDocMsg(data);\n      }\n      /**\r\n       * 发送房间消息（不对外）\r\n       * @param {Object} data 消息体\r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"emitRoomMsg\",\n      value: function emitRoomMsg(data) {\n        var retData = JSON.stringify(data);\n        return this.instance.emitRoomMsg(retData);\n      }\n      /**\r\n       * 获取用户列表信息\r\n       * @param {Object} params 分页参数\r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"getUserListInfo\",\n      value: function getUserListInfo(params) {\n        var _this4 = this;\n\n        var defaultParams = {\n          currPage: 1,\n          pageSize: 10\n        };\n        var retParams = merge.recursive({}, defaultParams, params);\n        return new Promise(function (resolve, reject) {\n          _this4.instance.getUserListInfo(retParams, resolve, reject);\n        });\n      }\n      /**\r\n       * 禁言某个用户\r\n       * @param {Object} accountId 用户 id \r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"setUserDisable\",\n      value: function setUserDisable(accountId) {\n        return new Peomise(function (resolve, reject) {\n          var param = {\n            type: VhallChat.TYPE_DISABLE,\n            targetId: accountId\n          };\n          chat.setDisable(param, resolve, reject);\n        });\n      }\n      /**\r\n       * 取消禁言某个用户\r\n       * @param {Object} accountId 用户 id \r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"setUserPermit\",\n      value: function setUserPermit(accountId) {\n        return new Peomise(function (resolve, reject) {\n          var param = {\n            type: VhallChat.TYPE_PERMIT,\n            targetId: accountId\n          };\n          chat.setDisable(param, resolve, reject);\n        });\n      }\n      /**\r\n       * 禁言频道\r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"setChannelDisable\",\n      value: function setChannelDisable() {\n        return new Peomise(function (resolve, reject) {\n          var param = {\n            type: VhallChat.TYPE_DISABLE_ALL\n          };\n          chat.setDisable(param, resolve, reject);\n        });\n      }\n      /**\r\n       * 取消禁言频道\r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"setChannelPermit\",\n      value: function setChannelPermit() {\n        return new Peomise(function (resolve, reject) {\n          var param = {\n            type: VhallChat.TYPE_PERMIT_ALL\n          };\n          chat.setDisable(param, resolve, reject);\n        });\n      }\n      /**\r\n       * 获取历史聊天消息\r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"getHistoryList\",\n      value: function getHistoryList(params) {\n        var _this5 = this;\n\n        var defaultParams = {\n          currPage: 1,\n          pageSize: 200\n        };\n        var retParams = merge.recursive({}, defaultParams, params);\n        return new Promise(function (resolve, reject) {\n          _this5.instance.getHistoryList(retParams, resolve, reject);\n        });\n      }\n      /**\r\n       * 获取房间在线信息\r\n       * @param {Object} params 分页参数\r\n       * @returns {Promise}\r\n       */\n\n    }, {\n      key: \"getOnlineInfo\",\n      value: function getOnlineInfo(params) {\n        var _this6 = this;\n\n        var defaultParams = {\n          currPage: 1,\n          pageSize: 200\n        };\n        var retParams = merge.recursive({}, defaultParams, params);\n        return new Promise(function (resolve, reject) {\n          _this6.instance.getOnlineInfo(retParams, resolve, reject);\n        });\n      }\n    }]);\n\n    return ChatModule;\n  }(BaseModule);\n\n  var DocModule = /*#__PURE__*/function (_BaseModule) {\n    _inherits(DocModule, _BaseModule);\n\n    _createSuper(DocModule);\n\n    function DocModule() {\n      var _this;\n\n      _classCallCheck(this, DocModule);\n\n      _this.instance = null;\n      _this.children = [];\n      return _possibleConstructorReturn(_this);\n    }\n\n    _createClass(DocModule, [{\n      key: \"init\",\n      value: function init() {\n        var _this2 = this;\n\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var defaultOptions = this.initDefaultOptions();\n        var options = merge.recursive({}, defaultOptions, customOptions);\n\n        var onSuccess = function onSuccess() {\n          console.log('saasSDK文档初始化成功');\n\n          _this2.$emit(CONST_VAL.DOC_SDK_READ, _this2.instance);\n        };\n\n        var onFail = function onFail() {\n          console.error('saasSDK文档初始化失败', failed.msg);\n\n          _this2.$emit(CONST_VAL.DOC_SDK_ERROR, failed.msg);\n        };\n\n        this.instance = VHDocSDK.createInstance(options, onSuccess, onFail);\n        this.listenEvents();\n      }\n    }, {\n      key: \"initDefaultOptions\",\n      value: function initDefaultOptions() {\n        isPc();\n\n        var _store$get = store.get('roomInitData'),\n            paasInfo = _store$get.paasInfo,\n            userInfo = _store$get.userInfo;\n\n        var defaultOptions = {\n          accountId: userInfo.third_party_user_id,\n          roomId: paasInfo.room_id,\n          channelId: paasInfo.channel_id,\n          // 频道id 必须\n          appId: paasInfo.paas_app_id,\n          // appId 必须\n          role: userInfo.role_name,\n          // 角色 必须\n          isVod: false,\n          // 是否是回放 必须\n          client: window.VHDocSDK.Client.PC_WEB,\n          // 客户端类型\n          token: this.token\n        };\n        return defaultOptions;\n      }\n    }, {\n      key: \"listenEvents\",\n      value: function listenEvents() {\n        var _this3 = this;\n\n        // 创建容器事件\n        this.instance.on(VHDocSDK.Event.CREATE_CONTAINER, function (data) {}); // 选择容器\n\n        this.instance.on(VHDocSDK.Event.SELECT_CONTAINER, function (data) {}); // 当前文档加载完成\n\n        this.instance.on(VHDocSDK.Event.DOCUMENT_LOAD_COMPLETE, function (data) {}); // 开关变换\n\n        this.instance.on(VHDocSDK.Event.SWITCH_CHANGE, function (status) {\n          _this3.$emit('SWITCH_CHANGE', status);\n        }); // 删除容器时候触发的事件\n\n        this.instance.on(VHDocSDK.Event.DELETE_CONTAINER, function (data) {\n          _this3.$emit('DELETE_CONTAINER');\n        }); // 所有的文档准备完成\n\n        this.instance.on(VHDocSDK.Event.ALL_COMPLETE, function () {\n          _this3.$emit('ALL_COMPLETE');\n        }); // 正在演示的文档被删除(文档不存在)\n\n        this.instance.on(VHDocSDK.Event.DOCUMENT_NOT_EXIT, function (_ref) {\n          var cid = _ref.cid,\n              docId = _ref.docId;\n\n          _this3.$emit('DOCUMENT_NOT_EXIT', {\n            cid: cid,\n            docId: docId\n          });\n        }); // 翻页事件\n\n        this.instance.on(VHDocSDK.Event.PAGE_CHANGE, function (event) {\n          _this3.$emit('PAGE_CHANGE\b', event);\n        }); // 回放文件加载完成\n\n        this.instance.on(VHDocSDK.Event.VOD_CUEPOINT_LOAD_COMPLETE, function (event) {\n          _this3.$emit('VOD_CUEPOINT_LOAD_COMPLETE', event);\n        }); // ppt文档加载完毕\n\n        this.instance.on(VHDocSDK.Event.PLAYBACKCOMPLETE, function (event) {\n          _this3.$emit('PLAYBACKCOMPLETE', event);\n        });\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        if (!this.instance) return;\n        this.instance.destroy();\n        this.instance = null;\n      }\n    }, {\n      key: \"createBoard\",\n      value: function createBoard(customOptions) {\n        var elId = this.instance.createUUID('board');\n        var defaultOptions = {\n          elId: elId,\n          // div 容器 必须\n          width: 200,\n          // div 宽度，像素单位，数值型不带px 必须\n          height: 200,\n          // div 高度，像素单位，数值型不带px 必须\n          backgroundColor: 'RGBA',\n          // 背景颜色， 支持RGB 与 RGBA， 如果全透明，舞台背景色与网页背景色相同，如 ‘#FF0000’或 ‘#FF000000’ 必须\n          noDispatch: false,\n          // 非必填，默认false，是否推送消息到远端，false为推送，true为不推送，加载远程文档时该字段应为true\n          option: {\n            // 非必填，画笔预设选项\n            graphicType: VHDocSDK.GRAPHIC.PEN,\n            // 选项请参考画笔预设值,\n            stroke: '#000',\n            // 颜色值\n            strokeWidth: 4 // 正数 Number\n\n          }\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        this.instance.createBoard(options);\n      }\n    }, {\n      key: \"creatDocument\",\n      value: function creatDocument(customOptions) {\n        var _defaultOptions;\n\n        var elId = sdk.createUUID('document'); // 容器id，必须用此方法创建，文档传入document，返回唯一id\n\n        var defaultOptions = (_defaultOptions = {\n          id: customOptions.id,\n          docId: customOptions.docId,\n          elId: elId,\n          // div 容器 必须\n          width: 200,\n          // div 宽度，像素单位，数值型不带px 必须\n          height: 200\n        }, _defineProperty(_defaultOptions, \"docId\", 'yyy'), _defineProperty(_defaultOptions, \"noDispatch\", false), _defineProperty(_defaultOptions, \"option\", {\n          // 非必填，画笔预设选项\n          graphicType: VHDocSDK.GRAPHIC.PEN,\n          // 选项请参考画笔预设值,\n          stroke: '#000',\n          // 颜色值\n          strokeWidth: 4 // 正数 Number\n\n        }), _defaultOptions);\n        merge.recursive({}, defaultOptions, customOptions);\n        sdk.createDocument(opts); // 返回promise\n      }\n    }, {\n      key: \"selectContainer\",\n      value: function selectContainer(id) {\n        this.instance.selectContainer({\n          id: id\n        });\n        this.currentCid = id;\n      }\n      /**\r\n       * \r\n       * @param {*} child is cid-ret\r\n       */\n\n    }, {\n      key: \"addChild\",\n      value: function addChild(child) {\n        this.children.push(child);\n      }\n    }, {\n      key: \"zoomIn\",\n      value: function zoomIn() {\n        this.instance.zoomIn();\n      }\n    }, {\n      key: \"zoomOut\",\n      value: function zoomOut() {\n        this.instance.zoomOut();\n      }\n    }, {\n      key: \"zoomReset\",\n      value: function zoomReset() {\n        this.instance.zoomReset();\n      }\n    }, {\n      key: \"move\",\n      value: function move() {\n        this.instance.move();\n      }\n    }, {\n      key: \"prevStep\",\n      value: function prevStep() {\n        this.instance.prevStep();\n      }\n    }, {\n      key: \"nextStep\",\n      value: function nextStep() {\n        this.instance.nextStep();\n      }\n    }]);\n\n    return DocModule;\n  }(BaseModule);\n\n  var InteractiveModule = /*#__PURE__*/function (_BaseModule) {\n    _inherits(InteractiveModule, _BaseModule);\n\n    var _super = _createSuper(InteractiveModule);\n\n    function InteractiveModule(customOptions) {\n      _classCallCheck(this, InteractiveModule);\n\n      return _super.call(this, customOptions);\n    }\n    /**\r\n     * 初始化互动sdk\r\n     * @param {Object} customOptions \r\n     * @param {*} successCb \r\n     * @param {*} failCb \r\n     * \r\n     */\n\n\n    _createClass(InteractiveModule, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n        console.log('customoptions', customOptions);\n        console.log('store', store);\n        var defaultOptions = {\n          appId: store.get('roomInitData').paasInfo.paas_app_id,\n          // 互动应用ID，必填\n          inavId: store.get('roomInitData').paasInfo.inav_id,\n          // 互动房间ID，必填\n          roomId: store.get('roomInitData').paasInfo.room_id,\n          // 如需开启旁路，必填。\n          accountId: store.get('roomInitData').userInfo.third_party_user_id,\n          // 第三方用户ID，必填\n          token: store.get('roomInitData').paasInfo.paas_access_token,\n          // access_token，必填\n          mode: VhallRTC.MODE_RTC,\n          //应用场景模式，选填，可选值参考下文【应用场景类型】。支持版本：2.3.1及以上。\n          role: VhallRTC.ROLE_HOST,\n          //用户角色，选填，可选值参考下文【互动参会角色】。当mode为rtc模式时，不需要配置role。支持版本：2.3.1及以上。\n          attributes: '',\n          // String 类型\n          autoStartBroadcast: store.get('roomInitData').userInfo.role_name == 1,\n          // 是否开启自动旁路 Boolean 类型   主持人默认开启true v2.3.5版本以上可用\n          broadcastConfig: store.get('roomInitData').userInfo.role_name == 1 ? {\n            layout: customOptions.layout || VhallRTC.CANVAS_LAYOUT_PATTERN_FLOAT_6_5D,\n            // 旁路布局，选填 默认大屏铺满，一行5个悬浮于下面\n            profile: customOptions.profile || VhallRTC.BROADCAST_VIDEO_PROFILE_1080P_1,\n            // 旁路直播视频质量参数\n            paneAspectRatio: VhallRTC.BROADCAST_PANE_ASPACT_RATIO_16_9,\n            //旁路混流窗格指定高宽比。  v2.3.2及以上\n            border: customOptions.border || {\n              // 旁路边框属性\n              width: 2,\n              color: '0x666666'\n            }\n          } : {} // 自动旁路   开启旁路直播方法所需参数\n\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        console.log(\"optionssssssssssssssssssssssssssss\", options);\n        return new Promise(function (resolve, reject) {\n          var onSuccess = function onSuccess(event) {\n            _this.instance = event.vhallrtc;\n\n            _this.listenEvents();\n\n            console.log('init interactive sdk success:', event);\n            successCb(event);\n            resolve(event);\n          };\n\n          var onFail = function onFail(event) {\n            console.log('fail:', event);\n            failCb(event);\n            reject(event);\n          };\n\n          VhallRTC.createInstance(options, onSuccess, onFail);\n        });\n      }\n    }, {\n      key: \"listenEvents\",\n      value: function listenEvents() {\n        var _this2 = this;\n\n        this.instance.on(VhallRTC.EVENT_REMOTESTREAM_ADD, function (e) {\n          // 远端流加入事件\n          _this2.$emit('interactive_REMOTESTREAM_ADD', e);\n        });\n        this.instance.on(VhallRTC.EVENT_REMOTESTREAM_REMOVED, function (e) {\n          // 远端流离开事件\n          _this2.$emit('interactive_REMOTESTREAM_REMOVED', e);\n        });\n        this.instance.on(VhallRTC.EVENT_ROOM_EXCDISCONNECTED, function (e) {\n          // 房间信令异常断开事件\n          _this2.$emit('interactive_ROOM_EXCDISCONNECTED', e);\n        });\n        this.instance.on(VhallRTC.EVENT_REMOTESTREAM_MUTE, function (e) {\n          // 远端流音视频状态改变事件\n          _this2.$emit('interactive_REMOTESTREAM_MUTE', e);\n        });\n        this.instance.on(VhallRTC.EVENT_REMOTESTREAM_FAILED, function (e) {\n          // 本地推流或订阅远端流异常断开事件\n          _this2.$emit('interactive_REMOTESTREAM_FAILED', e);\n        });\n        this.instance.on(VhallRTC.EVENT_STREAM_END, function (e) {\n          // 本地流采集停止事件(处理拔出设备和桌面共享停止时)\n          _this2.$emit('interactive_STREAM_END', e);\n        });\n        this.instance.on(VhallRTC.EVENT_STREAM_STUNK, function (e) {\n          // 本地流视频发送帧率异常事件\n          _this2.$emit('interactive_STREAM_STUNK', e);\n        });\n        this.instance.on(VhallRTC.EVENT_DEVICE_CHANGE, function (e) {\n          // 新增设备或移除设备时触发\n          _this2.$emit('interactive_DEVICE_CHANGE', e);\n        });\n      }\n      /**\r\n       * 销毁互动sdk\r\n       * @returns -- 销毁互动sdk\r\n       */\n\n    }, {\n      key: \"destroyInit\",\n      value: function destroyInit() {\n        var _this3 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this3.instance.destroyInstance({}).then(function () {\n            resolve();\n            _this3.instance = null;\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 创建本地流\r\n       * @param obt {Object} - sdk init stream base info config\r\n       * @return {Promise} - 创建成功后的promise 回调\r\n       *\r\n       */\n\n    }, {\n      key: \"createLocalStream\",\n      value: function createLocalStream() {\n        var _this4 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this4.instance.createStream(options).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            if (store.get('roomInitData').userInfo.role_name != 1) {\n              //上麦人员无法创建本地流上麦，向外抛出信息\n              var toSpeakInfo = _objectSpread2({\n                roleName: store.get('roomInitData').userInfo.role_name,\n                accountId: store.get('roomInitData').userInfo.third_party_user_id,\n                nickName: store.get('roomInitData').userInfo.nickname\n              }, error);\n\n              reject(toSpeakInfo);\n            } else {\n              reject(error);\n            }\n          });\n        });\n      }\n      /**\r\n       * 创建摄像头视频流\r\n       * @param obt {Object} - sdk init stream base info config  videoNode: 容器 audioDevice: 音频的Id videoDevice:视频的设备Id profile:视频推流的质量\r\n       * @return {Promise} - 创建成功后的promise 回调\r\n       *\r\n       */\n\n    }, {\n      key: \"createLocalVideoStream\",\n      value: function createLocalVideoStream() {\n        var _this5 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 必填，传入本地视频显示容器ID\n            audio: true,\n            // 选填，是否采集音频设备，默认为true\n            video: true,\n            // 选填，是否采集视频设备，默认为true\n            audioDevice: options.audioDevice,\n            // 选填，指定的音频设备id，默认为系统缺省\n            videoDevice: options.videoDevice,\n            // 选填，指定的视频设备id，默认为系统缺省\n            profile: VhallRTC[options.profile] || VhallRTC.RTC_VIDEO_PROFILE_1080P_16x9_H,\n            // 选填，视频质量参数，可选值参考文档中的[互动流视频质量参数表]\n            streamType: 2,\n            //选填，指定互动流类型，当需要自定义类型时可传值。如未传值，则底层自动判断： 0为纯音频，1为纯视频，2为音视频，3为屏幕共享。\n            attributes: JSON.stringify({\n              roleName: store.get('roomInitData').userInfo.role_name,\n              accountId: store.get('roomInitData').userInfo.third_party_user_id,\n              nickName: store.get('roomInitData').userInfo.nickname\n            }) //选填，自定义信息，支持字符串类型\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n          console.log('pass params::', params);\n\n          _this5.instance.createStream(params).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            if (store.get('roomInitData').userInfo.role_name != 1) {\n              //上麦人员无法创建本地流上麦，向外抛出信息\n              var toSpeakInfo = _objectSpread2({\n                roleName: store.get('roomInfo').roleName,\n                accountId: store.get('roomInfo').accountId,\n                nickName: store.get('roomInfo').nickName\n              }, error);\n\n              reject(toSpeakInfo);\n            } else {\n              reject(error);\n            }\n          });\n        });\n      }\n      /**\r\n       * 创建桌面共享流\r\n       * @param obt {Object} - sdk init stream base info config  videoNode: 容器 speaker: 是否采集扬声器 profile: 视频的质量 addConfig: 扩展配置项\r\n       * @return {Promise} - 创建成功后的promise 回调\r\n       *\r\n       */\n\n    }, {\n      key: \"createLocaldesktopStream\",\n      value: function createLocaldesktopStream() {\n        var _this6 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 必填，传入本地视频显示容器ID\n            screen: true,\n            speaker: options.speaker || false,\n            // 桌面共享时是否分享桌面音频(如为true，则chrome浏览器弹框左下角将显示“分享音频”选框)，默认为false\n            profile: options.profile || VhallRTC.RTC_VIDEO_PROFILE_1080P_16x9_H,\n            // 选填，视频质量参数，可选值参考文档中的[互动流视频质量参数表]\n            streamType: 3,\n            //选填，指定互动流类型，当需要自定义类型时可传值。如未传值，则底层自动判断： 0为纯音频，1为纯视频，2为音视频，3为屏幕共享。\n            attributes: JSON.stringify({\n              roleName: store.get('roomInitData').userInfo.role_name,\n              accountId: store.get('roomInitData').userInfo.third_party_user_id,\n              nickName: store.get('roomInitData').userInfo.nickname\n            }) //选填，自定义信息，支持字符串类型\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this6.instance.createStream(params).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            if (store.get('roomInitData').userInfo.role_name != 1) {\n              //上麦人员无法创建本地流上麦，向外抛出信息\n              var toSpeakInfo = _objectSpread2({\n                roleName: store.get('roomInitData').userInfo.role_name,\n                accountId: store.get('roomInitData').userInfo.third_party_user_id,\n                nickName: store.get('roomInitData').userInfo.nickname\n              }, error);\n\n              reject(toSpeakInfo);\n            } else {\n              reject(error);\n            }\n          });\n        });\n      }\n      /**\r\n       * 创建本地音频流\r\n       * @param obt {Object} - sdk init stream base info config  videoNode: 容器 audioDevice: 音频Id addConfig: 扩展配置项\r\n       * @return {Promise} - 创建成功后的promise 回调\r\n       *\r\n       */\n\n    }, {\n      key: \"createLocalAudioStream\",\n      value: function createLocalAudioStream() {\n        var _this7 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 必填，传入本地视频显示容器ID\n            audio: true,\n            // 选填，是否采集音频设备，默认为true\n            video: false,\n            // 选填，是否采集视频设备，默认为true\n            audioDevice: options.audioDevice,\n            // 选填，指定的音频设备id，默认为系统缺省\n            showControls: false,\n            // 选填，是否开启视频原生控制条，默认为false\n            attributes: JSON.stringify({\n              account_id: store.get('roomInfo').accountId,\n              nick_name: store.get('roomInfo').nickName,\n              role_name: store.get('roomInfo').roleName\n            }),\n            //选填，自定义信息，支持字符串类型\n            streamType: 0 //选填，指定互动流类型，当需要自定义类型时可传值。如未传值，则底层自动判断： 0为纯音频，1为纯视频，2为音视频，3为屏幕共享。\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this7.instance.createStream(params).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 创建图片推流\r\n       * @param obt {Object} - sdk init stream base info config  videoNode: 容器 videoTrack: MediaStreamTrack对象,采集图像 addConfig: 扩展配置项\r\n       * @return {Promise} - 创建成功后的promise 回调\r\n       *\r\n       */\n\n    }, {\n      key: \"createLocalPhotoStream\",\n      value: function createLocalPhotoStream() {\n        var _this8 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 传入本地视频显示容器，必填\n            audio: true,\n            video: true,\n            //如参会者没有摄像头，则传入false\n            videoTrack: options.videoTrack //MediaStreamTrack对象\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this8.instance.createStream(params).then(function (data) {\n            resolve(data.streamId);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 销毁本地流\r\n       * @param {String} streamId -- 要销毁的流Id\r\n       * @returns \r\n       */\n\n    }, {\n      key: \"destroyStream\",\n      value: function destroyStream() {\n        var _this9 = this;\n\n        var streamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this9.instance.destroyStream({\n            streamId: streamId\n          }).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 推送本地流到远端\r\n       * @param {Object} options publish stream base info config  streamId：要推的流Id，accountId:用户Id\r\n       * @return {Promise} - 推流成功后的promise 回调\r\n       */\n\n    }, {\n      key: \"publishStream\",\n      value: function publishStream() {\n        var _this10 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this10.instance.publish({\n            streamId: options.streamId,\n            accountId: options.accountId\n          }).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (errInfo) {\n            reject(errInfo);\n          });\n        });\n      }\n      /**\r\n       * 取消推送到远端的流\r\n       * @param {String} streamId 要取消推的流Id\r\n       * @returns {Promise} - 取消推流成功后的promise 回调\r\n      */\n\n    }, {\n      key: \"unpublishStream\",\n      value: function unpublishStream() {\n        var _this11 = this;\n\n        var streamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this11.instance.unpublish({\n            streamId: streamId\n          }).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 订阅远端流\r\n       * @param {Object} options -- streamId:订阅的流id videoNode: 页面显示的容器 mute: 远端流的音视频 dual: 大小流 0小流 1大流\r\n       * @returns {Promise} - 订阅成功后的promise 回调\r\n       */\n\n    }, {\n      key: \"subscribeStream\",\n      value: function subscribeStream() {\n        var _this12 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            videoNode: options.videoNode,\n            // 传入本地视频显示容器，必填\n            streamId: options.streamId,\n            mute: {\n              // 选填，订阅成功后立即mute远端流\n              audio: options.mute.audio || false,\n              // 是否关闭音频，默认false\n              video: options.mute.audio || false // 是否关闭视频，默认false\n\n            },\n            dual: options.dual || 1 // 双流订阅选项， 0为小流， 1为大流(默认)\n\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this12.instance.subscribe(params).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 取消订阅远端流\r\n       * @param {String} streamId -- 要取消订阅的流Id \r\n       * @returns {Promise} - 取消订阅成功后的promise 回调\r\n       */\n\n    }, {\n      key: \"unSubscribeStream\",\n      value: function unSubscribeStream() {\n        var _this13 = this;\n\n        var streamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this13.instance.unsubscribe({\n            streamId: streamId\n          }).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 设置大小流\r\n       * @param {Object} options streamId: 需要设置的流Id  dual: 0为小流 1为大流\r\n       * @returns {Promise} - 设置订阅大小流成功后的promise回调\r\n       */\n\n    }, {\n      key: \"setDual\",\n      value: function setDual() {\n        var _this14 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var params = {\n            streamId: options.streamId,\n            dual: options.dual\n          };\n\n          _this14.instance.setDual(params).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 改变视频的禁用和启用\r\n       * @param {Object} options streamId: 对哪一路流进行操作的流Id  isMute: true为禁用，false为启用\r\n       * @returns {Promise} - 改变视频的禁用与开启后的promise 回调\r\n       */\n\n    }, {\n      key: \"muteVideo\",\n      value: function muteVideo() {\n        var _this15 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var params = {\n            streamId: options.streamId,\n            isMute: options.isMute\n          };\n\n          _this15.instance.muteVideo(params).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 改变音频的禁用和启用\r\n       * @param {Object} options streamId: 对哪一路流进行操作的流Id isMute: true为禁用，false为启用\r\n       * @returns {Promise} - 改变音频的禁用与开启后的promise 回调\r\n       */\n\n    }, {\n      key: \"muteAudio\",\n      value: function muteAudio() {\n        var _this16 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var params = {\n            streamId: options.streamId,\n            isMute: options.isMute\n          };\n\n          _this16.instance.muteAudio(params).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 开启旁路\r\n       * @param {Object} options --  layout: 旁路布局  profile: 旁路直播视频质量参数 paneAspectRatio:旁路混流窗格指定高宽比 border: 旁路边框属性\r\n       * @returns {Promise} - 开启旁路后的promise回调\r\n       */\n\n    }, {\n      key: \"startBroadCast\",\n      value: function startBroadCast() {\n        var _this17 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var addConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Promise(function (resolve, reject) {\n          var defaultOptions = {\n            layout: options.layout || VhallRTC.CANVAS_LAYOUT_PATTERN_FLOAT_6_5D,\n            // 旁路布局，选填 默认大屏铺满，一行5个悬浮于下面\n            profile: options.profile || VhallRTC.BROADCAST_VIDEO_PROFILE_1080P_1,\n            // 旁路直播视频质量参数\n            paneAspectRatio: VhallRTC.BROADCAST_PANE_ASPACT_RATIO_16_9,\n            //旁路混流窗格指定高宽比。  v2.3.2及以上\n            border: options.border || {\n              // 旁路边框属性\n              width: 2,\n              color: '0x666666'\n            }\n          };\n          var params = merge.recursive({}, defaultOptions, addConfig);\n\n          _this17.instance.startBroadCast(params).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 停止旁路\r\n       * @returns {Promise} - 停止旁路后的promise回调\r\n       */\n\n    }, {\n      key: \"stopBroadCast\",\n      value: function stopBroadCast() {\n        var _this18 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this18.instance.stopBroadCast().then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 动态配置指定旁路布局模板\r\n       * @param {Object} options --  layout: 指定旁路布局模板\r\n       * @returns {Promise} - 动态配置指定旁路布局模板的promise回调\r\n       */\n\n    }, {\n      key: \"setBroadCastLayout\",\n      value: function setBroadCastLayout() {\n        var _this19 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this19.instance.setBroadCastLayout({\n            layout: options.layout || VhallRTC.CANVAS_LAYOUT_PATTERN_FLOAT_6_5D\n          }).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 动态配置旁路主屏\r\n       * @param {String} mainScreenStreamId -- 将哪路流设置成主屏的流Id\r\n       * @returns {Promise} - 动态配置旁路主屏的promise回调\r\n       */\n\n    }, {\n      key: \"setBroadCastScreen\",\n      value: function setBroadCastScreen() {\n        var _this20 = this;\n\n        var mainScreenStreamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this20.instance.setBroadCastScreen({\n            mainScreenStreamId: mainScreenStreamId\n          }).then(function () {\n            resolve();\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 获取全部音视频列表\r\n       * @returns {Promise} - 获取全部音视频列表的promise回调\r\n       */\n\n    }, {\n      key: \"getDevices\",\n      value: function getDevices() {\n        var _this21 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this21.instance.getDevices().then(function (devices) {\n            resolve(devices);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 获取摄像头列表\r\n       * @returns {Promise} - 获取摄像头列表的promise回调\r\n       */\n\n    }, {\n      key: \"getCameras\",\n      value: function getCameras() {\n        var _this22 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this22.instance.getCameras().then(function (devices) {\n            resolve(devices);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 获取麦克风列表\r\n       * @returns {Promise} - 获取麦克风列表的promise回调\r\n       */\n\n    }, {\n      key: \"getMicrophones\",\n      value: function getMicrophones() {\n        var _this23 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this23.instance.getMicrophones().then(function (devices) {\n            resolve(devices);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 获取扬声器列表\r\n       * @returns {Promise} - 获取扬声器列表的promise回调\r\n       */\n\n    }, {\n      key: \"getSpeakers\",\n      value: function getSpeakers() {\n        var _this24 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this24.instance.getSpeakers().then(function (devices) {\n            resolve(devices);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 获取设备的分辨率\r\n       * @param {String} deviceId -- 摄像头设备的Id\r\n       * @returns {Promise} - 分辨率获取之后的promise回调\r\n       */\n\n    }, {\n      key: \"getVideoConstraints\",\n      value: function getVideoConstraints(deviceId) {\n        var _this25 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this25.instance.getVideoConstraints({\n            deviceId: deviceId\n          }, function (data) {\n            resolve(data);\n          }, function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 配置本地流视频质量参数\r\n       * @param {Object} options --  streamId: 切换本地流Id profile: 必填，互动视频质量参数\r\n       * @returns {Promise} - 配置本地流视频质量参数的promise回调\r\n       */\n\n    }, {\n      key: \"setVideoProfile\",\n      value: function setVideoProfile() {\n        var _this26 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          _this26.instance.setVideoProfile({\n            streamId: options.streamId,\n            profile: options.profile\n          }, function (data) {\n            resolve(data);\n          }, function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 获取房间流信息\r\n       * @param {Object} options --  streamId: 切换本地流Id profile: 必填，互动视频质量参数\r\n       * @returns {Promise} - 配置本地流视频质量参数的promise回调\r\n       */\n\n    }, {\n      key: \"getRoomStreams\",\n      value: function getRoomStreams() {\n        return this.instance.getRoomStreams();\n      }\n      /**\r\n       * 是否支持桌面共享\r\n       * @returns Boolean\r\n       */\n\n    }, {\n      key: \"isScreenShareSupported\",\n      value: function isScreenShareSupported() {\n        return this.instance.isScreenShareSupported();\n      }\n      /**\r\n       * 检查当前浏览器支持性\r\n       * @returns Boolean\r\n       */\n\n    }, {\n      key: \"checkSystemRequirements\",\n      value: function checkSystemRequirements() {\n        var _this27 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this27.instance.checkSystemRequirements().then(function (data) {\n            resolve(data.result);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 获取上下行丢包率\r\n       * @returns  data中有 upLossRate 上行丢包率   downLossRate 下行丢包率\r\n       */\n\n    }, {\n      key: \"getPacketLossRate\",\n      value: function getPacketLossRate() {\n        var _this28 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this28.instance.getPacketLossRate().then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 获取流上下行丢包率\r\n       * @returns  data中有 \r\n       */\n\n    }, {\n      key: \"getStreamPacketLoss\",\n      value: function getStreamPacketLoss() {\n        var _this29 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this29.instance.getStreamPacketLoss().then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n      /**\r\n       * 获取流音频能量\r\n       * @returns  \r\n       */\n\n    }, {\n      key: \"getAudioLevel\",\n      value: function getAudioLevel() {\n        var _this30 = this;\n\n        var streamId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        return new Promise(function (resolve, reject) {\n          _this30.instance.getAudioLevel({\n            streamId: streamId\n          }).then(function (data) {\n            resolve(data);\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        });\n      }\n    }]);\n\n    return InteractiveModule;\n  }(BaseModule);\n\n  var PlayerModule = /*#__PURE__*/function (_BaseModule) {\n    _inherits(PlayerModule, _BaseModule);\n\n    var _super = _createSuper(PlayerModule);\n\n    function PlayerModule(customOptions) {\n      var _this;\n\n      _classCallCheck(this, PlayerModule);\n\n      _this = _super.call(this, customOptions);\n\n      _this.init(customOptions);\n\n      _this.isPlaying = false;\n      return _this;\n    }\n\n    _createClass(PlayerModule, [{\n      key: \"init\",\n      value: function init() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n        if (customOptions.type === 'live') {\n          this.initLivePlayer(customOptions, successCb, failCb);\n        }\n\n        if (customOptions.type === 'vod') {\n          this.initVodPlayer(customOptions, successCb, failCb);\n        }\n      }\n    }, {\n      key: \"createInstance\",\n      value: function createInstance() {\n        var _this2 = this;\n\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n        var _store$get = store.get('roomInitData'),\n            paasInfo = _store$get.paasInfo,\n            userInfo = _store$get.userInfo;\n\n        var defaultOptions = {\n          appId: paasInfo.paas_app_id,\n          accountId: userInfo.third_party_user_id,\n          token: paasInfo.paas_access_token,\n          type: 'live'\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        console.log('options:', options);\n\n        var onSuccess = function onSuccess(event) {\n          _this2.instance = event.vhallplayer;\n\n          _this2.listenEvents();\n\n          successCb(event);\n        };\n\n        var onFail = function onFail(event) {\n          console.log('fail:', event);\n          failCb(event);\n        };\n\n        VhallPlayer.createInstance(options, onSuccess, onFail);\n      }\n    }, {\n      key: \"initLivePlayer\",\n      value: function initLivePlayer() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n        var _store$get2 = store.get('roomInitData'),\n            paasInfo = _store$get2.paasInfo;\n            _store$get2.userInfo;\n\n        var defaultOptions = {\n          type: 'live',\n          language: 'zh',\n          liveOption: {\n            roomId: paasInfo.room_id,\n            forceMSE: true,\n            type: 'flv'\n          }\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        this.createInstance(options, successCb, failCb);\n      }\n    }, {\n      key: \"initVodPlayer\",\n      value: function initVodPlayer() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var successCb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var failCb = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n        var defaultOptions = {\n          appId: '',\n          accountId: '',\n          token: '',\n          type: 'live',\n          vodOption: {\n            forceMSE: true,\n            recordId: ''\n          }\n        };\n        var options = merge.recursive({}, defaultOptions, customOptions);\n        this.createInstance(options, successCb, failCb);\n      }\n    }, {\n      key: \"listenEvents\",\n      value: function listenEvents() {\n        var _this3 = this;\n\n        this.instance.on(VhallPlayer.CURRENTTIME_CHANGE, function (e) {\n          // 当前时间改变\n          _this3.$emit('CURRENTTIME_CHANGE', e);\n        });\n        this.instance.on(VhallPlayer.TIMEUPDATE, function (e) {\n          // 播放时间改变时触发\n          _this3.$emit('TIMEUPDATE', e);\n        });\n        this.instance.on(VhallPlayer.ENDED, function (e) {\n          // 播放完毕\n          _this3.$emit('ENDED', e);\n        });\n        this.instance.on(VhallPlayer.ERROR, function (e) {\n          // 播放器自身出现错误时触发\n          _this3.$emit('ERROR', e);\n        });\n        this.instance.on(VhallPlayer.LOADED, function (e) {\n          // 视频加载完成时触发\n          _this3.$emit('LOADED', e);\n        });\n        this.instance.on(VhallPlayer.PLAY, function (e) {\n          // 点播开始播放时触发\n          _this3.$emit('PLAY', e);\n        });\n        this.instance.on(VhallPlayer.PAUSE, function (e) {\n          // 点播暂停播放时触发\n          _this3.$emit('PAUSE', e);\n        });\n        this.instance.on(VhallPlayer.LAG_REPORT, function (e) {\n          // 视频卡顿时触发\n          _this3.$emit('LAG_REPORT', e);\n        });\n        this.instance.on(VhallPlayer.LAG_RECOVER, function (e) {\n          // 视频卡顿恢复时触发\n          _this3.$emit('LAG_RECOVER', e);\n        });\n        this.instance.on(VhallPlayer.FULLSCREEN_CHANGE, function (e) {\n          // 全屏状态改变时触发\n          _this3.$emit('FULLSCREEN_CHANGE', e);\n        });\n        this.instance.on(VhallPlayer.MUTE_CHANGE, function (e) {\n          // 静音状态被改变时触发\n          _this3.$emit('MUTE_CHANGE', e);\n        });\n        this.instance.on(VhallPlayer.LOOP_CHANGE, function (e) {\n          // 点播循环状态被改变时触发\n          _this3.$emit('LOOP_CHANGE', e);\n        });\n        this.instance.on(VhallPlayer.DEFINITION_CHANGE, function (e) {\n          // 当前清晰度改变时触发(卡顿时自动切清晰度触发，手动切换不触发)\n          _this3.$emit('DEFINITION_CHANGE', e);\n        });\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.instance.destroy();\n        this.instance = null;\n      }\n    }, {\n      key: \"play\",\n      value: function play() {\n        return this.instance.play();\n      }\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        return this.instance.pause();\n      }\n    }, {\n      key: \"isPause\",\n      value: function isPause() {\n        return this.instance.getIsPause();\n      }\n    }, {\n      key: \"getQualitys\",\n      value: function getQualitys() {\n        // 获取清晰度列表\n        return this.instance.getQualitys();\n      }\n    }, {\n      key: \"getCurrentQuality\",\n      value: function getCurrentQuality() {\n        // 获取当前视频清晰度\n        return this.instance.getCurrentQuality();\n      }\n    }, {\n      key: \"setQuality\",\n      value: function setQuality(val, failure) {\n        // 设置当前视频清晰度\n        return this.instance.setQuality(val, failure);\n      }\n    }, {\n      key: \"enterFullScreen\",\n      value: function enterFullScreen(failure) {\n        // 进入全屏\n        return this.instance.enterFullScreen(failure);\n      }\n    }, {\n      key: \"exitFullScreen\",\n      value: function exitFullScreen(failure) {\n        // 退出全屏\n        return this.instance.exitFullScreen(failure);\n      }\n    }, {\n      key: \"setMute\",\n      value: function setMute(isMute, failure) {\n        return this.instance.setMute(isMute, failure);\n      }\n    }, {\n      key: \"getVolume\",\n      value: function getVolume() {\n        // 获取音量\n        return this.instance.getVolume();\n      }\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(volume, failure) {\n        // 设置音量\n        return this.instance.setVolume(volume, failure);\n      }\n    }, {\n      key: \"getDuration\",\n      value: function getDuration(failure) {\n        // 获取当前视频总时长\n        return this.instance.getDuration(failure);\n      }\n    }, {\n      key: \"getCurrentTime\",\n      value: function getCurrentTime(failure) {\n        // 获取当前视频播放时间\n        return this.instance.getCurrentTime(failure);\n      }\n    }, {\n      key: \"setCurrentTime\",\n      value: function setCurrentTime(time, failure) {\n        // 设置当前播放时间\n        return this.instance.setCurrentTime(time, failure);\n      }\n    }, {\n      key: \"getUsableSpeed\",\n      value: function getUsableSpeed(failure) {\n        // 获取当前可选倍速\n        return this.instance.getUsableSpeed(failure);\n      }\n    }, {\n      key: \"setPlaySpeed\",\n      value: function setPlaySpeed(val, failure) {\n        // 设置倍速播放\n        return this.instance.setPlaySpeed(val, failure);\n      }\n    }, {\n      key: \"openControls\",\n      value: function openControls(isOpen) {\n        // 开关默认控制条\n        return this.instance.openControls(isOpen);\n      }\n    }, {\n      key: \"openUI\",\n      value: function openUI(isOpen) {\n        return this.instance.openUI(isOpen);\n      }\n    }, {\n      key: \"setResetVideo\",\n      value: function setResetVideo() {\n        var videoDom = document.getElementById(this.params.videoNode);\n\n        if (videoDom && this.instance) {\n          this.instance.setSize({\n            width: videoDom.offsetWidth,\n            height: videoDom.offsetHeight\n          });\n        }\n      }\n    }, {\n      key: \"setBarrageInfo\",\n      value: function setBarrageInfo(option) {\n        return this.instance.setBarrageInfo(option, function (err) {\n          Vlog.error(err);\n        });\n      }\n    }, {\n      key: \"addBarrage\",\n      value: function addBarrage(content) {\n        return this.instance.addBarrage(content, function (err) {\n          Vlog.error(err);\n        });\n      }\n    }, {\n      key: \"toggleBarrage\",\n      value: function toggleBarrage(open) {\n        if (!this.instance) return;\n\n        if (open) {\n          this.instance.openBarrage();\n        } else {\n          this.instance.closeBarrage();\n        }\n      }\n    }, {\n      key: \"toggleSubtitle\",\n      value: function toggleSubtitle(open) {\n        if (this.instance && this.params.recordId) {\n          if (open) {\n            // 开启点播字幕(仅点播可用)\n            this.instance.openSubtitle();\n          } else {\n            // 关闭点播字幕(仅点播可用)\n            this.instance.closeSubtitle();\n          }\n        }\n      }\n    }]);\n\n    return PlayerModule;\n  }(BaseModule);\n\n  var initLoader = function initLoader() {\n    Promise.all([mountSDK('https://static.vhallyun.com/jssdk/vhall-jssdk-player/latest/vhall-jssdk-player-2.3.8.js'), mountSDK('https://static.vhallyun.com/jssdk/vhall-jssdk-chat/latest/vhall-jssdk-chat-2.1.3.js'), mountSDK('https://static.vhallyun.com/jssdk/vhall-jssdk-interaction/latest/vhall-jssdk-interaction-2.3.3.js')]).then(function (res) {\n    });\n  };\n\n  var VhallSaasSDK = /*#__PURE__*/function () {\n    function VhallSaasSDK() {\n      _classCallCheck(this, VhallSaasSDK);\n\n      this.msgBus = null;\n      this.request = requestApi;\n      this.baseState = store;\n    }\n\n    _createClass(VhallSaasSDK, [{\n      key: \"init\",\n      value: function init() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n          clientType: 'send',\n          receiveType: 'standard'\n        };\n        this.setRequestConfig(options);\n        this.setClientType(options.clientType);\n\n        if (options.clientType === 'send') {\n          return this.initSendLive(options);\n        } else {\n          return this.initReceiveLive(options);\n        }\n      }\n    }, {\n      key: \"initSendLive\",\n      value: function initSendLive(options) {\n        var _this = this;\n\n        return new Promise(function (resolve, reject) {\n          _this.request.live.initSendLive(options).then(function (res) {\n            if (res.code === 200) {\n              store.set('roomInitData', getRoomInfo(res));\n              resolve(res);\n            } else {\n              reject(res);\n            }\n          });\n        });\n      }\n    }, {\n      key: \"initReceiveLive\",\n      value: function initReceiveLive(options) {\n        var _this2 = this;\n\n        var receiveApi = {\n          standard: 'initStandardReceiveLive',\n          embed: 'initEmbeddedReceiveLive',\n          sdk: 'initSdkReceiveLive'\n        };\n        return new Promise(function (resolve, reject) {\n          _this2.request.live[receiveApi[options.receiveType]](options).then(function (res) {\n            if (res.code === 200) {\n              store.set('roomInitData', getRoomInfo(res));\n              resolve(res);\n            } else {\n              reject(res);\n            }\n          });\n        });\n      }\n    }, {\n      key: \"setClientType\",\n      value: function setClientType(clientType) {\n        if (clientType !== 'send' && clientType !== 'receive') {\n          throw new TypeError('clientType is invalid');\n        }\n\n        store.set('clientType', clientType);\n      }\n    }, {\n      key: \"setRequestConfig\",\n      value: function setRequestConfig(options) {\n        if (options.development) {\n          setBaseUrl('https://t-saas-dispatch.vhall.com');\n        } else {\n          setBaseUrl('https://saas-api.vhall.com');\n        }\n\n        setToken(options.token, options.liveToken);\n\n        if (options.requestHeaders) {\n          setRequestHeaders(options.requestHeaders);\n        }\n      }\n    }, {\n      key: \"isReady\",\n      value: function isReady() {\n        return loadSuccess === true;\n      }\n    }, {\n      key: \"createPlayer\",\n      value: function createPlayer() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var instance = new PlayerModule(options);\n          resolve(instance);\n        });\n      }\n    }, {\n      key: \"createInteractive\",\n      value: function createInteractive() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var instance = new InteractiveModule(options);\n          instance.init(options).then(function (res) {\n            resolve(instance);\n          });\n        });\n      }\n    }, {\n      key: \"createChat\",\n      value: function createChat() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var instance = new ChatModule();\n          instance.init(options).then(function (res) {\n            resolve(instance);\n          });\n        });\n      }\n    }, {\n      key: \"createDoc\",\n      value: function createDoc() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return new Promise(function (resolve, reject) {\n          var instance = new DocModule(options);\n          resolve(instance);\n        });\n      }\n    }]);\n\n    return VhallSaasSDK;\n  }();\n\n  VhallSaasSDK.requestApi = requestApi;\n  initLoader();\n\n  window.VhallSaasSDK = VhallSaasSDK;\n\n}));\n//# sourceMappingURL=sdk.js.map\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isPlainObject = exports.clone = exports.recursive = exports.merge = exports.main = void 0;\r\nmodule.exports = exports = main;\r\nexports.default = main;\r\nfunction main() {\r\n    var items = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        items[_i] = arguments[_i];\r\n    }\r\n    return merge.apply(void 0, items);\r\n}\r\nexports.main = main;\r\nmain.clone = clone;\r\nmain.isPlainObject = isPlainObject;\r\nmain.recursive = recursive;\r\nfunction merge() {\r\n    var items = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        items[_i] = arguments[_i];\r\n    }\r\n    return _merge(items[0] === true, false, items);\r\n}\r\nexports.merge = merge;\r\nfunction recursive() {\r\n    var items = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        items[_i] = arguments[_i];\r\n    }\r\n    return _merge(items[0] === true, true, items);\r\n}\r\nexports.recursive = recursive;\r\nfunction clone(input) {\r\n    if (Array.isArray(input)) {\r\n        var output = [];\r\n        for (var index = 0; index < input.length; ++index)\r\n            output.push(clone(input[index]));\r\n        return output;\r\n    }\r\n    else if (isPlainObject(input)) {\r\n        var output = {};\r\n        for (var index in input)\r\n            output[index] = clone(input[index]);\r\n        return output;\r\n    }\r\n    else {\r\n        return input;\r\n    }\r\n}\r\nexports.clone = clone;\r\nfunction isPlainObject(input) {\r\n    return input && typeof input === 'object' && !Array.isArray(input);\r\n}\r\nexports.isPlainObject = isPlainObject;\r\nfunction _recursiveMerge(base, extend) {\r\n    if (!isPlainObject(base))\r\n        return extend;\r\n    for (var key in extend) {\r\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype')\r\n            continue;\r\n        base[key] = (isPlainObject(base[key]) && isPlainObject(extend[key])) ?\r\n            _recursiveMerge(base[key], extend[key]) :\r\n            extend[key];\r\n    }\r\n    return base;\r\n}\r\nfunction _merge(isClone, isRecursive, items) {\r\n    var result;\r\n    if (isClone || !isPlainObject(result = items.shift()))\r\n        result = {};\r\n    for (var index = 0; index < items.length; ++index) {\r\n        var item = items[index];\r\n        if (!isPlainObject(item))\r\n            continue;\r\n        for (var key in item) {\r\n            if (key === '__proto__' || key === 'constructor' || key === 'prototype')\r\n                continue;\r\n            var value = isClone ? clone(item[key]) : item[key];\r\n            result[key] = isRecursive ? _recursiveMerge(result[key], value) : value;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n","import merge from \"merge\";\r\n\r\n// 判断终端类型\r\nfunction isPc() {\r\n    let userAgentInfo = navigator.userAgent;\r\n    let Agents = [\r\n        \"Android\",\r\n        \"iPhone\",\r\n        \"SymbianOS\",\r\n        \"Windows Phone\",\r\n        \"iPad\",\r\n        \"iPod\",\r\n    ];\r\n    let flag = true;\r\n    for (let v = 0; v < Agents.length; v++) {\r\n        if (userAgentInfo.indexOf(Agents[v]) > 0) {\r\n        flag = false;\r\n        break;\r\n        }\r\n    }\r\n    return flag;\r\n}\r\n\r\n// 上传文件\r\nfunction uploadFile(options, onChange) {\r\n    var inputObj=document.createElement('input')\r\n    inputObj.setAttribute('id','file');\r\n    inputObj.setAttribute('type','file');\r\n    inputObj.setAttribute('name','file');\r\n    inputObj.setAttribute(\"style\",'height:0px; position: absolute;');\r\n    inputObj.setAttribute(\"accept\",options.accept);\r\n    document.body.appendChild(inputObj);\r\n    inputObj.value;\r\n    inputObj.click();\r\n    inputObj.addEventListener('change', function (e) {\r\n        onChange && onChange(e)\r\n    })\r\n}\r\n\r\n// 判断浏览器是否是 chrome88 以上版本\r\nfunction isChrome88() {\r\n    let chromeReg = /Chrome\\/(\\d{2})[.\\d]+\\sSafari\\/[.\\d]+$/gi;\r\n    let chromeResult = chromeReg.exec(navigator.userAgent);\r\n    return chromeResult && chromeResult.length > 0 && chromeResult[1] > 87\r\n}\r\n\r\nexport { merge, isPc, uploadFile, isChrome88 };\r\n","\r\n/**\r\n * ajax请求 jsonp处理\r\n * 1.jsonp 请求格式\r\n *   $fetch({\r\n *      url:'',\r\n *      type: 'GET',\r\n *      jsonp: 'callback',\r\n *      data: {\r\n *        name: 123\r\n *      }\r\n *   })\r\n */\r\nimport { isPc } from './index.js'\r\n\r\n\r\nlet BUSE_URL = 'https://t-saas-dispatch.vhall.com'\r\nlet TOKEN = ''\r\nlet LIVETOKEN = ''\r\nlet HEADERS = {}\r\n\r\n\r\nfunction setBaseUrl(url) {\r\n    BUSE_URL = url\r\n}\r\nfunction setToken(token, livetoken) {\r\n    console.log(token, livetoken, 888)\r\n    TOKEN = token\r\n    LIVETOKEN = livetoken\r\n}\r\nfunction setRequestHeaders(options) {\r\n    Object.assign(HEADERS,options)\r\n}\r\n\r\nfunction $fetch(options) {\r\n    // if (process.env.NODE_ENV != 'development') {\r\n    //\r\n    // }\r\n    options.url = BUSE_URL + options.url\r\n    console.log('接口环境', options.url)\r\n\r\n    return new Promise((resolve, reject) => {\r\n        options = options || {}\r\n        if (options.data) {\r\n            if (LIVETOKEN) {\r\n                options.data.live_token = LIVETOKEN\r\n            }\r\n            options.data = formatParams(options.data)\r\n        }\r\n        options.dataType ? jsonp(options, resolve, reject) : json(options, resolve, reject)\r\n    })\r\n}\r\n\r\n// JSON请求\r\nfunction json(params, success, fail) {\r\n    let xhr = null\r\n    // interactToken = sessionStorage.getItem('interact-token') || '',\r\n    // grayId = sessionStorage.getItem('grayId') || '',\r\n    // vhallJSSDKUserInfo = localStorage.getItem('vhallJSSDKUserInfo') ? JSON.parse(localStorage.getItem('vhallJSSDKUserInfo')) : {},\r\n    params.type = (params.type || 'GET').toUpperCase()\r\n\r\n    if (window.XMLHttpRequest) {\r\n        xhr = new XMLHttpRequest()\r\n    } else {\r\n        xhr = new ActiveXObject('Microsoft.XMLHTTP')\r\n    }\r\n\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4) {\r\n            let status = xhr.status\r\n            if (status >= 200 && status < 300) {\r\n                let response = ''\r\n                let type = xhr.getResponseHeader('Content-type')\r\n\r\n                if (type.indexOf('xml') !== -1 && xhr.responseXML) {\r\n                    response = xhr.responseXML\r\n                } else if (type === 'application/json' || type === 'application/json;charset=UTF-8') {\r\n                    response = JSON.parse(xhr.responseText)\r\n\r\n                } else {\r\n                    response = xhr.responseText\r\n                }\r\n                success && success(response)\r\n            } else {\r\n                fail && fail(status)\r\n            }\r\n        }\r\n    }\r\n\r\n    if (params.type == 'GET') {\r\n        if (params.data) {\r\n            xhr.open(params.type, params.url + '?' + params.data, true)\r\n        } else {\r\n            xhr.open(params.type, params.url, true)\r\n        }\r\n    } else if (params.type == 'POST') {\r\n        xhr.open(params.type, params.url, true)\r\n    }\r\n\r\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\r\n    if (!LIVETOKEN) {\r\n        TOKEN && xhr.setRequestHeader('token', TOKEN)\r\n    }\r\n    console.log('HEADERS', HEADERS)\r\n    if (HEADERS) {\r\n        Object.getOwnPropertyNames(HEADERS).forEach(item => {\r\n            xhr.setRequestHeader(item, HEADERS[item])\r\n        })\r\n    }\r\n    // if (params.headers && params.headers.activeType == 'new') {\r\n    //     xhr.setRequestHeader('platform', 18)\r\n    //     xhr.setRequestHeader('request-id', uuid())\r\n    //     grayId && xhr.setRequestHeader('gray-id', grayId)\r\n    //     interactToken && xhr.setRequestHeader('interact-token', interactToken)\r\n    //     token && xhr.setRequestHeader('token', token)\r\n    // }\r\n    if (params.type == 'GET') {\r\n        xhr.send(null)\r\n    } else {\r\n        xhr.send(params.data)\r\n    }\r\n}\r\n\r\n// JSONP请求\r\nfunction jsonp(params, success, fail) {\r\n    let callbackName = params.dataType\r\n    params['callback'] = callbackName\r\n\r\n    let script = document.createElement('script')\r\n    script.type = \"text/javascript\"\r\n    script.charset = \"utf-8\"\r\n    document.body.appendChild(script)\r\n\r\n    // 创建回调函数\r\n    window[callbackName] = function (val) {\r\n        document.body.removeChild(script)\r\n        clearTimeout(script.timer)\r\n        window[callbackName] = null\r\n        success && success(val)\r\n    }\r\n    let stemp = random()\r\n    script.src = `${params.url}?${params.data}&_=${1594014089800}`\r\n\r\n    // 超时处理\r\n    if (params.time) {\r\n        script.timer = setTimeout(function () {\r\n            window[callbackName] = null;\r\n            head.removeChild(script);\r\n            fail && fail('请求超时')\r\n        }, parmas.time * 1000);\r\n    }\r\n}\r\n\r\n// 格式化数据\r\nfunction formatParams(data) {\r\n    var arr = []\r\n    if (data) {\r\n        for (let item in data) {\r\n            arr.push(encodeURIComponent(item) + '=' + encodeURIComponent(data[item]))\r\n        }\r\n    }\r\n    return arr.join('&')\r\n}\r\n\r\n// 随机数\r\nfunction random() {\r\n    return Math.floor(Math.random() * 10000 + 500);\r\n}\r\n\r\n\r\nexport default $fetch\r\nexport { setBaseUrl, setToken, setRequestHeaders }\r\n","import $http from '@/utils/http.js'\r\nimport contextServer from \"@/domain/common/context.server.js\"\r\n\r\n// 查询活动基础信息\r\nconst getWebinarInfo = (params = {}) => {\r\n    const { state } = contextServer.get('roomBaseServer')\r\n\r\n    const retParmams = {\r\n        webinar_id: params.webinarId || state.watchInitData.webinar.id,\r\n        is_no_check: 1 || params.is_no_check\r\n    }\r\n\r\n    return $http({\r\n        url: '/v3/webinars/webinar/info',\r\n        type: 'POST',\r\n        data: retParmams\r\n    })\r\n}\r\n\r\n// 查询活动配置信息\r\nconst getConfigList = (params = {}) => {\r\n    const { state } = contextServer.get('roomBaseServer')\r\n\r\n    const retParmams = {\r\n        webinar_id: params.webinar_id || state.watchInitData.webinar.id,\r\n        webinar_user_id: params.webinar_user_id || state.watchInitData.webinar.userinfo.user_id,\r\n        scene_id: params.scene_id || 1\r\n    }\r\n\r\n    return $http({\r\n        url: '/v3/users/permission/get-config-list',\r\n        type: 'POST',\r\n        data: retParmams\r\n    })\r\n}\r\n\r\n// 设置设备检测状态\r\nconst setDevice = (params = {}) => {\r\n    const { state } = contextServer.get('roomBaseServer')\r\n\r\n    const retParmams = {\r\n        room_id: params.room_id || state.watchInitData.interact.room_id,\r\n        status: params.status || 1,\r\n        type: params.type || 0\r\n  }\r\n\r\n    return $http({\r\n        url: '/v3/interacts/room/set-device',\r\n        type: 'POST',\r\n        data: retParmams\r\n    })\r\n}\r\n\r\nconst roomBase = {\r\n    getWebinarInfo,\r\n    getConfigList,\r\n    setDevice\r\n}\r\n\r\nexport default roomBase","import $http from '@/utils/http.js'\r\nimport { merge } from '../utils/index.js'\r\nimport contextServer from \"../domain/common/context.server\"\r\n\r\n// 账号登录&&验证码登录\r\nconst loginInfo = (params = {}) => {\r\n    // const { state } = contextServer.get('roomInitGroupServer') || {}\r\n\r\n    const retParmams = params\r\n    retParmams.biz_id = 2\r\n\r\n    return $http({\r\n        url: '/v3/users/user-consumer/login',\r\n        type: 'POST',\r\n        data: retParmams\r\n    })\r\n}\r\n\r\n// 第三方授权\r\nconst callbackUserInfo = (params = {}) => {\r\n    // const { state } = contextServer.get('roomBaseServer')\r\n\r\n    const retParmams = params;\r\n\r\n    return $http({\r\n        url: '/v3/users/oauth/callback',\r\n        type: 'POST',\r\n        data: retParmams\r\n    })\r\n}\r\n\r\n// 注册\r\nconst register = (params = {}) => {\r\n    // const { state } = contextServer.get('roomBaseServer')\r\n\r\n    const retParmams = { ...params }\r\n\r\n    return $http({\r\n        url: '/v3/users/user-consumer/register',\r\n        type: 'POST',\r\n        data: retParmams\r\n    })\r\n}\r\n\r\n// 手机||邮箱验证码\r\nconst codeCheck = (params = {}) => {\r\n    const { state } = contextServer.get('roomBaseServer')\r\n\r\n    const retParmams = { ...params }\r\n\r\n    return $http({\r\n        url: '/v3/users/code-consumer/check',\r\n        type: 'POST',\r\n        data: retParmams\r\n    })\r\n}\r\n\r\n// 密码重置\r\nconst resetPassword = (params = {}) => {\r\n    const { state } = contextServer.get('roomInitGroupServer')\r\n\r\n    const retParmams = Object.assign({},params,{\r\n        biz_id: state.biz_id || 2\r\n    })\r\n\r\n    return $http({\r\n        url: '/v3/users/user-consumer/reset-password',\r\n        type: 'POST',\r\n        data: retParmams\r\n    })\r\n}\r\n\r\nconst userBase = {\r\n    loginInfo,\r\n    callbackUserInfo,\r\n    register,\r\n    codeCheck,\r\n    resetPassword,\r\n}\r\n\r\nexport default userBase","import $http from '@/utils/http.js'\r\nimport contextServer from \"@/domain/common/context.server.js\"\r\n\r\n// 获取插播文件列表\r\nconst getInsertFileList = (params = {}) => {\r\n    const { state } = contextServer.get('roomBaseServer')\r\n\r\n    const retParmams = {\r\n        webinar_id: params.webinarId || state.watchInitData.webinar.id,\r\n        is_no_check: params.is_no_check || 1,\r\n        pos: params.pos || 0,\r\n        limit: params.limit || 10,\r\n        name: params.name || '',\r\n        get_no_trans: params.get_no_trans || 1,\r\n    }\r\n\r\n    return $http({\r\n        url: '/v3/webinars/waiting-file/get-list',\r\n        type: 'POST',\r\n        data: retParmams\r\n    })\r\n}\r\n\r\n// 删除插播文件\r\nconst deleteInsertFile = (params = {}) => {\r\n    return $http({\r\n        url: '/v3/webinars/waiting-file/get-list',\r\n        type: 'POST',\r\n        data: params\r\n    })\r\n}\r\n\r\nconst insertFile = {\r\n    getInsertFileList,\r\n    deleteInsertFile\r\n}\r\n\r\nexport default insertFile\r\n","import '../libs/sdk.js'\r\nimport roomBase from './roomBase.js'\r\nimport user from './user.js'\r\nimport insertFile from './insertFile.js'\r\n\r\nclass RequestApi {\r\n    constructor() {\r\n        this.live = window.VhallSaasSDK.requestApi.live\r\n        this.roomBase = roomBase\r\n        this.user = user\r\n        this.insertFile = insertFile\r\n    }\r\n}\r\n\r\nconst requestApi = new RequestApi()\r\nexport default requestApi\r\n","export default function useEventEmitter() {\r\n    const state = {\r\n        eventMap: {}\r\n    }\r\n\r\n    const $on = (eventName, callback) => {\r\n        const { eventMap } = state;\r\n        if (eventMap[eventName] === undefined) eventMap[eventName] = []\r\n\r\n        eventMap[eventName].push(callback)\r\n    }\r\n\r\n    const $emit = (eventName, payload = null) => {\r\n        const { eventMap } = state;\r\n\r\n        if (!eventMap[eventName] || eventMap[eventName].length === 0) return;\r\n\r\n        eventMap[eventName].forEach(eventCallback => {\r\n            eventCallback(payload)\r\n        })\r\n    }\r\n\r\n    const $off = (eventName, callback = null) => {\r\n        const { eventMap } = state;\r\n\r\n        if (callback === null) {\r\n            eventMap[eventName] = [];\r\n            return;\r\n        }\r\n\r\n        const index = eventMap[eventName].findIndex(cb => cb === callback)\r\n        index && eventMap[eventName].splice(index, 1)\r\n    }\r\n\r\n    const $destroy = () => {\r\n        const { eventMap } = state;\r\n        eventMap = {};\r\n    }\r\n\r\n    return { $on, $emit, $off, $destroy }\r\n}","\r\nimport requestApi from '@/request/index.js';\r\nimport contextServer from \"@/domain/common/context.server.js\"\r\nimport useEventEmitter from '@/domain/common/eventEmitter.server.js';\r\n\r\nexport default function useRoomBaseServer() {\r\n    const state = {\r\n        inited: false,\r\n        isLiveOver: false,\r\n        webinarVo: {},\r\n        watchInitData: {},\r\n        watchInitErrorData: undefined,// 默认undefined，如果为其他值将触发特殊逻辑\r\n        configList: {}\r\n    }\r\n\r\n    const eventEmitter = useEventEmitter()\r\n\r\n    // 初始化房间信息,包含发起/观看(嵌入/标品)\r\n    const getWatchInitData = (options) => {\r\n        console.log(contextServer.get('useRoomInitGroupServer'))\r\n        const { state: roomInitGroupServer } = contextServer.get('roomInitGroupServer')\r\n\r\n        console.log('init options:', roomInitGroupServer)\r\n\r\n        return roomInitGroupServer.vhallSaasInstance.init(options).then(res => {\r\n            if (res.code === 200) {\r\n                state.inited = true;\r\n                state.watchInitData = res.data;\r\n            } else {\r\n                state.watchInitErrorData = res;\r\n            }\r\n            return res\r\n        });\r\n    }\r\n\r\n    const on = (type, cb) => {\r\n        eventEmitter.$on(type, cb)\r\n    }\r\n\r\n    const destroy = () => {\r\n        eventEmitter.$destroy()\r\n    }\r\n\r\n\r\n    // 获取活动信息\r\n    const getWebinarInfo = (data) => {\r\n        return requestApi.roomBase.getWebinarInfo(data).then(res => {\r\n            state.webinarVo = res.data;\r\n            return res;\r\n        })\r\n    }\r\n\r\n    // 获取房间权限配置列表\r\n    const getConfigList = (data) => {\r\n        return requestApi.roomBase.getConfigList(data).then(res => {\r\n            state.configList = JSON.parse(res.data.permissions);\r\n            return res;\r\n        })\r\n    }\r\n\r\n    // 设置设备检测状态\r\n    const setDevice = (data) => {\r\n        return requestApi.roomBase.setDevice(data).then(res => {\r\n            return res;\r\n        })\r\n    }\r\n\r\n    // 开播startLive\r\n    const startLive = (data = {}) => {\r\n        setDevice(data)\r\n        return requestApi.live.startLive(data)\r\n    }\r\n\r\n    // 结束直播\r\n    const endLive = (data) => {\r\n        return requestApi.live.endLive(data)\r\n    }\r\n\r\n    const init = (option) => {\r\n        return getWatchInitData(option)\r\n    }\r\n\r\n\r\n\r\n    return { state, init, on, destroy, getWatchInitData, getWebinarInfo, getConfigList, startLive, endLive, setDevice }\r\n\r\n}\r\n","import requestApi from '../../request/index';\r\nimport '../../libs/sdk.js'\r\n\r\nexport default function useUserServer() {\r\n    const state = {}\r\n\r\n    // 验证码登录&&账号登录\r\n    const loginInfo = (data) => {\r\n        return requestApi.user.loginInfo(data)\r\n    }\r\n\r\n    // 第三方授权\r\n    const callbackUserInfo = (data) => {\r\n        return requestApi.user.callbackUserInfo(data)\r\n    }\r\n\r\n    // 注册\r\n    const register = (data) => {\r\n        return requestApi.user.register(data)\r\n    }\r\n\r\n    // 手机||邮箱验证码\r\n    const codeCheck = (data) => {\r\n        return requestApi.user.codeCheck(data)\r\n    }\r\n\r\n    // 密码重置\r\n    const resetPassword = (data) => {\r\n        return requestApi.user.resetPassword(data)\r\n    }\r\n\r\n    return { state, loginInfo, callbackUserInfo, register, codeCheck, resetPassword }\r\n}","import requestApi from '../../request/index.js';\r\nimport { uploadFile, isChrome88 } from '@/utils/index.js'\r\nimport contextServer from \"@/domain/common/context.server.js\"\r\n\r\nfunction useInsertFileServer() {\r\n    let state = {\r\n        localInsertStream: null,\r\n        isChrome88: isChrome88()\r\n    }\r\n\r\n    // 获取插播列表\r\n    const getInsertFileList = (params = {}) => {\r\n        return requestApi.insertVideo.getInsertFileList(params)\r\n    }\r\n\r\n    // 删除插播文件\r\n    const deleteInsertFile = (params = {}) => {\r\n        return requestApi.insertVideo.deleteInsertFile(params)\r\n    }\r\n\r\n    // 检查captureStream是否能用\r\n    const isCanUseCaptureStream = () => {\r\n        const v = document.createElement('video');\r\n        if (typeof v.captureStream !== 'function') {\r\n            return false\r\n        }\r\n        return  true\r\n    }\r\n\r\n    // 选择音视频文件\r\n    const selectLocalFile = (onChange = (e) => {}) => {\r\n        const { state: roomBaseState } = contextServer.get('roomBaseServer')\r\n\r\n        let accept = 'video/mp4,video/webm,audio/ogg'\r\n        if (roomBaseState.webinar.mode == 1) { // 直播模式：1-音频、2-视频、3-互动\r\n            accept = 'audio/ogg'\r\n        }\r\n\r\n        const retParams = {\r\n            accept\r\n        }\r\n\r\n        uploadFile(retParams, onChange)\r\n    }\r\n\r\n    // 注册本地音视频播放器开始/播放等事件回调\r\n    const initVideoEvents = (videoELement, cbs) => {\r\n        videoELement.addEventListener(\"ended\", () => {\r\n            cbs.onended && cbs.onended()\r\n        });\r\n        videoELement.addEventListener(\"play\", ()=>{\r\n            cbs.onplay && cbs.onplay()\r\n\r\n        });\r\n        videoELement.addEventListener(\"pause\", ()=>{\r\n            cbs.onpause && cbs.onpause()\r\n        });\r\n    }\r\n\r\n    // 创建video标签播放本地音视频文件\r\n    const createLocalVideoElement = (file, options = {}, cbs = {}) => {\r\n        return new Promise((resolve, reject) => {\r\n            state._isAudio = file.type.includes('ogg')\r\n            const videoElement =  document.createElement('video')\r\n            state._videoElement = videoElement\r\n            videoElement.setAttribute(\"width\", \"100%\")\r\n            videoElement.setAttribute(\"height\", \"100%\")\r\n            const windowURL = window.URL || window.webkitURL\r\n            const fileUrl = windowURL.createObjectURL(file)\r\n            videoElement.src = fileUrl\r\n            videoElement.onload = () => {\r\n                windowURL.revokeObjectURL(fileUrl)\r\n            }\r\n            const videoContainerElement = document.getElementById(options.el)\r\n            videoContainerElement.innerHTML = ''\r\n            videoContainerElement.appendChild(videoElement)\r\n            videoElement.addEventListener('canplay', (e) => {\r\n                setTimeout(()=>{\r\n                    console.log(videoElement.videoHeight,videoElement.videoWidth, '分辨率', (videoElement.videoHeight > 720 || videoElement.videoWidth > 1280))\r\n                    if (videoElement.videoHeight > 720 || videoElement.videoWidth > 1281){\r\n                        reject({ msg: '视频分辨率过高，请打开分辨率为1280*720以下的视频' })\r\n                    } else {\r\n                        resolve(videoElement)\r\n                    }\r\n                },100)\r\n            })\r\n            initVideoEvents(cbs)\r\n        })\r\n    }\r\n\r\n    // 使用canvas抓流\r\n    const captureStreamByCanvas = () => {\r\n        const videoElement = state._videoElement\r\n        const chrome88Canvas = document.createElement('canvas')\r\n        const chrome88canvasContext = chrome88Canvas.getContext('2d')\r\n\r\n        // 将video播放器的画面绘制至canvas上\r\n        clearInterval(state._canvasInterval)\r\n        function drawVideoCanvas() {\r\n            chrome88canvasContext.drawImage(videoElement, 0, 0, chrome88Canvas.width, chrome88Canvas.height)\r\n        }\r\n        chrome88Canvas.width = videoElement.videoWidth;\r\n        chrome88Canvas.height = videoElement.videoHeight;\r\n        drawVideoCanvas();\r\n        state._canvasInterval = setInterval(drawVideoCanvas, 40)\r\n\r\n        // 从canvas中抓取MediaStream\r\n        const canvasStream = chrome88Canvas.captureStream()\r\n        // 从video播放器中抓取MediaStream\r\n        const vodCpatureStream = videoElement.captureStream()\r\n        // audio track 从[video播放器抓取MediaStream对象]中获取\r\n        const audioTrack = vodCpatureStream.getAudioTracks()[0]\r\n        // video track 从[canvas抓取MediaStream对象]中获取\r\n        const videoTrack = canvasStream.getVideoTracks()[0]\r\n        return { audioTrack, videoTrack }\r\n    }\r\n\r\n    // 使用videoElement抓流\r\n    const captureStreamByVideo = () => {\r\n        let videoStream\r\n        const videoElement = state._videoElement\r\n        if (videoElement.captureStream) {\r\n            videoStream = videoElement.captureStream();\r\n            if (!videoStream) {\r\n                return false\r\n            }\r\n            if(videoStream.getTracks().length < 1){\r\n                return false\r\n            }\r\n            return videoStream;\r\n        }\r\n    }\r\n\r\n    // 抓取本地音视频轨道\r\n    const captureLocalStream = () => {\r\n        if (state.isChrome88 && !state._isAudio) {\r\n            return captureStreamByCanvas()\r\n        } else {\r\n            return captureStreamByVideo()\r\n        }\r\n    }\r\n\r\n    // 创建本地插播流\r\n    const createLocalInsertStream = (options = {}) => {\r\n        const retSteram = captureLocalStream()\r\n        const { state: roomBaseServerState } = contextServer.get('roomBaseServer')\r\n\r\n        let retOptions = {\r\n            videoNode: options.videoNode, // 传入本地互动流的显示容器，必填\r\n            audio: false,\r\n            video: false,\r\n            profile: VhallRTC.RTC_VIDEO_PROFILE_1080P_16x9_H, // 默认1080p，后续sdk会做优化，自动识别视频清晰度\r\n            attributes: JSON.stringify({\r\n                role: roomBaseServerState.watchInitData.join_info.role_name,\r\n                nickname: roomBaseServerState.watchInitData.join_info.nickname,\r\n                stream_type: 4,\r\n                has_video: state._isAudio ? 0 : 1\r\n            }),\r\n            streamType: 4\r\n\r\n        }\r\n\r\n        if (state.isChrome88 && !state._isAudio) {\r\n            retOptions = {\r\n                ...retOptions,\r\n                audioTrack: retSteram.audioTrack, // 音频轨道\r\n                videoTrack: retSteram.videoTrack, // 视频轨道\r\n            }\r\n        } else {\r\n            retOptions = {\r\n                ...retOptions,\r\n                mixOption: { // 选填，指定此本地流的音频和视频是否加入旁路混流。支持版本：2.3.2及以上。\r\n                    mixVideo: state._isAudio ? false : true, // 视频是否加入旁路混流\r\n                    mixAudio: true,  // 音频是否加入旁路混流\r\n                },\r\n                hasInsertedStream: true, // 使用外部插入的MediaStream流对象\r\n                insertedStream: retSteram,  // 在上一步已抓取的MediaStream流对象\r\n            }\r\n        }\r\n\r\n        const interactiveServer = contextServer.get('useInteractiveServer')\r\n        return interactiveServer.createLocalStream(retOptions)\r\n    }\r\n\r\n    // 推插播流\r\n    const publishInsertStream = (stream) => {\r\n        const interactiveServer = contextServer.get('useInteractiveServer')\r\n        return new Promise((resolve, reject) => {\r\n            interactiveServer.publishStream({ streamId: stream.streamId })\r\n                .then(res => {\r\n                    state._LoclaStreamId = res.streamId\r\n                    resolve(res)\r\n                })\r\n                .catch(reject)\r\n        })\r\n    }\r\n\r\n    // 停止推流\r\n    const stopPublishInsertStream = (streamId) => {\r\n        return new Promise((resolve, reject)=>{\r\n            const interactiveServer = contextServer.get('useInteractiveServer')\r\n            interactiveServer.unpublishStream({ streamId: streamId || this._LoclaStreamId })\r\n                .then(res => {\r\n                    this._LoclaStreamId = null\r\n                    resolve(res)\r\n                })\r\n                .catch(reject)\r\n        })\r\n    }\r\n\r\n    // 订阅流\r\n    const subscribeInsertStream = (options = {}) => {\r\n        const interactiveServer = contextServer.get('useInteractiveServer')\r\n        return interactiveServer.subscribeStream(options)\r\n    }\r\n\r\n    // 取消订阅流\r\n    const unsubscribeInsertStream = (options = {}) => {\r\n        const interactiveServer = contextServer.get('useInteractiveServer')\r\n        return interactiveServer.unSubscribeStream(options)\r\n    }\r\n\r\n    return {\r\n        state,\r\n        getInsertFileList,\r\n        deleteInsertFile,\r\n        isCanUseCaptureStream,\r\n        selectLocalFile,\r\n        createLocalVideoElement,\r\n        createLocalInsertStream,\r\n        publishInsertStream,\r\n        stopPublishInsertStream,\r\n        subscribeInsertStream,\r\n        unsubscribeInsertStream\r\n    }\r\n}\r\n\r\n\r\nexport default useInsertFileServer\r\n","import contextServer from '@/domain/common/context.server.js'\r\nimport useMsgServer from '@/domain/common/msg.server.js'\r\nimport useRoomBaseServer from '@/domain/roombase/roombase.server.js'\r\nimport useInteractiveServer from '@/domain/stream/interactive.server.js';\r\nimport { setBaseUrl, setToken, setRequestHeaders } from '@/utils/http.js';\r\n\r\nexport default function useRoomInitGroupServer(options = {}) {\r\n    const state = {\r\n        bizId: options.biz_id || 2,// 区分 端（知客/直播） 2-直播 4-知客\r\n        vhallSaasInstance: null\r\n    }\r\n\r\n    let roomBaseServer = useRoomBaseServer();\r\n    let msgServer = useMsgServer();\r\n    let interactiveServer = useInteractiveServer()\r\n\r\n    contextServer.set('roomBaseServer', roomBaseServer)\r\n    contextServer.set('msgServer', msgServer)\r\n    contextServer.set('interactiveServer',interactiveServer)\r\n\r\n    const reload = async () => {\r\n        msgServer.destroy();\r\n        await msgServer.init();\r\n    }\r\n\r\n    const setRequestConfig = (options) => {\r\n        setToken(options.token, options.liveToken)\r\n\r\n        if (options.requestHeaders) {\r\n            setRequestHeaders(options.requestHeaders)\r\n        }\r\n    }\r\n\r\n    const initSdk = () => {\r\n        return new Promise((resolve,reject)=>{\r\n            state.vhallSaasInstance = new window.VhallSaasSDK()\r\n            addToContext()\r\n            resolve()\r\n        })\r\n    }\r\n\r\n    const initSendLive = async (customOptions = {}) => {\r\n        await initSdk()\r\n        const defaultOptions = {\r\n            clientType: 'send',\r\n            development: true,\r\n            requestHeaders: {\r\n                platform: 7\r\n            }\r\n        }\r\n        const options = Object.assign({}, defaultOptions, customOptions)\r\n        setRequestConfig(options)\r\n\r\n        await roomBaseServer.init(options);\r\n        await roomBaseServer.getWebinarInfo();\r\n        await roomBaseServer.getConfigList();\r\n        await msgServer.init();\r\n        await interactiveServer.init();\r\n\r\n        return true;\r\n    }\r\n\r\n    const initReceiveLive = async (customOptions = {}) => {\r\n        initSdk()\r\n        const defaultOptions = {\r\n            clientType: 'receive',\r\n            development: true,\r\n            requestHeaders: {\r\n                platform: 7\r\n            },\r\n            receiveType: 'standard'\r\n        }\r\n        const options = Object.assign({}, defaultOptions, customOptions)\r\n        setRequestConfig(options)\r\n\r\n        await roomBaseServer.init(options)\r\n        await roomBaseServer.getWebinarInfo()\r\n        await roomBaseServer.getConfigList()\r\n        await msgServer.init();\r\n        await interactiveServer.init();\r\n        \r\n        return true;\r\n    }\r\n\r\n    const result = { state,roomBaseServer, msgServer,interactiveServer,reload, initSendLive, initReceiveLive }\r\n\r\n    function addToContext() {\r\n        contextServer.set('roomInitGroupServer', result)\r\n    }\r\n\r\n    return result;\r\n}\r\n"],"names":["useContextServer","state","serverPool","set","key","server","get","show","clear","contextServer","useMsgServer","msgInstance","init","roomInitGroupServer","vhallSaasInstance","createChat","then","res","$on","eventType","fn","$emit","params","destroy","useInteractiveServer","interactiveInstance","streamId","remoteStreams","option","createInteractive","interactives","console","log","instance","createLocalStream","options","createLocalVideoStream","addConfig","createLocaldesktopStream","createLocalAudioStream","createLocalPhotoStream","stopStream","destroyStream","publishStream","unpublishStream","subscribeStream","unSubscribeStream","setDual","muteVideo","muteAudio","startBroadCast","stopBroadCast","setBroadCastLayout","setBroadCastScreen","mainScreenStreamId","getDevices","getCameras","getMicrophones","getSpeakers","getVideoConstraints","deviceId","setVideoProfile","isScreenShareSupported","checkSystemRequirements","getPacketLossRate","getStreamPacketLoss","getRoomStreams","getAudioLevel","startPushStream","createLocalAndStream","interactive","camerasList","micropsList","videoConstraintsList","data","videoInputDevices","filter","d","label","audioInputDevices","RESOLUTION_REG","item","test","videoNode","videoDevice","audioDevice","profile","err","remoteStreamList","getRemoteStreams","remoteStream","push","listenerSdk","on","VhallRTC","EVENT_REMOTESTREAM_ADD","e","EVENT_REMOTESTREAM_REMOVED","mountSDK","node","document","resolve","uploadFile","onChange","inputObj","createElement","setAttribute","accept","body","appendChild","value","click","addEventListener","isChrome88","chromeReg","chromeResult","exec","navigator","userAgent","length","BUSE_URL","TOKEN","LIVETOKEN","HEADERS","setBaseUrl","url","setToken","token","livetoken","setRequestHeaders","Object","assign","$fetch","Promise","reject","live_token","formatParams","dataType","jsonp","json","success","fail","xhr","type","toUpperCase","window","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","status","response","getResponseHeader","indexOf","responseXML","JSON","parse","responseText","open","setRequestHeader","getOwnPropertyNames","forEach","send","callbackName","script","charset","val","removeChild","clearTimeout","timer","src","time","setTimeout","head","parmas","arr","encodeURIComponent","join","getWebinarInfo","retParmams","webinar_id","webinarId","watchInitData","webinar","id","is_no_check","$http","getConfigList","webinar_user_id","userinfo","user_id","scene_id","setDevice","room_id","interact","roomBase","loginInfo","biz_id","callbackUserInfo","register","codeCheck","resetPassword","userBase","getInsertFileList","pos","limit","name","get_no_trans","deleteInsertFile","insertFile","RequestApi","live","VhallSaasSDK","requestApi","user","useEventEmitter","eventMap","eventName","callback","undefined","payload","eventCallback","$off","index","findIndex","cb","splice","$destroy","useRoomBaseServer","inited","isLiveOver","webinarVo","watchInitErrorData","configList","eventEmitter","getWatchInitData","code","permissions","startLive","endLive","useUserServer","useInsertFileServer","localInsertStream","insertVideo","isCanUseCaptureStream","v","captureStream","selectLocalFile","roomBaseState","mode","retParams","initVideoEvents","videoELement","cbs","onended","onplay","onpause","createLocalVideoElement","file","_isAudio","includes","videoElement","_videoElement","windowURL","URL","webkitURL","fileUrl","createObjectURL","onload","revokeObjectURL","videoContainerElement","getElementById","el","innerHTML","videoHeight","videoWidth","msg","captureStreamByCanvas","chrome88Canvas","chrome88canvasContext","getContext","clearInterval","_canvasInterval","drawVideoCanvas","drawImage","width","height","setInterval","canvasStream","vodCpatureStream","audioTrack","getAudioTracks","videoTrack","getVideoTracks","captureStreamByVideo","videoStream","getTracks","captureLocalStream","createLocalInsertStream","retSteram","roomBaseServerState","retOptions","audio","video","RTC_VIDEO_PROFILE_1080P_16x9_H","attributes","stringify","role","join_info","role_name","nickname","stream_type","has_video","streamType","mixOption","mixVideo","mixAudio","hasInsertedStream","insertedStream","interactiveServer","publishInsertStream","stream","_LoclaStreamId","stopPublishInsertStream","subscribeInsertStream","unsubscribeInsertStream","useRoomInitGroupServer","bizId","roomBaseServer","msgServer","reload","setRequestConfig","liveToken","requestHeaders","initSdk","addToContext","initSendLive","customOptions","defaultOptions","clientType","development","platform","initReceiveLive","receiveType","result"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}